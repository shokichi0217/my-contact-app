(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function b1(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Kh={exports:{}},Ia={},Qh={exports:{}},Pe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zm;function U1(){if(Zm)return Pe;Zm=1;var i=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),E=Symbol.iterator;function I(N){return N===null||typeof N!="object"?null:(N=E&&N[E]||N["@@iterator"],typeof N=="function"?N:null)}var L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$=Object.assign,q={};function H(N,W,ce){this.props=N,this.context=W,this.refs=q,this.updater=ce||L}H.prototype.isReactComponent={},H.prototype.setState=function(N,W){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,W,"setState")},H.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function Z(){}Z.prototype=H.prototype;function se(N,W,ce){this.props=N,this.context=W,this.refs=q,this.updater=ce||L}var fe=se.prototype=new Z;fe.constructor=se,$(fe,H.prototype),fe.isPureReactComponent=!0;var Te=Array.isArray,De=Object.prototype.hasOwnProperty,Ce={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function A(N,W,ce){var le,_e={},ve=null,Ie=null;if(W!=null)for(le in W.ref!==void 0&&(Ie=W.ref),W.key!==void 0&&(ve=""+W.key),W)De.call(W,le)&&!k.hasOwnProperty(le)&&(_e[le]=W[le]);var Me=arguments.length-2;if(Me===1)_e.children=ce;else if(1<Me){for(var $e=Array(Me),zt=0;zt<Me;zt++)$e[zt]=arguments[zt+2];_e.children=$e}if(N&&N.defaultProps)for(le in Me=N.defaultProps,Me)_e[le]===void 0&&(_e[le]=Me[le]);return{$$typeof:i,type:N,key:ve,ref:Ie,props:_e,_owner:Ce.current}}function R(N,W){return{$$typeof:i,type:N.type,key:W,ref:N.ref,props:N.props,_owner:N._owner}}function D(N){return typeof N=="object"&&N!==null&&N.$$typeof===i}function x(N){var W={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(ce){return W[ce]})}var M=/\/+/g;function C(N,W){return typeof N=="object"&&N!==null&&N.key!=null?x(""+N.key):W.toString(36)}function Le(N,W,ce,le,_e){var ve=typeof N;(ve==="undefined"||ve==="boolean")&&(N=null);var Ie=!1;if(N===null)Ie=!0;else switch(ve){case"string":case"number":Ie=!0;break;case"object":switch(N.$$typeof){case i:case e:Ie=!0}}if(Ie)return Ie=N,_e=_e(Ie),N=le===""?"."+C(Ie,0):le,Te(_e)?(ce="",N!=null&&(ce=N.replace(M,"$&/")+"/"),Le(_e,W,ce,"",function(zt){return zt})):_e!=null&&(D(_e)&&(_e=R(_e,ce+(!_e.key||Ie&&Ie.key===_e.key?"":(""+_e.key).replace(M,"$&/")+"/")+N)),W.push(_e)),1;if(Ie=0,le=le===""?".":le+":",Te(N))for(var Me=0;Me<N.length;Me++){ve=N[Me];var $e=le+C(ve,Me);Ie+=Le(ve,W,ce,$e,_e)}else if($e=I(N),typeof $e=="function")for(N=$e.call(N),Me=0;!(ve=N.next()).done;)ve=ve.value,$e=le+C(ve,Me++),Ie+=Le(ve,W,ce,$e,_e);else if(ve==="object")throw W=String(N),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.");return Ie}function Je(N,W,ce){if(N==null)return N;var le=[],_e=0;return Le(N,le,"","",function(ve){return W.call(ce,ve,_e++)}),le}function rt(N){if(N._status===-1){var W=N._result;W=W(),W.then(function(ce){(N._status===0||N._status===-1)&&(N._status=1,N._result=ce)},function(ce){(N._status===0||N._status===-1)&&(N._status=2,N._result=ce)}),N._status===-1&&(N._status=0,N._result=W)}if(N._status===1)return N._result.default;throw N._result}var je={current:null},te={transition:null},de={ReactCurrentDispatcher:je,ReactCurrentBatchConfig:te,ReactCurrentOwner:Ce};function j(){throw Error("act(...) is not supported in production builds of React.")}return Pe.Children={map:Je,forEach:function(N,W,ce){Je(N,function(){W.apply(this,arguments)},ce)},count:function(N){var W=0;return Je(N,function(){W++}),W},toArray:function(N){return Je(N,function(W){return W})||[]},only:function(N){if(!D(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},Pe.Component=H,Pe.Fragment=t,Pe.Profiler=o,Pe.PureComponent=se,Pe.StrictMode=s,Pe.Suspense=g,Pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=de,Pe.act=j,Pe.cloneElement=function(N,W,ce){if(N==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+N+".");var le=$({},N.props),_e=N.key,ve=N.ref,Ie=N._owner;if(W!=null){if(W.ref!==void 0&&(ve=W.ref,Ie=Ce.current),W.key!==void 0&&(_e=""+W.key),N.type&&N.type.defaultProps)var Me=N.type.defaultProps;for($e in W)De.call(W,$e)&&!k.hasOwnProperty($e)&&(le[$e]=W[$e]===void 0&&Me!==void 0?Me[$e]:W[$e])}var $e=arguments.length-2;if($e===1)le.children=ce;else if(1<$e){Me=Array($e);for(var zt=0;zt<$e;zt++)Me[zt]=arguments[zt+2];le.children=Me}return{$$typeof:i,type:N.type,key:_e,ref:ve,props:le,_owner:Ie}},Pe.createContext=function(N){return N={$$typeof:h,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},N.Provider={$$typeof:l,_context:N},N.Consumer=N},Pe.createElement=A,Pe.createFactory=function(N){var W=A.bind(null,N);return W.type=N,W},Pe.createRef=function(){return{current:null}},Pe.forwardRef=function(N){return{$$typeof:f,render:N}},Pe.isValidElement=D,Pe.lazy=function(N){return{$$typeof:w,_payload:{_status:-1,_result:N},_init:rt}},Pe.memo=function(N,W){return{$$typeof:y,type:N,compare:W===void 0?null:W}},Pe.startTransition=function(N){var W=te.transition;te.transition={};try{N()}finally{te.transition=W}},Pe.unstable_act=j,Pe.useCallback=function(N,W){return je.current.useCallback(N,W)},Pe.useContext=function(N){return je.current.useContext(N)},Pe.useDebugValue=function(){},Pe.useDeferredValue=function(N){return je.current.useDeferredValue(N)},Pe.useEffect=function(N,W){return je.current.useEffect(N,W)},Pe.useId=function(){return je.current.useId()},Pe.useImperativeHandle=function(N,W,ce){return je.current.useImperativeHandle(N,W,ce)},Pe.useInsertionEffect=function(N,W){return je.current.useInsertionEffect(N,W)},Pe.useLayoutEffect=function(N,W){return je.current.useLayoutEffect(N,W)},Pe.useMemo=function(N,W){return je.current.useMemo(N,W)},Pe.useReducer=function(N,W,ce){return je.current.useReducer(N,W,ce)},Pe.useRef=function(N){return je.current.useRef(N)},Pe.useState=function(N){return je.current.useState(N)},Pe.useSyncExternalStore=function(N,W,ce){return je.current.useSyncExternalStore(N,W,ce)},Pe.useTransition=function(){return je.current.useTransition()},Pe.version="18.3.1",Pe}var eg;function $a(){return eg||(eg=1,Qh.exports=U1()),Qh.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tg;function F1(){if(tg)return Ia;tg=1;var i=$a(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function h(f,g,y){var w,E={},I=null,L=null;y!==void 0&&(I=""+y),g.key!==void 0&&(I=""+g.key),g.ref!==void 0&&(L=g.ref);for(w in g)s.call(g,w)&&!l.hasOwnProperty(w)&&(E[w]=g[w]);if(f&&f.defaultProps)for(w in g=f.defaultProps,g)E[w]===void 0&&(E[w]=g[w]);return{$$typeof:e,type:f,key:I,ref:L,props:E,_owner:o.current}}return Ia.Fragment=t,Ia.jsx=h,Ia.jsxs=h,Ia}var ng;function j1(){return ng||(ng=1,Kh.exports=F1()),Kh.exports}var V=j1(),Xe=$a(),yu={},Xh={exports:{}},Xt={},Yh={exports:{}},Jh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rg;function B1(){return rg||(rg=1,(function(i){function e(te,de){var j=te.length;te.push(de);e:for(;0<j;){var N=j-1>>>1,W=te[N];if(0<o(W,de))te[N]=de,te[j]=W,j=N;else break e}}function t(te){return te.length===0?null:te[0]}function s(te){if(te.length===0)return null;var de=te[0],j=te.pop();if(j!==de){te[0]=j;e:for(var N=0,W=te.length,ce=W>>>1;N<ce;){var le=2*(N+1)-1,_e=te[le],ve=le+1,Ie=te[ve];if(0>o(_e,j))ve<W&&0>o(Ie,_e)?(te[N]=Ie,te[ve]=j,N=ve):(te[N]=_e,te[le]=j,N=le);else if(ve<W&&0>o(Ie,j))te[N]=Ie,te[ve]=j,N=ve;else break e}}return de}function o(te,de){var j=te.sortIndex-de.sortIndex;return j!==0?j:te.id-de.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;i.unstable_now=function(){return l.now()}}else{var h=Date,f=h.now();i.unstable_now=function(){return h.now()-f}}var g=[],y=[],w=1,E=null,I=3,L=!1,$=!1,q=!1,H=typeof setTimeout=="function"?setTimeout:null,Z=typeof clearTimeout=="function"?clearTimeout:null,se=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function fe(te){for(var de=t(y);de!==null;){if(de.callback===null)s(y);else if(de.startTime<=te)s(y),de.sortIndex=de.expirationTime,e(g,de);else break;de=t(y)}}function Te(te){if(q=!1,fe(te),!$)if(t(g)!==null)$=!0,rt(De);else{var de=t(y);de!==null&&je(Te,de.startTime-te)}}function De(te,de){$=!1,q&&(q=!1,Z(A),A=-1),L=!0;var j=I;try{for(fe(de),E=t(g);E!==null&&(!(E.expirationTime>de)||te&&!x());){var N=E.callback;if(typeof N=="function"){E.callback=null,I=E.priorityLevel;var W=N(E.expirationTime<=de);de=i.unstable_now(),typeof W=="function"?E.callback=W:E===t(g)&&s(g),fe(de)}else s(g);E=t(g)}if(E!==null)var ce=!0;else{var le=t(y);le!==null&&je(Te,le.startTime-de),ce=!1}return ce}finally{E=null,I=j,L=!1}}var Ce=!1,k=null,A=-1,R=5,D=-1;function x(){return!(i.unstable_now()-D<R)}function M(){if(k!==null){var te=i.unstable_now();D=te;var de=!0;try{de=k(!0,te)}finally{de?C():(Ce=!1,k=null)}}else Ce=!1}var C;if(typeof se=="function")C=function(){se(M)};else if(typeof MessageChannel<"u"){var Le=new MessageChannel,Je=Le.port2;Le.port1.onmessage=M,C=function(){Je.postMessage(null)}}else C=function(){H(M,0)};function rt(te){k=te,Ce||(Ce=!0,C())}function je(te,de){A=H(function(){te(i.unstable_now())},de)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(te){te.callback=null},i.unstable_continueExecution=function(){$||L||($=!0,rt(De))},i.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<te?Math.floor(1e3/te):5},i.unstable_getCurrentPriorityLevel=function(){return I},i.unstable_getFirstCallbackNode=function(){return t(g)},i.unstable_next=function(te){switch(I){case 1:case 2:case 3:var de=3;break;default:de=I}var j=I;I=de;try{return te()}finally{I=j}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(te,de){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var j=I;I=te;try{return de()}finally{I=j}},i.unstable_scheduleCallback=function(te,de,j){var N=i.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?N+j:N):j=N,te){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=j+W,te={id:w++,callback:de,priorityLevel:te,startTime:j,expirationTime:W,sortIndex:-1},j>N?(te.sortIndex=j,e(y,te),t(g)===null&&te===t(y)&&(q?(Z(A),A=-1):q=!0,je(Te,j-N))):(te.sortIndex=W,e(g,te),$||L||($=!0,rt(De))),te},i.unstable_shouldYield=x,i.unstable_wrapCallback=function(te){var de=I;return function(){var j=I;I=de;try{return te.apply(this,arguments)}finally{I=j}}}})(Jh)),Jh}var ig;function z1(){return ig||(ig=1,Yh.exports=B1()),Yh.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sg;function $1(){if(sg)return Xt;sg=1;var i=$a(),e=z1();function t(n){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function l(n,r){h(n,r),h(n+"Capture",r)}function h(n,r){for(o[n]=r,n=0;n<r.length;n++)s.add(r[n])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w={},E={};function I(n){return g.call(E,n)?!0:g.call(w,n)?!1:y.test(n)?E[n]=!0:(w[n]=!0,!1)}function L(n,r,a,c){if(a!==null&&a.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function $(n,r,a,c){if(r===null||typeof r>"u"||L(n,r,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function q(n,r,a,c,d,p,v){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=c,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=n,this.type=r,this.sanitizeURL=p,this.removeEmptyString=v}var H={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){H[n]=new q(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var r=n[0];H[r]=new q(r,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){H[n]=new q(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){H[n]=new q(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){H[n]=new q(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){H[n]=new q(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){H[n]=new q(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){H[n]=new q(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){H[n]=new q(n,5,!1,n.toLowerCase(),null,!1,!1)});var Z=/[\-:]([a-z])/g;function se(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var r=n.replace(Z,se);H[r]=new q(r,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var r=n.replace(Z,se);H[r]=new q(r,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var r=n.replace(Z,se);H[r]=new q(r,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){H[n]=new q(n,1,!1,n.toLowerCase(),null,!1,!1)}),H.xlinkHref=new q("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){H[n]=new q(n,1,!1,n.toLowerCase(),null,!0,!0)});function fe(n,r,a,c){var d=H.hasOwnProperty(r)?H[r]:null;(d!==null?d.type!==0:c||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&($(r,a,d,c)&&(a=null),c||d===null?I(r)&&(a===null?n.removeAttribute(r):n.setAttribute(r,""+a)):d.mustUseProperty?n[d.propertyName]=a===null?d.type===3?!1:"":a:(r=d.attributeName,c=d.attributeNamespace,a===null?n.removeAttribute(r):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,c?n.setAttributeNS(c,r,a):n.setAttribute(r,a))))}var Te=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,De=Symbol.for("react.element"),Ce=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),x=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),Le=Symbol.for("react.suspense_list"),Je=Symbol.for("react.memo"),rt=Symbol.for("react.lazy"),je=Symbol.for("react.offscreen"),te=Symbol.iterator;function de(n){return n===null||typeof n!="object"?null:(n=te&&n[te]||n["@@iterator"],typeof n=="function"?n:null)}var j=Object.assign,N;function W(n){if(N===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);N=r&&r[1]||""}return`
`+N+n}var ce=!1;function le(n,r){if(!n||ce)return"";ce=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(B){var c=B}Reflect.construct(n,[],r)}else{try{r.call()}catch(B){c=B}n.call(r.prototype)}else{try{throw Error()}catch(B){c=B}n()}}catch(B){if(B&&c&&typeof B.stack=="string"){for(var d=B.stack.split(`
`),p=c.stack.split(`
`),v=d.length-1,S=p.length-1;1<=v&&0<=S&&d[v]!==p[S];)S--;for(;1<=v&&0<=S;v--,S--)if(d[v]!==p[S]){if(v!==1||S!==1)do if(v--,S--,0>S||d[v]!==p[S]){var P=`
`+d[v].replace(" at new "," at ");return n.displayName&&P.includes("<anonymous>")&&(P=P.replace("<anonymous>",n.displayName)),P}while(1<=v&&0<=S);break}}}finally{ce=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?W(n):""}function _e(n){switch(n.tag){case 5:return W(n.type);case 16:return W("Lazy");case 13:return W("Suspense");case 19:return W("SuspenseList");case 0:case 2:case 15:return n=le(n.type,!1),n;case 11:return n=le(n.type.render,!1),n;case 1:return n=le(n.type,!0),n;default:return""}}function ve(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case k:return"Fragment";case Ce:return"Portal";case R:return"Profiler";case A:return"StrictMode";case C:return"Suspense";case Le:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case x:return(n.displayName||"Context")+".Consumer";case D:return(n._context.displayName||"Context")+".Provider";case M:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Je:return r=n.displayName||null,r!==null?r:ve(n.type)||"Memo";case rt:r=n._payload,n=n._init;try{return ve(n(r))}catch{}}return null}function Ie(n){var r=n.type;switch(n.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=r.render,n=n.displayName||n.name||"",r.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ve(r);case 8:return r===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function Me(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function $e(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function zt(n){var r=$e(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,r),c=""+n[r];if(!n.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,p=a.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return d.call(this)},set:function(v){c=""+v,p.call(this,v)}}),Object.defineProperty(n,r,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(v){c=""+v},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function ps(n){n._valueTracker||(n._valueTracker=zt(n))}function ko(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var a=r.getValue(),c="";return n&&(c=$e(n)?n.checked?"true":"false":n.value),n=c,n!==a?(r.setValue(n),!0):!1}function Nr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function ms(n,r){var a=r.checked;return j({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function nl(n,r){var a=r.defaultValue==null?"":r.defaultValue,c=r.checked!=null?r.checked:r.defaultChecked;a=Me(r.value!=null?r.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function gs(n,r){r=r.checked,r!=null&&fe(n,"checked",r,!1)}function Pi(n,r){gs(n,r);var a=Me(r.value),c=r.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}r.hasOwnProperty("value")?ct(n,r.type,a):r.hasOwnProperty("defaultValue")&&ct(n,r.type,Me(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(n.defaultChecked=!!r.defaultChecked)}function xo(n,r,a){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var c=r.type;if(!(c!=="submit"&&c!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+n._wrapperState.initialValue,a||r===n.value||(n.value=r),n.defaultValue=r}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function ct(n,r,a){(r!=="number"||Nr(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var ot=Array.isArray;function vn(n,r,a,c){if(n=n.options,r){r={};for(var d=0;d<a.length;d++)r["$"+a[d]]=!0;for(a=0;a<n.length;a++)d=r.hasOwnProperty("$"+n[a].value),n[a].selected!==d&&(n[a].selected=d),d&&c&&(n[a].defaultSelected=!0)}else{for(a=""+Me(a),r=null,d=0;d<n.length;d++){if(n[d].value===a){n[d].selected=!0,c&&(n[d].defaultSelected=!0);return}r!==null||n[d].disabled||(r=n[d])}r!==null&&(r.selected=!0)}}function No(n,r){if(r.dangerouslySetInnerHTML!=null)throw Error(t(91));return j({},r,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Do(n,r){var a=r.value;if(a==null){if(a=r.children,r=r.defaultValue,a!=null){if(r!=null)throw Error(t(92));if(ot(a)){if(1<a.length)throw Error(t(93));a=a[0]}r=a}r==null&&(r=""),a=r}n._wrapperState={initialValue:Me(a)}}function rl(n,r){var a=Me(r.value),c=Me(r.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),r.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function Dr(n){var r=n.textContent;r===n._wrapperState.initialValue&&r!==""&&r!==null&&(n.value=r)}function Vo(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ys(n,r){return n==null||n==="http://www.w3.org/1999/xhtml"?Vo(r):n==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Vr,il=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,a,c,d){MSApp.execUnsafeLocalFunction(function(){return n(r,a,c,d)})}:n})(function(n,r){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=r;else{for(Vr=Vr||document.createElement("div"),Vr.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=Vr.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;r.firstChild;)n.appendChild(r.firstChild)}});function ki(n,r){if(r){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=r;return}}n.textContent=r}var Or={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sl=["Webkit","ms","Moz","O"];Object.keys(Or).forEach(function(n){sl.forEach(function(r){r=r+n.charAt(0).toUpperCase()+n.substring(1),Or[r]=Or[n]})});function Lr(n,r,a){return r==null||typeof r=="boolean"||r===""?"":a||typeof r!="number"||r===0||Or.hasOwnProperty(n)&&Or[n]?(""+r).trim():r+"px"}function _s(n,r){n=n.style;for(var a in r)if(r.hasOwnProperty(a)){var c=a.indexOf("--")===0,d=Lr(a,r[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,d):n[a]=d}}var Oo=j({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wn(n,r){if(r){if(Oo[n]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(t(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(t(61))}if(r.style!=null&&typeof r.style!="object")throw Error(t(62))}}function vs(n,r){if(n.indexOf("-")===-1)return typeof r.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Mr=null;function ws(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var sr=null,or=null,it=null;function Lo(n){if(n=la(n)){if(typeof sr!="function")throw Error(t(280));var r=n.stateNode;r&&(r=Dl(r),sr(n.stateNode,n.type,r))}}function br(n){or?it?it.push(n):it=[n]:or=n}function Ur(){if(or){var n=or,r=it;if(it=or=null,Lo(n),r)for(n=0;n<r.length;n++)Lo(r[n])}}function ol(n,r){return n(r)}function al(){}var Dn=!1;function ll(n,r,a){if(Dn)return n(r,a);Dn=!0;try{return ol(n,r,a)}finally{Dn=!1,(or!==null||it!==null)&&(al(),Ur())}}function xi(n,r){var a=n.stateNode;if(a===null)return null;var c=Dl(a);if(c===null)return null;a=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,r,typeof a));return a}var Fr=!1;if(f)try{var jr={};Object.defineProperty(jr,"passive",{get:function(){Fr=!0}}),window.addEventListener("test",jr,jr),window.removeEventListener("test",jr,jr)}catch{Fr=!1}function ul(n,r,a,c,d,p,v,S,P){var B=Array.prototype.slice.call(arguments,3);try{r.apply(a,B)}catch(X){this.onError(X)}}var ar=!1,Vn=null,Es=!1,cn=null,cl={onError:function(n){ar=!0,Vn=n}};function hl(n,r,a,c,d,p,v,S,P){ar=!1,Vn=null,ul.apply(cl,arguments)}function Mo(n,r,a,c,d,p,v,S,P){if(hl.apply(this,arguments),ar){if(ar){var B=Vn;ar=!1,Vn=null}else throw Error(t(198));Es||(Es=!0,cn=B)}}function En(n){var r=n,a=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(a=r.return),n=r.return;while(n)}return r.tag===3?a:null}function bo(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function dl(n){if(En(n)!==n)throw Error(t(188))}function fl(n){var r=n.alternate;if(!r){if(r=En(n),r===null)throw Error(t(188));return r!==n?null:n}for(var a=n,c=r;;){var d=a.return;if(d===null)break;var p=d.alternate;if(p===null){if(c=d.return,c!==null){a=c;continue}break}if(d.child===p.child){for(p=d.child;p;){if(p===a)return dl(d),n;if(p===c)return dl(d),r;p=p.sibling}throw Error(t(188))}if(a.return!==c.return)a=d,c=p;else{for(var v=!1,S=d.child;S;){if(S===a){v=!0,a=d,c=p;break}if(S===c){v=!0,c=d,a=p;break}S=S.sibling}if(!v){for(S=p.child;S;){if(S===a){v=!0,a=p,c=d;break}if(S===c){v=!0,c=p,a=d;break}S=S.sibling}if(!v)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:r}function pl(n){return n=fl(n),n!==null?Ni(n):null}function Ni(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var r=Ni(n);if(r!==null)return r;n=n.sibling}return null}var Uo=e.unstable_scheduleCallback,Ts=e.unstable_cancelCallback,Di=e.unstable_shouldYield,lr=e.unstable_requestPaint,Ge=e.unstable_now,Ac=e.unstable_getCurrentPriorityLevel,Is=e.unstable_ImmediatePriority,Fo=e.unstable_UserBlockingPriority,Vi=e.unstable_NormalPriority,jo=e.unstable_LowPriority,Ss=e.unstable_IdlePriority,Oi=null,Zt=null;function ml(n){if(Zt&&typeof Zt.onCommitFiberRoot=="function")try{Zt.onCommitFiberRoot(Oi,n,void 0,(n.current.flags&128)===128)}catch{}}var en=Math.clz32?Math.clz32:Li,On=Math.log,hn=Math.LN2;function Li(n){return n>>>=0,n===0?32:31-(On(n)/hn|0)|0}var Ln=64,Br=4194304;function Fe(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function ur(n,r){var a=n.pendingLanes;if(a===0)return 0;var c=0,d=n.suspendedLanes,p=n.pingedLanes,v=a&268435455;if(v!==0){var S=v&~d;S!==0?c=Fe(S):(p&=v,p!==0&&(c=Fe(p)))}else v=a&~d,v!==0?c=Fe(v):p!==0&&(c=Fe(p));if(c===0)return 0;if(r!==0&&r!==c&&(r&d)===0&&(d=c&-c,p=r&-r,d>=p||d===16&&(p&4194240)!==0))return r;if((c&4)!==0&&(c|=a&16),r=n.entangledLanes,r!==0)for(n=n.entanglements,r&=c;0<r;)a=31-en(r),d=1<<a,c|=n[a],r&=~d;return c}function Mi(n,r){switch(n){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bi(n,r){for(var a=n.suspendedLanes,c=n.pingedLanes,d=n.expirationTimes,p=n.pendingLanes;0<p;){var v=31-en(p),S=1<<v,P=d[v];P===-1?((S&a)===0||(S&c)!==0)&&(d[v]=Mi(S,r)):P<=r&&(n.expiredLanes|=S),p&=~S}}function Bo(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function zo(){var n=Ln;return Ln<<=1,(Ln&4194240)===0&&(Ln=64),n}function $o(n){for(var r=[],a=0;31>a;a++)r.push(n);return r}function Ui(n,r,a){n.pendingLanes|=r,r!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,r=31-en(r),n[r]=a}function Rc(n,r){var a=n.pendingLanes&~r;n.pendingLanes=r,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=r,n.mutableReadLanes&=r,n.entangledLanes&=r,r=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var d=31-en(a),p=1<<d;r[d]=0,c[d]=-1,n[d]=-1,a&=~p}}function qo(n,r){var a=n.entangledLanes|=r;for(n=n.entanglements;a;){var c=31-en(a),d=1<<c;d&r|n[c]&r&&(n[c]|=r),a&=~d}}var Ve=0;function Mn(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var Ho,As,Wo,Go,Ko,bn=!1,Rs=[],Un=null,Fn=null,St=null,Fi=new Map,cr=new Map,tn=[],gl="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function zr(n,r){switch(n){case"focusin":case"focusout":Un=null;break;case"dragenter":case"dragleave":Fn=null;break;case"mouseover":case"mouseout":St=null;break;case"pointerover":case"pointerout":Fi.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":cr.delete(r.pointerId)}}function Tn(n,r,a,c,d,p){return n===null||n.nativeEvent!==p?(n={blockedOn:r,domEventName:a,eventSystemFlags:c,nativeEvent:p,targetContainers:[d]},r!==null&&(r=la(r),r!==null&&As(r)),n):(n.eventSystemFlags|=c,r=n.targetContainers,d!==null&&r.indexOf(d)===-1&&r.push(d),n)}function yl(n,r,a,c,d){switch(r){case"focusin":return Un=Tn(Un,n,r,a,c,d),!0;case"dragenter":return Fn=Tn(Fn,n,r,a,c,d),!0;case"mouseover":return St=Tn(St,n,r,a,c,d),!0;case"pointerover":var p=d.pointerId;return Fi.set(p,Tn(Fi.get(p)||null,n,r,a,c,d)),!0;case"gotpointercapture":return p=d.pointerId,cr.set(p,Tn(cr.get(p)||null,n,r,a,c,d)),!0}return!1}function Cs(n){var r=$i(n.target);if(r!==null){var a=En(r);if(a!==null){if(r=a.tag,r===13){if(r=bo(a),r!==null){n.blockedOn=r,Ko(n.priority,function(){Wo(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function qe(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var a=Ps(n.domEventName,n.eventSystemFlags,r[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);Mr=c,a.target.dispatchEvent(c),Mr=null}else return r=la(a),r!==null&&As(r),n.blockedOn=a,!1;r.shift()}return!0}function _l(n,r,a){qe(n)&&a.delete(r)}function Cc(){bn=!1,Un!==null&&qe(Un)&&(Un=null),Fn!==null&&qe(Fn)&&(Fn=null),St!==null&&qe(St)&&(St=null),Fi.forEach(_l),cr.forEach(_l)}function $r(n,r){n.blockedOn===r&&(n.blockedOn=null,bn||(bn=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Cc)))}function qr(n){function r(d){return $r(d,n)}if(0<Rs.length){$r(Rs[0],n);for(var a=1;a<Rs.length;a++){var c=Rs[a];c.blockedOn===n&&(c.blockedOn=null)}}for(Un!==null&&$r(Un,n),Fn!==null&&$r(Fn,n),St!==null&&$r(St,n),Fi.forEach(r),cr.forEach(r),a=0;a<tn.length;a++)c=tn[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<tn.length&&(a=tn[0],a.blockedOn===null);)Cs(a),a.blockedOn===null&&tn.shift()}var hr=Te.ReactCurrentBatchConfig,dr=!0;function jn(n,r,a,c){var d=Ve,p=hr.transition;hr.transition=null;try{Ve=1,Qo(n,r,a,c)}finally{Ve=d,hr.transition=p}}function vl(n,r,a,c){var d=Ve,p=hr.transition;hr.transition=null;try{Ve=4,Qo(n,r,a,c)}finally{Ve=d,hr.transition=p}}function Qo(n,r,a,c){if(dr){var d=Ps(n,r,a,c);if(d===null)Uc(n,r,c,Bn,a),zr(n,c);else if(yl(d,n,r,a,c))c.stopPropagation();else if(zr(n,c),r&4&&-1<gl.indexOf(n)){for(;d!==null;){var p=la(d);if(p!==null&&Ho(p),p=Ps(n,r,a,c),p===null&&Uc(n,r,c,Bn,a),p===d)break;d=p}d!==null&&c.stopPropagation()}else Uc(n,r,c,null,a)}}var Bn=null;function Ps(n,r,a,c){if(Bn=null,n=ws(c),n=$i(n),n!==null)if(r=En(n),r===null)n=null;else if(a=r.tag,a===13){if(n=bo(r),n!==null)return n;n=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null);return Bn=n,null}function ks(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ac()){case Is:return 1;case Fo:return 4;case Vi:case jo:return 16;case Ss:return 536870912;default:return 16}default:return 16}}var nn=null,xs=null,fr=null;function wl(){if(fr)return fr;var n,r=xs,a=r.length,c,d="value"in nn?nn.value:nn.textContent,p=d.length;for(n=0;n<a&&r[n]===d[n];n++);var v=a-n;for(c=1;c<=v&&r[a-c]===d[p-c];c++);return fr=d.slice(n,1<c?1-c:void 0)}function ji(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function zn(){return!0}function Xo(){return!1}function Dt(n){function r(a,c,d,p,v){this._reactName=a,this._targetInst=d,this.type=c,this.nativeEvent=p,this.target=v,this.currentTarget=null;for(var S in n)n.hasOwnProperty(S)&&(a=n[S],this[S]=a?a(p):p[S]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?zn:Xo,this.isPropagationStopped=Xo,this}return j(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=zn)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=zn)},persist:function(){},isPersistent:zn}),r}var $n={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bi=Dt($n),Hr=j({},$n,{view:0,detail:0}),Ns=Dt(Hr),Ds,Vs,rn,zi=j({},Hr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ae,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==rn&&(rn&&n.type==="mousemove"?(Ds=n.screenX-rn.screenX,Vs=n.screenY-rn.screenY):Vs=Ds=0,rn=n),Ds)},movementY:function(n){return"movementY"in n?n.movementY:Vs}}),Yo=Dt(zi),El=j({},zi,{dataTransfer:0}),Tl=Dt(El),Os=j({},Hr,{relatedTarget:0}),At=Dt(Os),Il=j({},$n,{animationName:0,elapsedTime:0,pseudoElement:0}),Sl=Dt(Il),Wr=j({},$n,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),u=Dt(Wr),m=j({},$n,{data:0}),_=Dt(m),T={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},U={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},z={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ee(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=z[n])?!!r[n]:!1}function Ae(){return ee}var at=j({},Hr,{key:function(n){if(n.key){var r=T[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=ji(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?U[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ae,charCode:function(n){return n.type==="keypress"?ji(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ji(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),ze=Dt(at),ht=j({},zi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sn=Dt(ht),pr=j({},Hr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ae}),qn=Dt(pr),Hn=j({},$n,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ls=Dt(Hn),Jo=j({},zi,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),N0=Dt(Jo),D0=[9,13,27,32],Pc=f&&"CompositionEvent"in window,Zo=null;f&&"documentMode"in document&&(Zo=document.documentMode);var V0=f&&"TextEvent"in window&&!Zo,Hf=f&&(!Pc||Zo&&8<Zo&&11>=Zo),Wf=" ",Gf=!1;function Kf(n,r){switch(n){case"keyup":return D0.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qf(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ms=!1;function O0(n,r){switch(n){case"compositionend":return Qf(r);case"keypress":return r.which!==32?null:(Gf=!0,Wf);case"textInput":return n=r.data,n===Wf&&Gf?null:n;default:return null}}function L0(n,r){if(Ms)return n==="compositionend"||!Pc&&Kf(n,r)?(n=wl(),fr=xs=nn=null,Ms=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Hf&&r.locale!=="ko"?null:r.data;default:return null}}var M0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xf(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!M0[n.type]:r==="textarea"}function Yf(n,r,a,c){br(c),r=kl(r,"onChange"),0<r.length&&(a=new Bi("onChange","change",null,a,c),n.push({event:a,listeners:r}))}var ea=null,ta=null;function b0(n){mp(n,0)}function Al(n){var r=Bs(n);if(ko(r))return n}function U0(n,r){if(n==="change")return r}var Jf=!1;if(f){var kc;if(f){var xc="oninput"in document;if(!xc){var Zf=document.createElement("div");Zf.setAttribute("oninput","return;"),xc=typeof Zf.oninput=="function"}kc=xc}else kc=!1;Jf=kc&&(!document.documentMode||9<document.documentMode)}function ep(){ea&&(ea.detachEvent("onpropertychange",tp),ta=ea=null)}function tp(n){if(n.propertyName==="value"&&Al(ta)){var r=[];Yf(r,ta,n,ws(n)),ll(b0,r)}}function F0(n,r,a){n==="focusin"?(ep(),ea=r,ta=a,ea.attachEvent("onpropertychange",tp)):n==="focusout"&&ep()}function j0(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Al(ta)}function B0(n,r){if(n==="click")return Al(r)}function z0(n,r){if(n==="input"||n==="change")return Al(r)}function $0(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var In=typeof Object.is=="function"?Object.is:$0;function na(n,r){if(In(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var a=Object.keys(n),c=Object.keys(r);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var d=a[c];if(!g.call(r,d)||!In(n[d],r[d]))return!1}return!0}function np(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function rp(n,r){var a=np(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=r&&c>=r)return{node:a,offset:r-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=np(a)}}function ip(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?ip(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function sp(){for(var n=window,r=Nr();r instanceof n.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)n=r.contentWindow;else break;r=Nr(n.document)}return r}function Nc(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}function q0(n){var r=sp(),a=n.focusedElem,c=n.selectionRange;if(r!==a&&a&&a.ownerDocument&&ip(a.ownerDocument.documentElement,a)){if(c!==null&&Nc(a)){if(r=c.start,n=c.end,n===void 0&&(n=r),"selectionStart"in a)a.selectionStart=r,a.selectionEnd=Math.min(n,a.value.length);else if(n=(r=a.ownerDocument||document)&&r.defaultView||window,n.getSelection){n=n.getSelection();var d=a.textContent.length,p=Math.min(c.start,d);c=c.end===void 0?p:Math.min(c.end,d),!n.extend&&p>c&&(d=c,c=p,p=d),d=rp(a,p);var v=rp(a,c);d&&v&&(n.rangeCount!==1||n.anchorNode!==d.node||n.anchorOffset!==d.offset||n.focusNode!==v.node||n.focusOffset!==v.offset)&&(r=r.createRange(),r.setStart(d.node,d.offset),n.removeAllRanges(),p>c?(n.addRange(r),n.extend(v.node,v.offset)):(r.setEnd(v.node,v.offset),n.addRange(r)))}}for(r=[],n=a;n=n.parentNode;)n.nodeType===1&&r.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<r.length;a++)n=r[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var H0=f&&"documentMode"in document&&11>=document.documentMode,bs=null,Dc=null,ra=null,Vc=!1;function op(n,r,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Vc||bs==null||bs!==Nr(c)||(c=bs,"selectionStart"in c&&Nc(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),ra&&na(ra,c)||(ra=c,c=kl(Dc,"onSelect"),0<c.length&&(r=new Bi("onSelect","select",null,r,a),n.push({event:r,listeners:c}),r.target=bs)))}function Rl(n,r){var a={};return a[n.toLowerCase()]=r.toLowerCase(),a["Webkit"+n]="webkit"+r,a["Moz"+n]="moz"+r,a}var Us={animationend:Rl("Animation","AnimationEnd"),animationiteration:Rl("Animation","AnimationIteration"),animationstart:Rl("Animation","AnimationStart"),transitionend:Rl("Transition","TransitionEnd")},Oc={},ap={};f&&(ap=document.createElement("div").style,"AnimationEvent"in window||(delete Us.animationend.animation,delete Us.animationiteration.animation,delete Us.animationstart.animation),"TransitionEvent"in window||delete Us.transitionend.transition);function Cl(n){if(Oc[n])return Oc[n];if(!Us[n])return n;var r=Us[n],a;for(a in r)if(r.hasOwnProperty(a)&&a in ap)return Oc[n]=r[a];return n}var lp=Cl("animationend"),up=Cl("animationiteration"),cp=Cl("animationstart"),hp=Cl("transitionend"),dp=new Map,fp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Gr(n,r){dp.set(n,r),l(r,[n])}for(var Lc=0;Lc<fp.length;Lc++){var Mc=fp[Lc],W0=Mc.toLowerCase(),G0=Mc[0].toUpperCase()+Mc.slice(1);Gr(W0,"on"+G0)}Gr(lp,"onAnimationEnd"),Gr(up,"onAnimationIteration"),Gr(cp,"onAnimationStart"),Gr("dblclick","onDoubleClick"),Gr("focusin","onFocus"),Gr("focusout","onBlur"),Gr(hp,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ia="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),K0=new Set("cancel close invalid load scroll toggle".split(" ").concat(ia));function pp(n,r,a){var c=n.type||"unknown-event";n.currentTarget=a,Mo(c,r,void 0,n),n.currentTarget=null}function mp(n,r){r=(r&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],d=c.event;c=c.listeners;e:{var p=void 0;if(r)for(var v=c.length-1;0<=v;v--){var S=c[v],P=S.instance,B=S.currentTarget;if(S=S.listener,P!==p&&d.isPropagationStopped())break e;pp(d,S,B),p=P}else for(v=0;v<c.length;v++){if(S=c[v],P=S.instance,B=S.currentTarget,S=S.listener,P!==p&&d.isPropagationStopped())break e;pp(d,S,B),p=P}}}if(Es)throw n=cn,Es=!1,cn=null,n}function Ke(n,r){var a=r[qc];a===void 0&&(a=r[qc]=new Set);var c=n+"__bubble";a.has(c)||(gp(r,n,2,!1),a.add(c))}function bc(n,r,a){var c=0;r&&(c|=4),gp(a,n,c,r)}var Pl="_reactListening"+Math.random().toString(36).slice(2);function sa(n){if(!n[Pl]){n[Pl]=!0,s.forEach(function(a){a!=="selectionchange"&&(K0.has(a)||bc(a,!1,n),bc(a,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[Pl]||(r[Pl]=!0,bc("selectionchange",!1,r))}}function gp(n,r,a,c){switch(ks(r)){case 1:var d=jn;break;case 4:d=vl;break;default:d=Qo}a=d.bind(null,r,a,n),d=void 0,!Fr||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(d=!0),c?d!==void 0?n.addEventListener(r,a,{capture:!0,passive:d}):n.addEventListener(r,a,!0):d!==void 0?n.addEventListener(r,a,{passive:d}):n.addEventListener(r,a,!1)}function Uc(n,r,a,c,d){var p=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var v=c.tag;if(v===3||v===4){var S=c.stateNode.containerInfo;if(S===d||S.nodeType===8&&S.parentNode===d)break;if(v===4)for(v=c.return;v!==null;){var P=v.tag;if((P===3||P===4)&&(P=v.stateNode.containerInfo,P===d||P.nodeType===8&&P.parentNode===d))return;v=v.return}for(;S!==null;){if(v=$i(S),v===null)return;if(P=v.tag,P===5||P===6){c=p=v;continue e}S=S.parentNode}}c=c.return}ll(function(){var B=p,X=ws(a),Y=[];e:{var Q=dp.get(n);if(Q!==void 0){var ne=Bi,ae=n;switch(n){case"keypress":if(ji(a)===0)break e;case"keydown":case"keyup":ne=ze;break;case"focusin":ae="focus",ne=At;break;case"focusout":ae="blur",ne=At;break;case"beforeblur":case"afterblur":ne=At;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ne=Yo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ne=Tl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ne=qn;break;case lp:case up:case cp:ne=Sl;break;case hp:ne=Ls;break;case"scroll":ne=Ns;break;case"wheel":ne=N0;break;case"copy":case"cut":case"paste":ne=u;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ne=sn}var ue=(r&4)!==0,lt=!ue&&n==="scroll",b=ue?Q!==null?Q+"Capture":null:Q;ue=[];for(var O=B,F;O!==null;){F=O;var J=F.stateNode;if(F.tag===5&&J!==null&&(F=J,b!==null&&(J=xi(O,b),J!=null&&ue.push(oa(O,J,F)))),lt)break;O=O.return}0<ue.length&&(Q=new ne(Q,ae,null,a,X),Y.push({event:Q,listeners:ue}))}}if((r&7)===0){e:{if(Q=n==="mouseover"||n==="pointerover",ne=n==="mouseout"||n==="pointerout",Q&&a!==Mr&&(ae=a.relatedTarget||a.fromElement)&&($i(ae)||ae[mr]))break e;if((ne||Q)&&(Q=X.window===X?X:(Q=X.ownerDocument)?Q.defaultView||Q.parentWindow:window,ne?(ae=a.relatedTarget||a.toElement,ne=B,ae=ae?$i(ae):null,ae!==null&&(lt=En(ae),ae!==lt||ae.tag!==5&&ae.tag!==6)&&(ae=null)):(ne=null,ae=B),ne!==ae)){if(ue=Yo,J="onMouseLeave",b="onMouseEnter",O="mouse",(n==="pointerout"||n==="pointerover")&&(ue=sn,J="onPointerLeave",b="onPointerEnter",O="pointer"),lt=ne==null?Q:Bs(ne),F=ae==null?Q:Bs(ae),Q=new ue(J,O+"leave",ne,a,X),Q.target=lt,Q.relatedTarget=F,J=null,$i(X)===B&&(ue=new ue(b,O+"enter",ae,a,X),ue.target=F,ue.relatedTarget=lt,J=ue),lt=J,ne&&ae)t:{for(ue=ne,b=ae,O=0,F=ue;F;F=Fs(F))O++;for(F=0,J=b;J;J=Fs(J))F++;for(;0<O-F;)ue=Fs(ue),O--;for(;0<F-O;)b=Fs(b),F--;for(;O--;){if(ue===b||b!==null&&ue===b.alternate)break t;ue=Fs(ue),b=Fs(b)}ue=null}else ue=null;ne!==null&&yp(Y,Q,ne,ue,!1),ae!==null&&lt!==null&&yp(Y,lt,ae,ue,!0)}}e:{if(Q=B?Bs(B):window,ne=Q.nodeName&&Q.nodeName.toLowerCase(),ne==="select"||ne==="input"&&Q.type==="file")var he=U0;else if(Xf(Q))if(Jf)he=z0;else{he=j0;var me=F0}else(ne=Q.nodeName)&&ne.toLowerCase()==="input"&&(Q.type==="checkbox"||Q.type==="radio")&&(he=B0);if(he&&(he=he(n,B))){Yf(Y,he,a,X);break e}me&&me(n,Q,B),n==="focusout"&&(me=Q._wrapperState)&&me.controlled&&Q.type==="number"&&ct(Q,"number",Q.value)}switch(me=B?Bs(B):window,n){case"focusin":(Xf(me)||me.contentEditable==="true")&&(bs=me,Dc=B,ra=null);break;case"focusout":ra=Dc=bs=null;break;case"mousedown":Vc=!0;break;case"contextmenu":case"mouseup":case"dragend":Vc=!1,op(Y,a,X);break;case"selectionchange":if(H0)break;case"keydown":case"keyup":op(Y,a,X)}var ge;if(Pc)e:{switch(n){case"compositionstart":var we="onCompositionStart";break e;case"compositionend":we="onCompositionEnd";break e;case"compositionupdate":we="onCompositionUpdate";break e}we=void 0}else Ms?Kf(n,a)&&(we="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(we="onCompositionStart");we&&(Hf&&a.locale!=="ko"&&(Ms||we!=="onCompositionStart"?we==="onCompositionEnd"&&Ms&&(ge=wl()):(nn=X,xs="value"in nn?nn.value:nn.textContent,Ms=!0)),me=kl(B,we),0<me.length&&(we=new _(we,n,null,a,X),Y.push({event:we,listeners:me}),ge?we.data=ge:(ge=Qf(a),ge!==null&&(we.data=ge)))),(ge=V0?O0(n,a):L0(n,a))&&(B=kl(B,"onBeforeInput"),0<B.length&&(X=new _("onBeforeInput","beforeinput",null,a,X),Y.push({event:X,listeners:B}),X.data=ge))}mp(Y,r)})}function oa(n,r,a){return{instance:n,listener:r,currentTarget:a}}function kl(n,r){for(var a=r+"Capture",c=[];n!==null;){var d=n,p=d.stateNode;d.tag===5&&p!==null&&(d=p,p=xi(n,a),p!=null&&c.unshift(oa(n,p,d)),p=xi(n,r),p!=null&&c.push(oa(n,p,d))),n=n.return}return c}function Fs(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function yp(n,r,a,c,d){for(var p=r._reactName,v=[];a!==null&&a!==c;){var S=a,P=S.alternate,B=S.stateNode;if(P!==null&&P===c)break;S.tag===5&&B!==null&&(S=B,d?(P=xi(a,p),P!=null&&v.unshift(oa(a,P,S))):d||(P=xi(a,p),P!=null&&v.push(oa(a,P,S)))),a=a.return}v.length!==0&&n.push({event:r,listeners:v})}var Q0=/\r\n?/g,X0=/\u0000|\uFFFD/g;function _p(n){return(typeof n=="string"?n:""+n).replace(Q0,`
`).replace(X0,"")}function xl(n,r,a){if(r=_p(r),_p(n)!==r&&a)throw Error(t(425))}function Nl(){}var Fc=null,jc=null;function Bc(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var zc=typeof setTimeout=="function"?setTimeout:void 0,Y0=typeof clearTimeout=="function"?clearTimeout:void 0,vp=typeof Promise=="function"?Promise:void 0,J0=typeof queueMicrotask=="function"?queueMicrotask:typeof vp<"u"?function(n){return vp.resolve(null).then(n).catch(Z0)}:zc;function Z0(n){setTimeout(function(){throw n})}function $c(n,r){var a=r,c=0;do{var d=a.nextSibling;if(n.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(c===0){n.removeChild(d),qr(r);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=d}while(a);qr(r)}function Kr(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return n}function wp(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return n;r--}else a==="/$"&&r++}n=n.previousSibling}return null}var js=Math.random().toString(36).slice(2),Wn="__reactFiber$"+js,aa="__reactProps$"+js,mr="__reactContainer$"+js,qc="__reactEvents$"+js,e1="__reactListeners$"+js,t1="__reactHandles$"+js;function $i(n){var r=n[Wn];if(r)return r;for(var a=n.parentNode;a;){if(r=a[mr]||a[Wn]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(n=wp(n);n!==null;){if(a=n[Wn])return a;n=wp(n)}return r}n=a,a=n.parentNode}return null}function la(n){return n=n[Wn]||n[mr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Bs(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function Dl(n){return n[aa]||null}var Hc=[],zs=-1;function Qr(n){return{current:n}}function Qe(n){0>zs||(n.current=Hc[zs],Hc[zs]=null,zs--)}function He(n,r){zs++,Hc[zs]=n.current,n.current=r}var Xr={},Vt=Qr(Xr),Ht=Qr(!1),qi=Xr;function $s(n,r){var a=n.type.contextTypes;if(!a)return Xr;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===r)return c.__reactInternalMemoizedMaskedChildContext;var d={},p;for(p in a)d[p]=r[p];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=d),d}function Wt(n){return n=n.childContextTypes,n!=null}function Vl(){Qe(Ht),Qe(Vt)}function Ep(n,r,a){if(Vt.current!==Xr)throw Error(t(168));He(Vt,r),He(Ht,a)}function Tp(n,r,a){var c=n.stateNode;if(r=r.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var d in c)if(!(d in r))throw Error(t(108,Ie(n)||"Unknown",d));return j({},a,c)}function Ol(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Xr,qi=Vt.current,He(Vt,n),He(Ht,Ht.current),!0}function Ip(n,r,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=Tp(n,r,qi),c.__reactInternalMemoizedMergedChildContext=n,Qe(Ht),Qe(Vt),He(Vt,n)):Qe(Ht),He(Ht,a)}var gr=null,Ll=!1,Wc=!1;function Sp(n){gr===null?gr=[n]:gr.push(n)}function n1(n){Ll=!0,Sp(n)}function Yr(){if(!Wc&&gr!==null){Wc=!0;var n=0,r=Ve;try{var a=gr;for(Ve=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}gr=null,Ll=!1}catch(d){throw gr!==null&&(gr=gr.slice(n+1)),Uo(Is,Yr),d}finally{Ve=r,Wc=!1}}return null}var qs=[],Hs=0,Ml=null,bl=0,dn=[],fn=0,Hi=null,yr=1,_r="";function Wi(n,r){qs[Hs++]=bl,qs[Hs++]=Ml,Ml=n,bl=r}function Ap(n,r,a){dn[fn++]=yr,dn[fn++]=_r,dn[fn++]=Hi,Hi=n;var c=yr;n=_r;var d=32-en(c)-1;c&=~(1<<d),a+=1;var p=32-en(r)+d;if(30<p){var v=d-d%5;p=(c&(1<<v)-1).toString(32),c>>=v,d-=v,yr=1<<32-en(r)+d|a<<d|c,_r=p+n}else yr=1<<p|a<<d|c,_r=n}function Gc(n){n.return!==null&&(Wi(n,1),Ap(n,1,0))}function Kc(n){for(;n===Ml;)Ml=qs[--Hs],qs[Hs]=null,bl=qs[--Hs],qs[Hs]=null;for(;n===Hi;)Hi=dn[--fn],dn[fn]=null,_r=dn[--fn],dn[fn]=null,yr=dn[--fn],dn[fn]=null}var on=null,an=null,Ze=!1,Sn=null;function Rp(n,r){var a=yn(5,null,null,0);a.elementType="DELETED",a.stateNode=r,a.return=n,r=n.deletions,r===null?(n.deletions=[a],n.flags|=16):r.push(a)}function Cp(n,r){switch(n.tag){case 5:var a=n.type;return r=r.nodeType!==1||a.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(n.stateNode=r,on=n,an=Kr(r.firstChild),!0):!1;case 6:return r=n.pendingProps===""||r.nodeType!==3?null:r,r!==null?(n.stateNode=r,on=n,an=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(a=Hi!==null?{id:yr,overflow:_r}:null,n.memoizedState={dehydrated:r,treeContext:a,retryLane:1073741824},a=yn(18,null,null,0),a.stateNode=r,a.return=n,n.child=a,on=n,an=null,!0):!1;default:return!1}}function Qc(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Xc(n){if(Ze){var r=an;if(r){var a=r;if(!Cp(n,r)){if(Qc(n))throw Error(t(418));r=Kr(a.nextSibling);var c=on;r&&Cp(n,r)?Rp(c,a):(n.flags=n.flags&-4097|2,Ze=!1,on=n)}}else{if(Qc(n))throw Error(t(418));n.flags=n.flags&-4097|2,Ze=!1,on=n}}}function Pp(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;on=n}function Ul(n){if(n!==on)return!1;if(!Ze)return Pp(n),Ze=!0,!1;var r;if((r=n.tag!==3)&&!(r=n.tag!==5)&&(r=n.type,r=r!=="head"&&r!=="body"&&!Bc(n.type,n.memoizedProps)),r&&(r=an)){if(Qc(n))throw kp(),Error(t(418));for(;r;)Rp(n,r),r=Kr(r.nextSibling)}if(Pp(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,r=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(r===0){an=Kr(n.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++}n=n.nextSibling}an=null}}else an=on?Kr(n.stateNode.nextSibling):null;return!0}function kp(){for(var n=an;n;)n=Kr(n.nextSibling)}function Ws(){an=on=null,Ze=!1}function Yc(n){Sn===null?Sn=[n]:Sn.push(n)}var r1=Te.ReactCurrentBatchConfig;function ua(n,r,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var d=c,p=""+n;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===p?r.ref:(r=function(v){var S=d.refs;v===null?delete S[p]:S[p]=v},r._stringRef=p,r)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function Fl(n,r){throw n=Object.prototype.toString.call(r),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n))}function xp(n){var r=n._init;return r(n._payload)}function Np(n){function r(b,O){if(n){var F=b.deletions;F===null?(b.deletions=[O],b.flags|=16):F.push(O)}}function a(b,O){if(!n)return null;for(;O!==null;)r(b,O),O=O.sibling;return null}function c(b,O){for(b=new Map;O!==null;)O.key!==null?b.set(O.key,O):b.set(O.index,O),O=O.sibling;return b}function d(b,O){return b=si(b,O),b.index=0,b.sibling=null,b}function p(b,O,F){return b.index=F,n?(F=b.alternate,F!==null?(F=F.index,F<O?(b.flags|=2,O):F):(b.flags|=2,O)):(b.flags|=1048576,O)}function v(b){return n&&b.alternate===null&&(b.flags|=2),b}function S(b,O,F,J){return O===null||O.tag!==6?(O=zh(F,b.mode,J),O.return=b,O):(O=d(O,F),O.return=b,O)}function P(b,O,F,J){var he=F.type;return he===k?X(b,O,F.props.children,J,F.key):O!==null&&(O.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===rt&&xp(he)===O.type)?(J=d(O,F.props),J.ref=ua(b,O,F),J.return=b,J):(J=uu(F.type,F.key,F.props,null,b.mode,J),J.ref=ua(b,O,F),J.return=b,J)}function B(b,O,F,J){return O===null||O.tag!==4||O.stateNode.containerInfo!==F.containerInfo||O.stateNode.implementation!==F.implementation?(O=$h(F,b.mode,J),O.return=b,O):(O=d(O,F.children||[]),O.return=b,O)}function X(b,O,F,J,he){return O===null||O.tag!==7?(O=es(F,b.mode,J,he),O.return=b,O):(O=d(O,F),O.return=b,O)}function Y(b,O,F){if(typeof O=="string"&&O!==""||typeof O=="number")return O=zh(""+O,b.mode,F),O.return=b,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case De:return F=uu(O.type,O.key,O.props,null,b.mode,F),F.ref=ua(b,null,O),F.return=b,F;case Ce:return O=$h(O,b.mode,F),O.return=b,O;case rt:var J=O._init;return Y(b,J(O._payload),F)}if(ot(O)||de(O))return O=es(O,b.mode,F,null),O.return=b,O;Fl(b,O)}return null}function Q(b,O,F,J){var he=O!==null?O.key:null;if(typeof F=="string"&&F!==""||typeof F=="number")return he!==null?null:S(b,O,""+F,J);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case De:return F.key===he?P(b,O,F,J):null;case Ce:return F.key===he?B(b,O,F,J):null;case rt:return he=F._init,Q(b,O,he(F._payload),J)}if(ot(F)||de(F))return he!==null?null:X(b,O,F,J,null);Fl(b,F)}return null}function ne(b,O,F,J,he){if(typeof J=="string"&&J!==""||typeof J=="number")return b=b.get(F)||null,S(O,b,""+J,he);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case De:return b=b.get(J.key===null?F:J.key)||null,P(O,b,J,he);case Ce:return b=b.get(J.key===null?F:J.key)||null,B(O,b,J,he);case rt:var me=J._init;return ne(b,O,F,me(J._payload),he)}if(ot(J)||de(J))return b=b.get(F)||null,X(O,b,J,he,null);Fl(O,J)}return null}function ae(b,O,F,J){for(var he=null,me=null,ge=O,we=O=0,Tt=null;ge!==null&&we<F.length;we++){ge.index>we?(Tt=ge,ge=null):Tt=ge.sibling;var Ue=Q(b,ge,F[we],J);if(Ue===null){ge===null&&(ge=Tt);break}n&&ge&&Ue.alternate===null&&r(b,ge),O=p(Ue,O,we),me===null?he=Ue:me.sibling=Ue,me=Ue,ge=Tt}if(we===F.length)return a(b,ge),Ze&&Wi(b,we),he;if(ge===null){for(;we<F.length;we++)ge=Y(b,F[we],J),ge!==null&&(O=p(ge,O,we),me===null?he=ge:me.sibling=ge,me=ge);return Ze&&Wi(b,we),he}for(ge=c(b,ge);we<F.length;we++)Tt=ne(ge,b,we,F[we],J),Tt!==null&&(n&&Tt.alternate!==null&&ge.delete(Tt.key===null?we:Tt.key),O=p(Tt,O,we),me===null?he=Tt:me.sibling=Tt,me=Tt);return n&&ge.forEach(function(oi){return r(b,oi)}),Ze&&Wi(b,we),he}function ue(b,O,F,J){var he=de(F);if(typeof he!="function")throw Error(t(150));if(F=he.call(F),F==null)throw Error(t(151));for(var me=he=null,ge=O,we=O=0,Tt=null,Ue=F.next();ge!==null&&!Ue.done;we++,Ue=F.next()){ge.index>we?(Tt=ge,ge=null):Tt=ge.sibling;var oi=Q(b,ge,Ue.value,J);if(oi===null){ge===null&&(ge=Tt);break}n&&ge&&oi.alternate===null&&r(b,ge),O=p(oi,O,we),me===null?he=oi:me.sibling=oi,me=oi,ge=Tt}if(Ue.done)return a(b,ge),Ze&&Wi(b,we),he;if(ge===null){for(;!Ue.done;we++,Ue=F.next())Ue=Y(b,Ue.value,J),Ue!==null&&(O=p(Ue,O,we),me===null?he=Ue:me.sibling=Ue,me=Ue);return Ze&&Wi(b,we),he}for(ge=c(b,ge);!Ue.done;we++,Ue=F.next())Ue=ne(ge,b,we,Ue.value,J),Ue!==null&&(n&&Ue.alternate!==null&&ge.delete(Ue.key===null?we:Ue.key),O=p(Ue,O,we),me===null?he=Ue:me.sibling=Ue,me=Ue);return n&&ge.forEach(function(M1){return r(b,M1)}),Ze&&Wi(b,we),he}function lt(b,O,F,J){if(typeof F=="object"&&F!==null&&F.type===k&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case De:e:{for(var he=F.key,me=O;me!==null;){if(me.key===he){if(he=F.type,he===k){if(me.tag===7){a(b,me.sibling),O=d(me,F.props.children),O.return=b,b=O;break e}}else if(me.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===rt&&xp(he)===me.type){a(b,me.sibling),O=d(me,F.props),O.ref=ua(b,me,F),O.return=b,b=O;break e}a(b,me);break}else r(b,me);me=me.sibling}F.type===k?(O=es(F.props.children,b.mode,J,F.key),O.return=b,b=O):(J=uu(F.type,F.key,F.props,null,b.mode,J),J.ref=ua(b,O,F),J.return=b,b=J)}return v(b);case Ce:e:{for(me=F.key;O!==null;){if(O.key===me)if(O.tag===4&&O.stateNode.containerInfo===F.containerInfo&&O.stateNode.implementation===F.implementation){a(b,O.sibling),O=d(O,F.children||[]),O.return=b,b=O;break e}else{a(b,O);break}else r(b,O);O=O.sibling}O=$h(F,b.mode,J),O.return=b,b=O}return v(b);case rt:return me=F._init,lt(b,O,me(F._payload),J)}if(ot(F))return ae(b,O,F,J);if(de(F))return ue(b,O,F,J);Fl(b,F)}return typeof F=="string"&&F!==""||typeof F=="number"?(F=""+F,O!==null&&O.tag===6?(a(b,O.sibling),O=d(O,F),O.return=b,b=O):(a(b,O),O=zh(F,b.mode,J),O.return=b,b=O),v(b)):a(b,O)}return lt}var Gs=Np(!0),Dp=Np(!1),jl=Qr(null),Bl=null,Ks=null,Jc=null;function Zc(){Jc=Ks=Bl=null}function eh(n){var r=jl.current;Qe(jl),n._currentValue=r}function th(n,r,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),n===a)break;n=n.return}}function Qs(n,r){Bl=n,Jc=Ks=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&r)!==0&&(Gt=!0),n.firstContext=null)}function pn(n){var r=n._currentValue;if(Jc!==n)if(n={context:n,memoizedValue:r,next:null},Ks===null){if(Bl===null)throw Error(t(308));Ks=n,Bl.dependencies={lanes:0,firstContext:n}}else Ks=Ks.next=n;return r}var Gi=null;function nh(n){Gi===null?Gi=[n]:Gi.push(n)}function Vp(n,r,a,c){var d=r.interleaved;return d===null?(a.next=a,nh(r)):(a.next=d.next,d.next=a),r.interleaved=a,vr(n,c)}function vr(n,r){n.lanes|=r;var a=n.alternate;for(a!==null&&(a.lanes|=r),a=n,n=n.return;n!==null;)n.childLanes|=r,a=n.alternate,a!==null&&(a.childLanes|=r),a=n,n=n.return;return a.tag===3?a.stateNode:null}var Jr=!1;function rh(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Op(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function wr(n,r){return{eventTime:n,lane:r,tag:0,payload:null,callback:null,next:null}}function Zr(n,r,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(be&2)!==0){var d=c.pending;return d===null?r.next=r:(r.next=d.next,d.next=r),c.pending=r,vr(n,a)}return d=c.interleaved,d===null?(r.next=r,nh(c)):(r.next=d.next,d.next=r),c.interleaved=r,vr(n,a)}function zl(n,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194240)!==0)){var c=r.lanes;c&=n.pendingLanes,a|=c,r.lanes=a,qo(n,a)}}function Lp(n,r){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var d=null,p=null;if(a=a.firstBaseUpdate,a!==null){do{var v={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};p===null?d=p=v:p=p.next=v,a=a.next}while(a!==null);p===null?d=p=r:p=p.next=r}else d=p=r;a={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:p,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=r:n.next=r,a.lastBaseUpdate=r}function $l(n,r,a,c){var d=n.updateQueue;Jr=!1;var p=d.firstBaseUpdate,v=d.lastBaseUpdate,S=d.shared.pending;if(S!==null){d.shared.pending=null;var P=S,B=P.next;P.next=null,v===null?p=B:v.next=B,v=P;var X=n.alternate;X!==null&&(X=X.updateQueue,S=X.lastBaseUpdate,S!==v&&(S===null?X.firstBaseUpdate=B:S.next=B,X.lastBaseUpdate=P))}if(p!==null){var Y=d.baseState;v=0,X=B=P=null,S=p;do{var Q=S.lane,ne=S.eventTime;if((c&Q)===Q){X!==null&&(X=X.next={eventTime:ne,lane:0,tag:S.tag,payload:S.payload,callback:S.callback,next:null});e:{var ae=n,ue=S;switch(Q=r,ne=a,ue.tag){case 1:if(ae=ue.payload,typeof ae=="function"){Y=ae.call(ne,Y,Q);break e}Y=ae;break e;case 3:ae.flags=ae.flags&-65537|128;case 0:if(ae=ue.payload,Q=typeof ae=="function"?ae.call(ne,Y,Q):ae,Q==null)break e;Y=j({},Y,Q);break e;case 2:Jr=!0}}S.callback!==null&&S.lane!==0&&(n.flags|=64,Q=d.effects,Q===null?d.effects=[S]:Q.push(S))}else ne={eventTime:ne,lane:Q,tag:S.tag,payload:S.payload,callback:S.callback,next:null},X===null?(B=X=ne,P=Y):X=X.next=ne,v|=Q;if(S=S.next,S===null){if(S=d.shared.pending,S===null)break;Q=S,S=Q.next,Q.next=null,d.lastBaseUpdate=Q,d.shared.pending=null}}while(!0);if(X===null&&(P=Y),d.baseState=P,d.firstBaseUpdate=B,d.lastBaseUpdate=X,r=d.shared.interleaved,r!==null){d=r;do v|=d.lane,d=d.next;while(d!==r)}else p===null&&(d.shared.lanes=0);Xi|=v,n.lanes=v,n.memoizedState=Y}}function Mp(n,r,a){if(n=r.effects,r.effects=null,n!==null)for(r=0;r<n.length;r++){var c=n[r],d=c.callback;if(d!==null){if(c.callback=null,c=a,typeof d!="function")throw Error(t(191,d));d.call(c)}}}var ca={},Gn=Qr(ca),ha=Qr(ca),da=Qr(ca);function Ki(n){if(n===ca)throw Error(t(174));return n}function ih(n,r){switch(He(da,r),He(ha,n),He(Gn,ca),n=r.nodeType,n){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:ys(null,"");break;default:n=n===8?r.parentNode:r,r=n.namespaceURI||null,n=n.tagName,r=ys(r,n)}Qe(Gn),He(Gn,r)}function Xs(){Qe(Gn),Qe(ha),Qe(da)}function bp(n){Ki(da.current);var r=Ki(Gn.current),a=ys(r,n.type);r!==a&&(He(ha,n),He(Gn,a))}function sh(n){ha.current===n&&(Qe(Gn),Qe(ha))}var et=Qr(0);function ql(n){for(var r=n;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var oh=[];function ah(){for(var n=0;n<oh.length;n++)oh[n]._workInProgressVersionPrimary=null;oh.length=0}var Hl=Te.ReactCurrentDispatcher,lh=Te.ReactCurrentBatchConfig,Qi=0,tt=null,yt=null,wt=null,Wl=!1,fa=!1,pa=0,i1=0;function Ot(){throw Error(t(321))}function uh(n,r){if(r===null)return!1;for(var a=0;a<r.length&&a<n.length;a++)if(!In(n[a],r[a]))return!1;return!0}function ch(n,r,a,c,d,p){if(Qi=p,tt=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Hl.current=n===null||n.memoizedState===null?l1:u1,n=a(c,d),fa){p=0;do{if(fa=!1,pa=0,25<=p)throw Error(t(301));p+=1,wt=yt=null,r.updateQueue=null,Hl.current=c1,n=a(c,d)}while(fa)}if(Hl.current=Ql,r=yt!==null&&yt.next!==null,Qi=0,wt=yt=tt=null,Wl=!1,r)throw Error(t(300));return n}function hh(){var n=pa!==0;return pa=0,n}function Kn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wt===null?tt.memoizedState=wt=n:wt=wt.next=n,wt}function mn(){if(yt===null){var n=tt.alternate;n=n!==null?n.memoizedState:null}else n=yt.next;var r=wt===null?tt.memoizedState:wt.next;if(r!==null)wt=r,yt=n;else{if(n===null)throw Error(t(310));yt=n,n={memoizedState:yt.memoizedState,baseState:yt.baseState,baseQueue:yt.baseQueue,queue:yt.queue,next:null},wt===null?tt.memoizedState=wt=n:wt=wt.next=n}return wt}function ma(n,r){return typeof r=="function"?r(n):r}function dh(n){var r=mn(),a=r.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=yt,d=c.baseQueue,p=a.pending;if(p!==null){if(d!==null){var v=d.next;d.next=p.next,p.next=v}c.baseQueue=d=p,a.pending=null}if(d!==null){p=d.next,c=c.baseState;var S=v=null,P=null,B=p;do{var X=B.lane;if((Qi&X)===X)P!==null&&(P=P.next={lane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),c=B.hasEagerState?B.eagerState:n(c,B.action);else{var Y={lane:X,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null};P===null?(S=P=Y,v=c):P=P.next=Y,tt.lanes|=X,Xi|=X}B=B.next}while(B!==null&&B!==p);P===null?v=c:P.next=S,In(c,r.memoizedState)||(Gt=!0),r.memoizedState=c,r.baseState=v,r.baseQueue=P,a.lastRenderedState=c}if(n=a.interleaved,n!==null){d=n;do p=d.lane,tt.lanes|=p,Xi|=p,d=d.next;while(d!==n)}else d===null&&(a.lanes=0);return[r.memoizedState,a.dispatch]}function fh(n){var r=mn(),a=r.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,d=a.pending,p=r.memoizedState;if(d!==null){a.pending=null;var v=d=d.next;do p=n(p,v.action),v=v.next;while(v!==d);In(p,r.memoizedState)||(Gt=!0),r.memoizedState=p,r.baseQueue===null&&(r.baseState=p),a.lastRenderedState=p}return[p,c]}function Up(){}function Fp(n,r){var a=tt,c=mn(),d=r(),p=!In(c.memoizedState,d);if(p&&(c.memoizedState=d,Gt=!0),c=c.queue,ph(zp.bind(null,a,c,n),[n]),c.getSnapshot!==r||p||wt!==null&&wt.memoizedState.tag&1){if(a.flags|=2048,ga(9,Bp.bind(null,a,c,d,r),void 0,null),Et===null)throw Error(t(349));(Qi&30)!==0||jp(a,r,d)}return d}function jp(n,r,a){n.flags|=16384,n={getSnapshot:r,value:a},r=tt.updateQueue,r===null?(r={lastEffect:null,stores:null},tt.updateQueue=r,r.stores=[n]):(a=r.stores,a===null?r.stores=[n]:a.push(n))}function Bp(n,r,a,c){r.value=a,r.getSnapshot=c,$p(r)&&qp(n)}function zp(n,r,a){return a(function(){$p(r)&&qp(n)})}function $p(n){var r=n.getSnapshot;n=n.value;try{var a=r();return!In(n,a)}catch{return!0}}function qp(n){var r=vr(n,1);r!==null&&Pn(r,n,1,-1)}function Hp(n){var r=Kn();return typeof n=="function"&&(n=n()),r.memoizedState=r.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ma,lastRenderedState:n},r.queue=n,n=n.dispatch=a1.bind(null,tt,n),[r.memoizedState,n]}function ga(n,r,a,c){return n={tag:n,create:r,destroy:a,deps:c,next:null},r=tt.updateQueue,r===null?(r={lastEffect:null,stores:null},tt.updateQueue=r,r.lastEffect=n.next=n):(a=r.lastEffect,a===null?r.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,r.lastEffect=n)),n}function Wp(){return mn().memoizedState}function Gl(n,r,a,c){var d=Kn();tt.flags|=n,d.memoizedState=ga(1|r,a,void 0,c===void 0?null:c)}function Kl(n,r,a,c){var d=mn();c=c===void 0?null:c;var p=void 0;if(yt!==null){var v=yt.memoizedState;if(p=v.destroy,c!==null&&uh(c,v.deps)){d.memoizedState=ga(r,a,p,c);return}}tt.flags|=n,d.memoizedState=ga(1|r,a,p,c)}function Gp(n,r){return Gl(8390656,8,n,r)}function ph(n,r){return Kl(2048,8,n,r)}function Kp(n,r){return Kl(4,2,n,r)}function Qp(n,r){return Kl(4,4,n,r)}function Xp(n,r){if(typeof r=="function")return n=n(),r(n),function(){r(null)};if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function Yp(n,r,a){return a=a!=null?a.concat([n]):null,Kl(4,4,Xp.bind(null,r,n),a)}function mh(){}function Jp(n,r){var a=mn();r=r===void 0?null:r;var c=a.memoizedState;return c!==null&&r!==null&&uh(r,c[1])?c[0]:(a.memoizedState=[n,r],n)}function Zp(n,r){var a=mn();r=r===void 0?null:r;var c=a.memoizedState;return c!==null&&r!==null&&uh(r,c[1])?c[0]:(n=n(),a.memoizedState=[n,r],n)}function em(n,r,a){return(Qi&21)===0?(n.baseState&&(n.baseState=!1,Gt=!0),n.memoizedState=a):(In(a,r)||(a=zo(),tt.lanes|=a,Xi|=a,n.baseState=!0),r)}function s1(n,r){var a=Ve;Ve=a!==0&&4>a?a:4,n(!0);var c=lh.transition;lh.transition={};try{n(!1),r()}finally{Ve=a,lh.transition=c}}function tm(){return mn().memoizedState}function o1(n,r,a){var c=ri(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},nm(n))rm(r,a);else if(a=Vp(n,r,a,c),a!==null){var d=qt();Pn(a,n,c,d),im(a,r,c)}}function a1(n,r,a){var c=ri(n),d={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(nm(n))rm(r,d);else{var p=n.alternate;if(n.lanes===0&&(p===null||p.lanes===0)&&(p=r.lastRenderedReducer,p!==null))try{var v=r.lastRenderedState,S=p(v,a);if(d.hasEagerState=!0,d.eagerState=S,In(S,v)){var P=r.interleaved;P===null?(d.next=d,nh(r)):(d.next=P.next,P.next=d),r.interleaved=d;return}}catch{}finally{}a=Vp(n,r,d,c),a!==null&&(d=qt(),Pn(a,n,c,d),im(a,r,c))}}function nm(n){var r=n.alternate;return n===tt||r!==null&&r===tt}function rm(n,r){fa=Wl=!0;var a=n.pending;a===null?r.next=r:(r.next=a.next,a.next=r),n.pending=r}function im(n,r,a){if((a&4194240)!==0){var c=r.lanes;c&=n.pendingLanes,a|=c,r.lanes=a,qo(n,a)}}var Ql={readContext:pn,useCallback:Ot,useContext:Ot,useEffect:Ot,useImperativeHandle:Ot,useInsertionEffect:Ot,useLayoutEffect:Ot,useMemo:Ot,useReducer:Ot,useRef:Ot,useState:Ot,useDebugValue:Ot,useDeferredValue:Ot,useTransition:Ot,useMutableSource:Ot,useSyncExternalStore:Ot,useId:Ot,unstable_isNewReconciler:!1},l1={readContext:pn,useCallback:function(n,r){return Kn().memoizedState=[n,r===void 0?null:r],n},useContext:pn,useEffect:Gp,useImperativeHandle:function(n,r,a){return a=a!=null?a.concat([n]):null,Gl(4194308,4,Xp.bind(null,r,n),a)},useLayoutEffect:function(n,r){return Gl(4194308,4,n,r)},useInsertionEffect:function(n,r){return Gl(4,2,n,r)},useMemo:function(n,r){var a=Kn();return r=r===void 0?null:r,n=n(),a.memoizedState=[n,r],n},useReducer:function(n,r,a){var c=Kn();return r=a!==void 0?a(r):r,c.memoizedState=c.baseState=r,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:r},c.queue=n,n=n.dispatch=o1.bind(null,tt,n),[c.memoizedState,n]},useRef:function(n){var r=Kn();return n={current:n},r.memoizedState=n},useState:Hp,useDebugValue:mh,useDeferredValue:function(n){return Kn().memoizedState=n},useTransition:function(){var n=Hp(!1),r=n[0];return n=s1.bind(null,n[1]),Kn().memoizedState=n,[r,n]},useMutableSource:function(){},useSyncExternalStore:function(n,r,a){var c=tt,d=Kn();if(Ze){if(a===void 0)throw Error(t(407));a=a()}else{if(a=r(),Et===null)throw Error(t(349));(Qi&30)!==0||jp(c,r,a)}d.memoizedState=a;var p={value:a,getSnapshot:r};return d.queue=p,Gp(zp.bind(null,c,p,n),[n]),c.flags|=2048,ga(9,Bp.bind(null,c,p,a,r),void 0,null),a},useId:function(){var n=Kn(),r=Et.identifierPrefix;if(Ze){var a=_r,c=yr;a=(c&~(1<<32-en(c)-1)).toString(32)+a,r=":"+r+"R"+a,a=pa++,0<a&&(r+="H"+a.toString(32)),r+=":"}else a=i1++,r=":"+r+"r"+a.toString(32)+":";return n.memoizedState=r},unstable_isNewReconciler:!1},u1={readContext:pn,useCallback:Jp,useContext:pn,useEffect:ph,useImperativeHandle:Yp,useInsertionEffect:Kp,useLayoutEffect:Qp,useMemo:Zp,useReducer:dh,useRef:Wp,useState:function(){return dh(ma)},useDebugValue:mh,useDeferredValue:function(n){var r=mn();return em(r,yt.memoizedState,n)},useTransition:function(){var n=dh(ma)[0],r=mn().memoizedState;return[n,r]},useMutableSource:Up,useSyncExternalStore:Fp,useId:tm,unstable_isNewReconciler:!1},c1={readContext:pn,useCallback:Jp,useContext:pn,useEffect:ph,useImperativeHandle:Yp,useInsertionEffect:Kp,useLayoutEffect:Qp,useMemo:Zp,useReducer:fh,useRef:Wp,useState:function(){return fh(ma)},useDebugValue:mh,useDeferredValue:function(n){var r=mn();return yt===null?r.memoizedState=n:em(r,yt.memoizedState,n)},useTransition:function(){var n=fh(ma)[0],r=mn().memoizedState;return[n,r]},useMutableSource:Up,useSyncExternalStore:Fp,useId:tm,unstable_isNewReconciler:!1};function An(n,r){if(n&&n.defaultProps){r=j({},r),n=n.defaultProps;for(var a in n)r[a]===void 0&&(r[a]=n[a]);return r}return r}function gh(n,r,a,c){r=n.memoizedState,a=a(c,r),a=a==null?r:j({},r,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Xl={isMounted:function(n){return(n=n._reactInternals)?En(n)===n:!1},enqueueSetState:function(n,r,a){n=n._reactInternals;var c=qt(),d=ri(n),p=wr(c,d);p.payload=r,a!=null&&(p.callback=a),r=Zr(n,p,d),r!==null&&(Pn(r,n,d,c),zl(r,n,d))},enqueueReplaceState:function(n,r,a){n=n._reactInternals;var c=qt(),d=ri(n),p=wr(c,d);p.tag=1,p.payload=r,a!=null&&(p.callback=a),r=Zr(n,p,d),r!==null&&(Pn(r,n,d,c),zl(r,n,d))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var a=qt(),c=ri(n),d=wr(a,c);d.tag=2,r!=null&&(d.callback=r),r=Zr(n,d,c),r!==null&&(Pn(r,n,c,a),zl(r,n,c))}};function sm(n,r,a,c,d,p,v){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,p,v):r.prototype&&r.prototype.isPureReactComponent?!na(a,c)||!na(d,p):!0}function om(n,r,a){var c=!1,d=Xr,p=r.contextType;return typeof p=="object"&&p!==null?p=pn(p):(d=Wt(r)?qi:Vt.current,c=r.contextTypes,p=(c=c!=null)?$s(n,d):Xr),r=new r(a,p),n.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Xl,n.stateNode=r,r._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=d,n.__reactInternalMemoizedMaskedChildContext=p),r}function am(n,r,a,c){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,c),r.state!==n&&Xl.enqueueReplaceState(r,r.state,null)}function yh(n,r,a,c){var d=n.stateNode;d.props=a,d.state=n.memoizedState,d.refs={},rh(n);var p=r.contextType;typeof p=="object"&&p!==null?d.context=pn(p):(p=Wt(r)?qi:Vt.current,d.context=$s(n,p)),d.state=n.memoizedState,p=r.getDerivedStateFromProps,typeof p=="function"&&(gh(n,r,p,a),d.state=n.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(r=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),r!==d.state&&Xl.enqueueReplaceState(d,d.state,null),$l(n,a,d,c),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308)}function Ys(n,r){try{var a="",c=r;do a+=_e(c),c=c.return;while(c);var d=a}catch(p){d=`
Error generating stack: `+p.message+`
`+p.stack}return{value:n,source:r,stack:d,digest:null}}function _h(n,r,a){return{value:n,source:null,stack:a??null,digest:r??null}}function vh(n,r){try{console.error(r.value)}catch(a){setTimeout(function(){throw a})}}var h1=typeof WeakMap=="function"?WeakMap:Map;function lm(n,r,a){a=wr(-1,a),a.tag=3,a.payload={element:null};var c=r.value;return a.callback=function(){ru||(ru=!0,Oh=c),vh(n,r)},a}function um(n,r,a){a=wr(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var d=r.value;a.payload=function(){return c(d)},a.callback=function(){vh(n,r)}}var p=n.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(a.callback=function(){vh(n,r),typeof c!="function"&&(ti===null?ti=new Set([this]):ti.add(this));var v=r.stack;this.componentDidCatch(r.value,{componentStack:v!==null?v:""})}),a}function cm(n,r,a){var c=n.pingCache;if(c===null){c=n.pingCache=new h1;var d=new Set;c.set(r,d)}else d=c.get(r),d===void 0&&(d=new Set,c.set(r,d));d.has(a)||(d.add(a),n=A1.bind(null,n,r,a),r.then(n,n))}function hm(n){do{var r;if((r=n.tag===13)&&(r=n.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return n;n=n.return}while(n!==null);return null}function dm(n,r,a,c,d){return(n.mode&1)===0?(n===r?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(r=wr(-1,1),r.tag=2,Zr(a,r,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=d,n)}var d1=Te.ReactCurrentOwner,Gt=!1;function $t(n,r,a,c){r.child=n===null?Dp(r,null,a,c):Gs(r,n.child,a,c)}function fm(n,r,a,c,d){a=a.render;var p=r.ref;return Qs(r,d),c=ch(n,r,a,c,p,d),a=hh(),n!==null&&!Gt?(r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~d,Er(n,r,d)):(Ze&&a&&Gc(r),r.flags|=1,$t(n,r,c,d),r.child)}function pm(n,r,a,c,d){if(n===null){var p=a.type;return typeof p=="function"&&!Bh(p)&&p.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(r.tag=15,r.type=p,mm(n,r,p,c,d)):(n=uu(a.type,null,c,r,r.mode,d),n.ref=r.ref,n.return=r,r.child=n)}if(p=n.child,(n.lanes&d)===0){var v=p.memoizedProps;if(a=a.compare,a=a!==null?a:na,a(v,c)&&n.ref===r.ref)return Er(n,r,d)}return r.flags|=1,n=si(p,c),n.ref=r.ref,n.return=r,r.child=n}function mm(n,r,a,c,d){if(n!==null){var p=n.memoizedProps;if(na(p,c)&&n.ref===r.ref)if(Gt=!1,r.pendingProps=c=p,(n.lanes&d)!==0)(n.flags&131072)!==0&&(Gt=!0);else return r.lanes=n.lanes,Er(n,r,d)}return wh(n,r,a,c,d)}function gm(n,r,a){var c=r.pendingProps,d=c.children,p=n!==null?n.memoizedState:null;if(c.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},He(Zs,ln),ln|=a;else{if((a&1073741824)===0)return n=p!==null?p.baseLanes|a:a,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:n,cachePool:null,transitions:null},r.updateQueue=null,He(Zs,ln),ln|=n,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=p!==null?p.baseLanes:a,He(Zs,ln),ln|=c}else p!==null?(c=p.baseLanes|a,r.memoizedState=null):c=a,He(Zs,ln),ln|=c;return $t(n,r,d,a),r.child}function ym(n,r){var a=r.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(r.flags|=512,r.flags|=2097152)}function wh(n,r,a,c,d){var p=Wt(a)?qi:Vt.current;return p=$s(r,p),Qs(r,d),a=ch(n,r,a,c,p,d),c=hh(),n!==null&&!Gt?(r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~d,Er(n,r,d)):(Ze&&c&&Gc(r),r.flags|=1,$t(n,r,a,d),r.child)}function _m(n,r,a,c,d){if(Wt(a)){var p=!0;Ol(r)}else p=!1;if(Qs(r,d),r.stateNode===null)Jl(n,r),om(r,a,c),yh(r,a,c,d),c=!0;else if(n===null){var v=r.stateNode,S=r.memoizedProps;v.props=S;var P=v.context,B=a.contextType;typeof B=="object"&&B!==null?B=pn(B):(B=Wt(a)?qi:Vt.current,B=$s(r,B));var X=a.getDerivedStateFromProps,Y=typeof X=="function"||typeof v.getSnapshotBeforeUpdate=="function";Y||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(S!==c||P!==B)&&am(r,v,c,B),Jr=!1;var Q=r.memoizedState;v.state=Q,$l(r,c,v,d),P=r.memoizedState,S!==c||Q!==P||Ht.current||Jr?(typeof X=="function"&&(gh(r,a,X,c),P=r.memoizedState),(S=Jr||sm(r,a,S,c,Q,P,B))?(Y||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(r.flags|=4194308)):(typeof v.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=P),v.props=c,v.state=P,v.context=B,c=S):(typeof v.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{v=r.stateNode,Op(n,r),S=r.memoizedProps,B=r.type===r.elementType?S:An(r.type,S),v.props=B,Y=r.pendingProps,Q=v.context,P=a.contextType,typeof P=="object"&&P!==null?P=pn(P):(P=Wt(a)?qi:Vt.current,P=$s(r,P));var ne=a.getDerivedStateFromProps;(X=typeof ne=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(S!==Y||Q!==P)&&am(r,v,c,P),Jr=!1,Q=r.memoizedState,v.state=Q,$l(r,c,v,d);var ae=r.memoizedState;S!==Y||Q!==ae||Ht.current||Jr?(typeof ne=="function"&&(gh(r,a,ne,c),ae=r.memoizedState),(B=Jr||sm(r,a,B,c,Q,ae,P)||!1)?(X||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(c,ae,P),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(c,ae,P)),typeof v.componentDidUpdate=="function"&&(r.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof v.componentDidUpdate!="function"||S===n.memoizedProps&&Q===n.memoizedState||(r.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&Q===n.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=ae),v.props=c,v.state=ae,v.context=P,c=B):(typeof v.componentDidUpdate!="function"||S===n.memoizedProps&&Q===n.memoizedState||(r.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&Q===n.memoizedState||(r.flags|=1024),c=!1)}return Eh(n,r,a,c,p,d)}function Eh(n,r,a,c,d,p){ym(n,r);var v=(r.flags&128)!==0;if(!c&&!v)return d&&Ip(r,a,!1),Er(n,r,p);c=r.stateNode,d1.current=r;var S=v&&typeof a.getDerivedStateFromError!="function"?null:c.render();return r.flags|=1,n!==null&&v?(r.child=Gs(r,n.child,null,p),r.child=Gs(r,null,S,p)):$t(n,r,S,p),r.memoizedState=c.state,d&&Ip(r,a,!0),r.child}function vm(n){var r=n.stateNode;r.pendingContext?Ep(n,r.pendingContext,r.pendingContext!==r.context):r.context&&Ep(n,r.context,!1),ih(n,r.containerInfo)}function wm(n,r,a,c,d){return Ws(),Yc(d),r.flags|=256,$t(n,r,a,c),r.child}var Th={dehydrated:null,treeContext:null,retryLane:0};function Ih(n){return{baseLanes:n,cachePool:null,transitions:null}}function Em(n,r,a){var c=r.pendingProps,d=et.current,p=!1,v=(r.flags&128)!==0,S;if((S=v)||(S=n!==null&&n.memoizedState===null?!1:(d&2)!==0),S?(p=!0,r.flags&=-129):(n===null||n.memoizedState!==null)&&(d|=1),He(et,d&1),n===null)return Xc(r),n=r.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((r.mode&1)===0?r.lanes=1:n.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(v=c.children,n=c.fallback,p?(c=r.mode,p=r.child,v={mode:"hidden",children:v},(c&1)===0&&p!==null?(p.childLanes=0,p.pendingProps=v):p=cu(v,c,0,null),n=es(n,c,a,null),p.return=r,n.return=r,p.sibling=n,r.child=p,r.child.memoizedState=Ih(a),r.memoizedState=Th,n):Sh(r,v));if(d=n.memoizedState,d!==null&&(S=d.dehydrated,S!==null))return f1(n,r,v,c,S,d,a);if(p){p=c.fallback,v=r.mode,d=n.child,S=d.sibling;var P={mode:"hidden",children:c.children};return(v&1)===0&&r.child!==d?(c=r.child,c.childLanes=0,c.pendingProps=P,r.deletions=null):(c=si(d,P),c.subtreeFlags=d.subtreeFlags&14680064),S!==null?p=si(S,p):(p=es(p,v,a,null),p.flags|=2),p.return=r,c.return=r,c.sibling=p,r.child=c,c=p,p=r.child,v=n.child.memoizedState,v=v===null?Ih(a):{baseLanes:v.baseLanes|a,cachePool:null,transitions:v.transitions},p.memoizedState=v,p.childLanes=n.childLanes&~a,r.memoizedState=Th,c}return p=n.child,n=p.sibling,c=si(p,{mode:"visible",children:c.children}),(r.mode&1)===0&&(c.lanes=a),c.return=r,c.sibling=null,n!==null&&(a=r.deletions,a===null?(r.deletions=[n],r.flags|=16):a.push(n)),r.child=c,r.memoizedState=null,c}function Sh(n,r){return r=cu({mode:"visible",children:r},n.mode,0,null),r.return=n,n.child=r}function Yl(n,r,a,c){return c!==null&&Yc(c),Gs(r,n.child,null,a),n=Sh(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function f1(n,r,a,c,d,p,v){if(a)return r.flags&256?(r.flags&=-257,c=_h(Error(t(422))),Yl(n,r,v,c)):r.memoizedState!==null?(r.child=n.child,r.flags|=128,null):(p=c.fallback,d=r.mode,c=cu({mode:"visible",children:c.children},d,0,null),p=es(p,d,v,null),p.flags|=2,c.return=r,p.return=r,c.sibling=p,r.child=c,(r.mode&1)!==0&&Gs(r,n.child,null,v),r.child.memoizedState=Ih(v),r.memoizedState=Th,p);if((r.mode&1)===0)return Yl(n,r,v,null);if(d.data==="$!"){if(c=d.nextSibling&&d.nextSibling.dataset,c)var S=c.dgst;return c=S,p=Error(t(419)),c=_h(p,c,void 0),Yl(n,r,v,c)}if(S=(v&n.childLanes)!==0,Gt||S){if(c=Et,c!==null){switch(v&-v){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(c.suspendedLanes|v))!==0?0:d,d!==0&&d!==p.retryLane&&(p.retryLane=d,vr(n,d),Pn(c,n,d,-1))}return jh(),c=_h(Error(t(421))),Yl(n,r,v,c)}return d.data==="$?"?(r.flags|=128,r.child=n.child,r=R1.bind(null,n),d._reactRetry=r,null):(n=p.treeContext,an=Kr(d.nextSibling),on=r,Ze=!0,Sn=null,n!==null&&(dn[fn++]=yr,dn[fn++]=_r,dn[fn++]=Hi,yr=n.id,_r=n.overflow,Hi=r),r=Sh(r,c.children),r.flags|=4096,r)}function Tm(n,r,a){n.lanes|=r;var c=n.alternate;c!==null&&(c.lanes|=r),th(n.return,r,a)}function Ah(n,r,a,c,d){var p=n.memoizedState;p===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:d}:(p.isBackwards=r,p.rendering=null,p.renderingStartTime=0,p.last=c,p.tail=a,p.tailMode=d)}function Im(n,r,a){var c=r.pendingProps,d=c.revealOrder,p=c.tail;if($t(n,r,c.children,a),c=et.current,(c&2)!==0)c=c&1|2,r.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Tm(n,a,r);else if(n.tag===19)Tm(n,a,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break e;for(;n.sibling===null;){if(n.return===null||n.return===r)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(He(et,c),(r.mode&1)===0)r.memoizedState=null;else switch(d){case"forwards":for(a=r.child,d=null;a!==null;)n=a.alternate,n!==null&&ql(n)===null&&(d=a),a=a.sibling;a=d,a===null?(d=r.child,r.child=null):(d=a.sibling,a.sibling=null),Ah(r,!1,d,a,p);break;case"backwards":for(a=null,d=r.child,r.child=null;d!==null;){if(n=d.alternate,n!==null&&ql(n)===null){r.child=d;break}n=d.sibling,d.sibling=a,a=d,d=n}Ah(r,!0,a,null,p);break;case"together":Ah(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Jl(n,r){(r.mode&1)===0&&n!==null&&(n.alternate=null,r.alternate=null,r.flags|=2)}function Er(n,r,a){if(n!==null&&(r.dependencies=n.dependencies),Xi|=r.lanes,(a&r.childLanes)===0)return null;if(n!==null&&r.child!==n.child)throw Error(t(153));if(r.child!==null){for(n=r.child,a=si(n,n.pendingProps),r.child=a,a.return=r;n.sibling!==null;)n=n.sibling,a=a.sibling=si(n,n.pendingProps),a.return=r;a.sibling=null}return r.child}function p1(n,r,a){switch(r.tag){case 3:vm(r),Ws();break;case 5:bp(r);break;case 1:Wt(r.type)&&Ol(r);break;case 4:ih(r,r.stateNode.containerInfo);break;case 10:var c=r.type._context,d=r.memoizedProps.value;He(jl,c._currentValue),c._currentValue=d;break;case 13:if(c=r.memoizedState,c!==null)return c.dehydrated!==null?(He(et,et.current&1),r.flags|=128,null):(a&r.child.childLanes)!==0?Em(n,r,a):(He(et,et.current&1),n=Er(n,r,a),n!==null?n.sibling:null);He(et,et.current&1);break;case 19:if(c=(a&r.childLanes)!==0,(n.flags&128)!==0){if(c)return Im(n,r,a);r.flags|=128}if(d=r.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),He(et,et.current),c)break;return null;case 22:case 23:return r.lanes=0,gm(n,r,a)}return Er(n,r,a)}var Sm,Rh,Am,Rm;Sm=function(n,r){for(var a=r.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Rh=function(){},Am=function(n,r,a,c){var d=n.memoizedProps;if(d!==c){n=r.stateNode,Ki(Gn.current);var p=null;switch(a){case"input":d=ms(n,d),c=ms(n,c),p=[];break;case"select":d=j({},d,{value:void 0}),c=j({},c,{value:void 0}),p=[];break;case"textarea":d=No(n,d),c=No(n,c),p=[];break;default:typeof d.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=Nl)}wn(a,c);var v;a=null;for(B in d)if(!c.hasOwnProperty(B)&&d.hasOwnProperty(B)&&d[B]!=null)if(B==="style"){var S=d[B];for(v in S)S.hasOwnProperty(v)&&(a||(a={}),a[v]="")}else B!=="dangerouslySetInnerHTML"&&B!=="children"&&B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&B!=="autoFocus"&&(o.hasOwnProperty(B)?p||(p=[]):(p=p||[]).push(B,null));for(B in c){var P=c[B];if(S=d!=null?d[B]:void 0,c.hasOwnProperty(B)&&P!==S&&(P!=null||S!=null))if(B==="style")if(S){for(v in S)!S.hasOwnProperty(v)||P&&P.hasOwnProperty(v)||(a||(a={}),a[v]="");for(v in P)P.hasOwnProperty(v)&&S[v]!==P[v]&&(a||(a={}),a[v]=P[v])}else a||(p||(p=[]),p.push(B,a)),a=P;else B==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,S=S?S.__html:void 0,P!=null&&S!==P&&(p=p||[]).push(B,P)):B==="children"?typeof P!="string"&&typeof P!="number"||(p=p||[]).push(B,""+P):B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&(o.hasOwnProperty(B)?(P!=null&&B==="onScroll"&&Ke("scroll",n),p||S===P||(p=[])):(p=p||[]).push(B,P))}a&&(p=p||[]).push("style",a);var B=p;(r.updateQueue=B)&&(r.flags|=4)}},Rm=function(n,r,a,c){a!==c&&(r.flags|=4)};function ya(n,r){if(!Ze)switch(n.tailMode){case"hidden":r=n.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Lt(n){var r=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(r)for(var d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags&14680064,c|=d.flags&14680064,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=c,n.childLanes=a,r}function m1(n,r,a){var c=r.pendingProps;switch(Kc(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Lt(r),null;case 1:return Wt(r.type)&&Vl(),Lt(r),null;case 3:return c=r.stateNode,Xs(),Qe(Ht),Qe(Vt),ah(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(Ul(r)?r.flags|=4:n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Sn!==null&&(bh(Sn),Sn=null))),Rh(n,r),Lt(r),null;case 5:sh(r);var d=Ki(da.current);if(a=r.type,n!==null&&r.stateNode!=null)Am(n,r,a,c,d),n.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!c){if(r.stateNode===null)throw Error(t(166));return Lt(r),null}if(n=Ki(Gn.current),Ul(r)){c=r.stateNode,a=r.type;var p=r.memoizedProps;switch(c[Wn]=r,c[aa]=p,n=(r.mode&1)!==0,a){case"dialog":Ke("cancel",c),Ke("close",c);break;case"iframe":case"object":case"embed":Ke("load",c);break;case"video":case"audio":for(d=0;d<ia.length;d++)Ke(ia[d],c);break;case"source":Ke("error",c);break;case"img":case"image":case"link":Ke("error",c),Ke("load",c);break;case"details":Ke("toggle",c);break;case"input":nl(c,p),Ke("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!p.multiple},Ke("invalid",c);break;case"textarea":Do(c,p),Ke("invalid",c)}wn(a,p),d=null;for(var v in p)if(p.hasOwnProperty(v)){var S=p[v];v==="children"?typeof S=="string"?c.textContent!==S&&(p.suppressHydrationWarning!==!0&&xl(c.textContent,S,n),d=["children",S]):typeof S=="number"&&c.textContent!==""+S&&(p.suppressHydrationWarning!==!0&&xl(c.textContent,S,n),d=["children",""+S]):o.hasOwnProperty(v)&&S!=null&&v==="onScroll"&&Ke("scroll",c)}switch(a){case"input":ps(c),xo(c,p,!0);break;case"textarea":ps(c),Dr(c);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(c.onclick=Nl)}c=d,r.updateQueue=c,c!==null&&(r.flags|=4)}else{v=d.nodeType===9?d:d.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Vo(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=v.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=v.createElement(a,{is:c.is}):(n=v.createElement(a),a==="select"&&(v=n,c.multiple?v.multiple=!0:c.size&&(v.size=c.size))):n=v.createElementNS(n,a),n[Wn]=r,n[aa]=c,Sm(n,r,!1,!1),r.stateNode=n;e:{switch(v=vs(a,c),a){case"dialog":Ke("cancel",n),Ke("close",n),d=c;break;case"iframe":case"object":case"embed":Ke("load",n),d=c;break;case"video":case"audio":for(d=0;d<ia.length;d++)Ke(ia[d],n);d=c;break;case"source":Ke("error",n),d=c;break;case"img":case"image":case"link":Ke("error",n),Ke("load",n),d=c;break;case"details":Ke("toggle",n),d=c;break;case"input":nl(n,c),d=ms(n,c),Ke("invalid",n);break;case"option":d=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},d=j({},c,{value:void 0}),Ke("invalid",n);break;case"textarea":Do(n,c),d=No(n,c),Ke("invalid",n);break;default:d=c}wn(a,d),S=d;for(p in S)if(S.hasOwnProperty(p)){var P=S[p];p==="style"?_s(n,P):p==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,P!=null&&il(n,P)):p==="children"?typeof P=="string"?(a!=="textarea"||P!=="")&&ki(n,P):typeof P=="number"&&ki(n,""+P):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(o.hasOwnProperty(p)?P!=null&&p==="onScroll"&&Ke("scroll",n):P!=null&&fe(n,p,P,v))}switch(a){case"input":ps(n),xo(n,c,!1);break;case"textarea":ps(n),Dr(n);break;case"option":c.value!=null&&n.setAttribute("value",""+Me(c.value));break;case"select":n.multiple=!!c.multiple,p=c.value,p!=null?vn(n,!!c.multiple,p,!1):c.defaultValue!=null&&vn(n,!!c.multiple,c.defaultValue,!0);break;default:typeof d.onClick=="function"&&(n.onclick=Nl)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return Lt(r),null;case 6:if(n&&r.stateNode!=null)Rm(n,r,n.memoizedProps,c);else{if(typeof c!="string"&&r.stateNode===null)throw Error(t(166));if(a=Ki(da.current),Ki(Gn.current),Ul(r)){if(c=r.stateNode,a=r.memoizedProps,c[Wn]=r,(p=c.nodeValue!==a)&&(n=on,n!==null))switch(n.tag){case 3:xl(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&xl(c.nodeValue,a,(n.mode&1)!==0)}p&&(r.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[Wn]=r,r.stateNode=c}return Lt(r),null;case 13:if(Qe(et),c=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Ze&&an!==null&&(r.mode&1)!==0&&(r.flags&128)===0)kp(),Ws(),r.flags|=98560,p=!1;else if(p=Ul(r),c!==null&&c.dehydrated!==null){if(n===null){if(!p)throw Error(t(318));if(p=r.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(t(317));p[Wn]=r}else Ws(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Lt(r),p=!1}else Sn!==null&&(bh(Sn),Sn=null),p=!0;if(!p)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=a,r):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(r.child.flags|=8192,(r.mode&1)!==0&&(n===null||(et.current&1)!==0?_t===0&&(_t=3):jh())),r.updateQueue!==null&&(r.flags|=4),Lt(r),null);case 4:return Xs(),Rh(n,r),n===null&&sa(r.stateNode.containerInfo),Lt(r),null;case 10:return eh(r.type._context),Lt(r),null;case 17:return Wt(r.type)&&Vl(),Lt(r),null;case 19:if(Qe(et),p=r.memoizedState,p===null)return Lt(r),null;if(c=(r.flags&128)!==0,v=p.rendering,v===null)if(c)ya(p,!1);else{if(_t!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(v=ql(n),v!==null){for(r.flags|=128,ya(p,!1),c=v.updateQueue,c!==null&&(r.updateQueue=c,r.flags|=4),r.subtreeFlags=0,c=a,a=r.child;a!==null;)p=a,n=c,p.flags&=14680066,v=p.alternate,v===null?(p.childLanes=0,p.lanes=n,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=v.childLanes,p.lanes=v.lanes,p.child=v.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=v.memoizedProps,p.memoizedState=v.memoizedState,p.updateQueue=v.updateQueue,p.type=v.type,n=v.dependencies,p.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return He(et,et.current&1|2),r.child}n=n.sibling}p.tail!==null&&Ge()>eo&&(r.flags|=128,c=!0,ya(p,!1),r.lanes=4194304)}else{if(!c)if(n=ql(v),n!==null){if(r.flags|=128,c=!0,a=n.updateQueue,a!==null&&(r.updateQueue=a,r.flags|=4),ya(p,!0),p.tail===null&&p.tailMode==="hidden"&&!v.alternate&&!Ze)return Lt(r),null}else 2*Ge()-p.renderingStartTime>eo&&a!==1073741824&&(r.flags|=128,c=!0,ya(p,!1),r.lanes=4194304);p.isBackwards?(v.sibling=r.child,r.child=v):(a=p.last,a!==null?a.sibling=v:r.child=v,p.last=v)}return p.tail!==null?(r=p.tail,p.rendering=r,p.tail=r.sibling,p.renderingStartTime=Ge(),r.sibling=null,a=et.current,He(et,c?a&1|2:a&1),r):(Lt(r),null);case 22:case 23:return Fh(),c=r.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(r.flags|=8192),c&&(r.mode&1)!==0?(ln&1073741824)!==0&&(Lt(r),r.subtreeFlags&6&&(r.flags|=8192)):Lt(r),null;case 24:return null;case 25:return null}throw Error(t(156,r.tag))}function g1(n,r){switch(Kc(r),r.tag){case 1:return Wt(r.type)&&Vl(),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return Xs(),Qe(Ht),Qe(Vt),ah(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 5:return sh(r),null;case 13:if(Qe(et),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(t(340));Ws()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return Qe(et),null;case 4:return Xs(),null;case 10:return eh(r.type._context),null;case 22:case 23:return Fh(),null;case 24:return null;default:return null}}var Zl=!1,Mt=!1,y1=typeof WeakSet=="function"?WeakSet:Set,oe=null;function Js(n,r){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){st(n,r,c)}else a.current=null}function Ch(n,r,a){try{a()}catch(c){st(n,r,c)}}var Cm=!1;function _1(n,r){if(Fc=dr,n=sp(),Nc(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var d=c.anchorOffset,p=c.focusNode;c=c.focusOffset;try{a.nodeType,p.nodeType}catch{a=null;break e}var v=0,S=-1,P=-1,B=0,X=0,Y=n,Q=null;t:for(;;){for(var ne;Y!==a||d!==0&&Y.nodeType!==3||(S=v+d),Y!==p||c!==0&&Y.nodeType!==3||(P=v+c),Y.nodeType===3&&(v+=Y.nodeValue.length),(ne=Y.firstChild)!==null;)Q=Y,Y=ne;for(;;){if(Y===n)break t;if(Q===a&&++B===d&&(S=v),Q===p&&++X===c&&(P=v),(ne=Y.nextSibling)!==null)break;Y=Q,Q=Y.parentNode}Y=ne}a=S===-1||P===-1?null:{start:S,end:P}}else a=null}a=a||{start:0,end:0}}else a=null;for(jc={focusedElem:n,selectionRange:a},dr=!1,oe=r;oe!==null;)if(r=oe,n=r.child,(r.subtreeFlags&1028)!==0&&n!==null)n.return=r,oe=n;else for(;oe!==null;){r=oe;try{var ae=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(ae!==null){var ue=ae.memoizedProps,lt=ae.memoizedState,b=r.stateNode,O=b.getSnapshotBeforeUpdate(r.elementType===r.type?ue:An(r.type,ue),lt);b.__reactInternalSnapshotBeforeUpdate=O}break;case 3:var F=r.stateNode.containerInfo;F.nodeType===1?F.textContent="":F.nodeType===9&&F.documentElement&&F.removeChild(F.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(J){st(r,r.return,J)}if(n=r.sibling,n!==null){n.return=r.return,oe=n;break}oe=r.return}return ae=Cm,Cm=!1,ae}function _a(n,r,a){var c=r.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var d=c=c.next;do{if((d.tag&n)===n){var p=d.destroy;d.destroy=void 0,p!==void 0&&Ch(r,a,p)}d=d.next}while(d!==c)}}function eu(n,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==r)}}function Ph(n){var r=n.ref;if(r!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof r=="function"?r(n):r.current=n}}function Pm(n){var r=n.alternate;r!==null&&(n.alternate=null,Pm(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&(delete r[Wn],delete r[aa],delete r[qc],delete r[e1],delete r[t1])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function km(n){return n.tag===5||n.tag===3||n.tag===4}function xm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||km(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function kh(n,r,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,r?a.nodeType===8?a.parentNode.insertBefore(n,r):a.insertBefore(n,r):(a.nodeType===8?(r=a.parentNode,r.insertBefore(n,a)):(r=a,r.appendChild(n)),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=Nl));else if(c!==4&&(n=n.child,n!==null))for(kh(n,r,a),n=n.sibling;n!==null;)kh(n,r,a),n=n.sibling}function xh(n,r,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,r?a.insertBefore(n,r):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(xh(n,r,a),n=n.sibling;n!==null;)xh(n,r,a),n=n.sibling}var Rt=null,Rn=!1;function ei(n,r,a){for(a=a.child;a!==null;)Nm(n,r,a),a=a.sibling}function Nm(n,r,a){if(Zt&&typeof Zt.onCommitFiberUnmount=="function")try{Zt.onCommitFiberUnmount(Oi,a)}catch{}switch(a.tag){case 5:Mt||Js(a,r);case 6:var c=Rt,d=Rn;Rt=null,ei(n,r,a),Rt=c,Rn=d,Rt!==null&&(Rn?(n=Rt,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):Rt.removeChild(a.stateNode));break;case 18:Rt!==null&&(Rn?(n=Rt,a=a.stateNode,n.nodeType===8?$c(n.parentNode,a):n.nodeType===1&&$c(n,a),qr(n)):$c(Rt,a.stateNode));break;case 4:c=Rt,d=Rn,Rt=a.stateNode.containerInfo,Rn=!0,ei(n,r,a),Rt=c,Rn=d;break;case 0:case 11:case 14:case 15:if(!Mt&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){d=c=c.next;do{var p=d,v=p.destroy;p=p.tag,v!==void 0&&((p&2)!==0||(p&4)!==0)&&Ch(a,r,v),d=d.next}while(d!==c)}ei(n,r,a);break;case 1:if(!Mt&&(Js(a,r),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(S){st(a,r,S)}ei(n,r,a);break;case 21:ei(n,r,a);break;case 22:a.mode&1?(Mt=(c=Mt)||a.memoizedState!==null,ei(n,r,a),Mt=c):ei(n,r,a);break;default:ei(n,r,a)}}function Dm(n){var r=n.updateQueue;if(r!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new y1),r.forEach(function(c){var d=C1.bind(null,n,c);a.has(c)||(a.add(c),c.then(d,d))})}}function Cn(n,r){var a=r.deletions;if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];try{var p=n,v=r,S=v;e:for(;S!==null;){switch(S.tag){case 5:Rt=S.stateNode,Rn=!1;break e;case 3:Rt=S.stateNode.containerInfo,Rn=!0;break e;case 4:Rt=S.stateNode.containerInfo,Rn=!0;break e}S=S.return}if(Rt===null)throw Error(t(160));Nm(p,v,d),Rt=null,Rn=!1;var P=d.alternate;P!==null&&(P.return=null),d.return=null}catch(B){st(d,r,B)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)Vm(r,n),r=r.sibling}function Vm(n,r){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Cn(r,n),Qn(n),c&4){try{_a(3,n,n.return),eu(3,n)}catch(ue){st(n,n.return,ue)}try{_a(5,n,n.return)}catch(ue){st(n,n.return,ue)}}break;case 1:Cn(r,n),Qn(n),c&512&&a!==null&&Js(a,a.return);break;case 5:if(Cn(r,n),Qn(n),c&512&&a!==null&&Js(a,a.return),n.flags&32){var d=n.stateNode;try{ki(d,"")}catch(ue){st(n,n.return,ue)}}if(c&4&&(d=n.stateNode,d!=null)){var p=n.memoizedProps,v=a!==null?a.memoizedProps:p,S=n.type,P=n.updateQueue;if(n.updateQueue=null,P!==null)try{S==="input"&&p.type==="radio"&&p.name!=null&&gs(d,p),vs(S,v);var B=vs(S,p);for(v=0;v<P.length;v+=2){var X=P[v],Y=P[v+1];X==="style"?_s(d,Y):X==="dangerouslySetInnerHTML"?il(d,Y):X==="children"?ki(d,Y):fe(d,X,Y,B)}switch(S){case"input":Pi(d,p);break;case"textarea":rl(d,p);break;case"select":var Q=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!p.multiple;var ne=p.value;ne!=null?vn(d,!!p.multiple,ne,!1):Q!==!!p.multiple&&(p.defaultValue!=null?vn(d,!!p.multiple,p.defaultValue,!0):vn(d,!!p.multiple,p.multiple?[]:"",!1))}d[aa]=p}catch(ue){st(n,n.return,ue)}}break;case 6:if(Cn(r,n),Qn(n),c&4){if(n.stateNode===null)throw Error(t(162));d=n.stateNode,p=n.memoizedProps;try{d.nodeValue=p}catch(ue){st(n,n.return,ue)}}break;case 3:if(Cn(r,n),Qn(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{qr(r.containerInfo)}catch(ue){st(n,n.return,ue)}break;case 4:Cn(r,n),Qn(n);break;case 13:Cn(r,n),Qn(n),d=n.child,d.flags&8192&&(p=d.memoizedState!==null,d.stateNode.isHidden=p,!p||d.alternate!==null&&d.alternate.memoizedState!==null||(Vh=Ge())),c&4&&Dm(n);break;case 22:if(X=a!==null&&a.memoizedState!==null,n.mode&1?(Mt=(B=Mt)||X,Cn(r,n),Mt=B):Cn(r,n),Qn(n),c&8192){if(B=n.memoizedState!==null,(n.stateNode.isHidden=B)&&!X&&(n.mode&1)!==0)for(oe=n,X=n.child;X!==null;){for(Y=oe=X;oe!==null;){switch(Q=oe,ne=Q.child,Q.tag){case 0:case 11:case 14:case 15:_a(4,Q,Q.return);break;case 1:Js(Q,Q.return);var ae=Q.stateNode;if(typeof ae.componentWillUnmount=="function"){c=Q,a=Q.return;try{r=c,ae.props=r.memoizedProps,ae.state=r.memoizedState,ae.componentWillUnmount()}catch(ue){st(c,a,ue)}}break;case 5:Js(Q,Q.return);break;case 22:if(Q.memoizedState!==null){Mm(Y);continue}}ne!==null?(ne.return=Q,oe=ne):Mm(Y)}X=X.sibling}e:for(X=null,Y=n;;){if(Y.tag===5){if(X===null){X=Y;try{d=Y.stateNode,B?(p=d.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(S=Y.stateNode,P=Y.memoizedProps.style,v=P!=null&&P.hasOwnProperty("display")?P.display:null,S.style.display=Lr("display",v))}catch(ue){st(n,n.return,ue)}}}else if(Y.tag===6){if(X===null)try{Y.stateNode.nodeValue=B?"":Y.memoizedProps}catch(ue){st(n,n.return,ue)}}else if((Y.tag!==22&&Y.tag!==23||Y.memoizedState===null||Y===n)&&Y.child!==null){Y.child.return=Y,Y=Y.child;continue}if(Y===n)break e;for(;Y.sibling===null;){if(Y.return===null||Y.return===n)break e;X===Y&&(X=null),Y=Y.return}X===Y&&(X=null),Y.sibling.return=Y.return,Y=Y.sibling}}break;case 19:Cn(r,n),Qn(n),c&4&&Dm(n);break;case 21:break;default:Cn(r,n),Qn(n)}}function Qn(n){var r=n.flags;if(r&2){try{e:{for(var a=n.return;a!==null;){if(km(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var d=c.stateNode;c.flags&32&&(ki(d,""),c.flags&=-33);var p=xm(n);xh(n,p,d);break;case 3:case 4:var v=c.stateNode.containerInfo,S=xm(n);kh(n,S,v);break;default:throw Error(t(161))}}catch(P){st(n,n.return,P)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function v1(n,r,a){oe=n,Om(n)}function Om(n,r,a){for(var c=(n.mode&1)!==0;oe!==null;){var d=oe,p=d.child;if(d.tag===22&&c){var v=d.memoizedState!==null||Zl;if(!v){var S=d.alternate,P=S!==null&&S.memoizedState!==null||Mt;S=Zl;var B=Mt;if(Zl=v,(Mt=P)&&!B)for(oe=d;oe!==null;)v=oe,P=v.child,v.tag===22&&v.memoizedState!==null?bm(d):P!==null?(P.return=v,oe=P):bm(d);for(;p!==null;)oe=p,Om(p),p=p.sibling;oe=d,Zl=S,Mt=B}Lm(n)}else(d.subtreeFlags&8772)!==0&&p!==null?(p.return=d,oe=p):Lm(n)}}function Lm(n){for(;oe!==null;){var r=oe;if((r.flags&8772)!==0){var a=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:Mt||eu(5,r);break;case 1:var c=r.stateNode;if(r.flags&4&&!Mt)if(a===null)c.componentDidMount();else{var d=r.elementType===r.type?a.memoizedProps:An(r.type,a.memoizedProps);c.componentDidUpdate(d,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var p=r.updateQueue;p!==null&&Mp(r,p,c);break;case 3:var v=r.updateQueue;if(v!==null){if(a=null,r.child!==null)switch(r.child.tag){case 5:a=r.child.stateNode;break;case 1:a=r.child.stateNode}Mp(r,v,a)}break;case 5:var S=r.stateNode;if(a===null&&r.flags&4){a=S;var P=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":P.autoFocus&&a.focus();break;case"img":P.src&&(a.src=P.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var B=r.alternate;if(B!==null){var X=B.memoizedState;if(X!==null){var Y=X.dehydrated;Y!==null&&qr(Y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Mt||r.flags&512&&Ph(r)}catch(Q){st(r,r.return,Q)}}if(r===n){oe=null;break}if(a=r.sibling,a!==null){a.return=r.return,oe=a;break}oe=r.return}}function Mm(n){for(;oe!==null;){var r=oe;if(r===n){oe=null;break}var a=r.sibling;if(a!==null){a.return=r.return,oe=a;break}oe=r.return}}function bm(n){for(;oe!==null;){var r=oe;try{switch(r.tag){case 0:case 11:case 15:var a=r.return;try{eu(4,r)}catch(P){st(r,a,P)}break;case 1:var c=r.stateNode;if(typeof c.componentDidMount=="function"){var d=r.return;try{c.componentDidMount()}catch(P){st(r,d,P)}}var p=r.return;try{Ph(r)}catch(P){st(r,p,P)}break;case 5:var v=r.return;try{Ph(r)}catch(P){st(r,v,P)}}}catch(P){st(r,r.return,P)}if(r===n){oe=null;break}var S=r.sibling;if(S!==null){S.return=r.return,oe=S;break}oe=r.return}}var w1=Math.ceil,tu=Te.ReactCurrentDispatcher,Nh=Te.ReactCurrentOwner,gn=Te.ReactCurrentBatchConfig,be=0,Et=null,dt=null,Ct=0,ln=0,Zs=Qr(0),_t=0,va=null,Xi=0,nu=0,Dh=0,wa=null,Kt=null,Vh=0,eo=1/0,Tr=null,ru=!1,Oh=null,ti=null,iu=!1,ni=null,su=0,Ea=0,Lh=null,ou=-1,au=0;function qt(){return(be&6)!==0?Ge():ou!==-1?ou:ou=Ge()}function ri(n){return(n.mode&1)===0?1:(be&2)!==0&&Ct!==0?Ct&-Ct:r1.transition!==null?(au===0&&(au=zo()),au):(n=Ve,n!==0||(n=window.event,n=n===void 0?16:ks(n.type)),n)}function Pn(n,r,a,c){if(50<Ea)throw Ea=0,Lh=null,Error(t(185));Ui(n,a,c),((be&2)===0||n!==Et)&&(n===Et&&((be&2)===0&&(nu|=a),_t===4&&ii(n,Ct)),Qt(n,c),a===1&&be===0&&(r.mode&1)===0&&(eo=Ge()+500,Ll&&Yr()))}function Qt(n,r){var a=n.callbackNode;bi(n,r);var c=ur(n,n===Et?Ct:0);if(c===0)a!==null&&Ts(a),n.callbackNode=null,n.callbackPriority=0;else if(r=c&-c,n.callbackPriority!==r){if(a!=null&&Ts(a),r===1)n.tag===0?n1(Fm.bind(null,n)):Sp(Fm.bind(null,n)),J0(function(){(be&6)===0&&Yr()}),a=null;else{switch(Mn(c)){case 1:a=Is;break;case 4:a=Fo;break;case 16:a=Vi;break;case 536870912:a=Ss;break;default:a=Vi}a=Gm(a,Um.bind(null,n))}n.callbackPriority=r,n.callbackNode=a}}function Um(n,r){if(ou=-1,au=0,(be&6)!==0)throw Error(t(327));var a=n.callbackNode;if(to()&&n.callbackNode!==a)return null;var c=ur(n,n===Et?Ct:0);if(c===0)return null;if((c&30)!==0||(c&n.expiredLanes)!==0||r)r=lu(n,c);else{r=c;var d=be;be|=2;var p=Bm();(Et!==n||Ct!==r)&&(Tr=null,eo=Ge()+500,Ji(n,r));do try{I1();break}catch(S){jm(n,S)}while(!0);Zc(),tu.current=p,be=d,dt!==null?r=0:(Et=null,Ct=0,r=_t)}if(r!==0){if(r===2&&(d=Bo(n),d!==0&&(c=d,r=Mh(n,d))),r===1)throw a=va,Ji(n,0),ii(n,c),Qt(n,Ge()),a;if(r===6)ii(n,c);else{if(d=n.current.alternate,(c&30)===0&&!E1(d)&&(r=lu(n,c),r===2&&(p=Bo(n),p!==0&&(c=p,r=Mh(n,p))),r===1))throw a=va,Ji(n,0),ii(n,c),Qt(n,Ge()),a;switch(n.finishedWork=d,n.finishedLanes=c,r){case 0:case 1:throw Error(t(345));case 2:Zi(n,Kt,Tr);break;case 3:if(ii(n,c),(c&130023424)===c&&(r=Vh+500-Ge(),10<r)){if(ur(n,0)!==0)break;if(d=n.suspendedLanes,(d&c)!==c){qt(),n.pingedLanes|=n.suspendedLanes&d;break}n.timeoutHandle=zc(Zi.bind(null,n,Kt,Tr),r);break}Zi(n,Kt,Tr);break;case 4:if(ii(n,c),(c&4194240)===c)break;for(r=n.eventTimes,d=-1;0<c;){var v=31-en(c);p=1<<v,v=r[v],v>d&&(d=v),c&=~p}if(c=d,c=Ge()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*w1(c/1960))-c,10<c){n.timeoutHandle=zc(Zi.bind(null,n,Kt,Tr),c);break}Zi(n,Kt,Tr);break;case 5:Zi(n,Kt,Tr);break;default:throw Error(t(329))}}}return Qt(n,Ge()),n.callbackNode===a?Um.bind(null,n):null}function Mh(n,r){var a=wa;return n.current.memoizedState.isDehydrated&&(Ji(n,r).flags|=256),n=lu(n,r),n!==2&&(r=Kt,Kt=a,r!==null&&bh(r)),n}function bh(n){Kt===null?Kt=n:Kt.push.apply(Kt,n)}function E1(n){for(var r=n;;){if(r.flags&16384){var a=r.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var d=a[c],p=d.getSnapshot;d=d.value;try{if(!In(p(),d))return!1}catch{return!1}}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function ii(n,r){for(r&=~Dh,r&=~nu,n.suspendedLanes|=r,n.pingedLanes&=~r,n=n.expirationTimes;0<r;){var a=31-en(r),c=1<<a;n[a]=-1,r&=~c}}function Fm(n){if((be&6)!==0)throw Error(t(327));to();var r=ur(n,0);if((r&1)===0)return Qt(n,Ge()),null;var a=lu(n,r);if(n.tag!==0&&a===2){var c=Bo(n);c!==0&&(r=c,a=Mh(n,c))}if(a===1)throw a=va,Ji(n,0),ii(n,r),Qt(n,Ge()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=r,Zi(n,Kt,Tr),Qt(n,Ge()),null}function Uh(n,r){var a=be;be|=1;try{return n(r)}finally{be=a,be===0&&(eo=Ge()+500,Ll&&Yr())}}function Yi(n){ni!==null&&ni.tag===0&&(be&6)===0&&to();var r=be;be|=1;var a=gn.transition,c=Ve;try{if(gn.transition=null,Ve=1,n)return n()}finally{Ve=c,gn.transition=a,be=r,(be&6)===0&&Yr()}}function Fh(){ln=Zs.current,Qe(Zs)}function Ji(n,r){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,Y0(a)),dt!==null)for(a=dt.return;a!==null;){var c=a;switch(Kc(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&Vl();break;case 3:Xs(),Qe(Ht),Qe(Vt),ah();break;case 5:sh(c);break;case 4:Xs();break;case 13:Qe(et);break;case 19:Qe(et);break;case 10:eh(c.type._context);break;case 22:case 23:Fh()}a=a.return}if(Et=n,dt=n=si(n.current,null),Ct=ln=r,_t=0,va=null,Dh=nu=Xi=0,Kt=wa=null,Gi!==null){for(r=0;r<Gi.length;r++)if(a=Gi[r],c=a.interleaved,c!==null){a.interleaved=null;var d=c.next,p=a.pending;if(p!==null){var v=p.next;p.next=d,c.next=v}a.pending=c}Gi=null}return n}function jm(n,r){do{var a=dt;try{if(Zc(),Hl.current=Ql,Wl){for(var c=tt.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}Wl=!1}if(Qi=0,wt=yt=tt=null,fa=!1,pa=0,Nh.current=null,a===null||a.return===null){_t=1,va=r,dt=null;break}e:{var p=n,v=a.return,S=a,P=r;if(r=Ct,S.flags|=32768,P!==null&&typeof P=="object"&&typeof P.then=="function"){var B=P,X=S,Y=X.tag;if((X.mode&1)===0&&(Y===0||Y===11||Y===15)){var Q=X.alternate;Q?(X.updateQueue=Q.updateQueue,X.memoizedState=Q.memoizedState,X.lanes=Q.lanes):(X.updateQueue=null,X.memoizedState=null)}var ne=hm(v);if(ne!==null){ne.flags&=-257,dm(ne,v,S,p,r),ne.mode&1&&cm(p,B,r),r=ne,P=B;var ae=r.updateQueue;if(ae===null){var ue=new Set;ue.add(P),r.updateQueue=ue}else ae.add(P);break e}else{if((r&1)===0){cm(p,B,r),jh();break e}P=Error(t(426))}}else if(Ze&&S.mode&1){var lt=hm(v);if(lt!==null){(lt.flags&65536)===0&&(lt.flags|=256),dm(lt,v,S,p,r),Yc(Ys(P,S));break e}}p=P=Ys(P,S),_t!==4&&(_t=2),wa===null?wa=[p]:wa.push(p),p=v;do{switch(p.tag){case 3:p.flags|=65536,r&=-r,p.lanes|=r;var b=lm(p,P,r);Lp(p,b);break e;case 1:S=P;var O=p.type,F=p.stateNode;if((p.flags&128)===0&&(typeof O.getDerivedStateFromError=="function"||F!==null&&typeof F.componentDidCatch=="function"&&(ti===null||!ti.has(F)))){p.flags|=65536,r&=-r,p.lanes|=r;var J=um(p,S,r);Lp(p,J);break e}}p=p.return}while(p!==null)}$m(a)}catch(he){r=he,dt===a&&a!==null&&(dt=a=a.return);continue}break}while(!0)}function Bm(){var n=tu.current;return tu.current=Ql,n===null?Ql:n}function jh(){(_t===0||_t===3||_t===2)&&(_t=4),Et===null||(Xi&268435455)===0&&(nu&268435455)===0||ii(Et,Ct)}function lu(n,r){var a=be;be|=2;var c=Bm();(Et!==n||Ct!==r)&&(Tr=null,Ji(n,r));do try{T1();break}catch(d){jm(n,d)}while(!0);if(Zc(),be=a,tu.current=c,dt!==null)throw Error(t(261));return Et=null,Ct=0,_t}function T1(){for(;dt!==null;)zm(dt)}function I1(){for(;dt!==null&&!Di();)zm(dt)}function zm(n){var r=Wm(n.alternate,n,ln);n.memoizedProps=n.pendingProps,r===null?$m(n):dt=r,Nh.current=null}function $m(n){var r=n;do{var a=r.alternate;if(n=r.return,(r.flags&32768)===0){if(a=m1(a,r,ln),a!==null){dt=a;return}}else{if(a=g1(a,r),a!==null){a.flags&=32767,dt=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{_t=6,dt=null;return}}if(r=r.sibling,r!==null){dt=r;return}dt=r=n}while(r!==null);_t===0&&(_t=5)}function Zi(n,r,a){var c=Ve,d=gn.transition;try{gn.transition=null,Ve=1,S1(n,r,a,c)}finally{gn.transition=d,Ve=c}return null}function S1(n,r,a,c){do to();while(ni!==null);if((be&6)!==0)throw Error(t(327));a=n.finishedWork;var d=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var p=a.lanes|a.childLanes;if(Rc(n,p),n===Et&&(dt=Et=null,Ct=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||iu||(iu=!0,Gm(Vi,function(){return to(),null})),p=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||p){p=gn.transition,gn.transition=null;var v=Ve;Ve=1;var S=be;be|=4,Nh.current=null,_1(n,a),Vm(a,n),q0(jc),dr=!!Fc,jc=Fc=null,n.current=a,v1(a),lr(),be=S,Ve=v,gn.transition=p}else n.current=a;if(iu&&(iu=!1,ni=n,su=d),p=n.pendingLanes,p===0&&(ti=null),ml(a.stateNode),Qt(n,Ge()),r!==null)for(c=n.onRecoverableError,a=0;a<r.length;a++)d=r[a],c(d.value,{componentStack:d.stack,digest:d.digest});if(ru)throw ru=!1,n=Oh,Oh=null,n;return(su&1)!==0&&n.tag!==0&&to(),p=n.pendingLanes,(p&1)!==0?n===Lh?Ea++:(Ea=0,Lh=n):Ea=0,Yr(),null}function to(){if(ni!==null){var n=Mn(su),r=gn.transition,a=Ve;try{if(gn.transition=null,Ve=16>n?16:n,ni===null)var c=!1;else{if(n=ni,ni=null,su=0,(be&6)!==0)throw Error(t(331));var d=be;for(be|=4,oe=n.current;oe!==null;){var p=oe,v=p.child;if((oe.flags&16)!==0){var S=p.deletions;if(S!==null){for(var P=0;P<S.length;P++){var B=S[P];for(oe=B;oe!==null;){var X=oe;switch(X.tag){case 0:case 11:case 15:_a(8,X,p)}var Y=X.child;if(Y!==null)Y.return=X,oe=Y;else for(;oe!==null;){X=oe;var Q=X.sibling,ne=X.return;if(Pm(X),X===B){oe=null;break}if(Q!==null){Q.return=ne,oe=Q;break}oe=ne}}}var ae=p.alternate;if(ae!==null){var ue=ae.child;if(ue!==null){ae.child=null;do{var lt=ue.sibling;ue.sibling=null,ue=lt}while(ue!==null)}}oe=p}}if((p.subtreeFlags&2064)!==0&&v!==null)v.return=p,oe=v;else e:for(;oe!==null;){if(p=oe,(p.flags&2048)!==0)switch(p.tag){case 0:case 11:case 15:_a(9,p,p.return)}var b=p.sibling;if(b!==null){b.return=p.return,oe=b;break e}oe=p.return}}var O=n.current;for(oe=O;oe!==null;){v=oe;var F=v.child;if((v.subtreeFlags&2064)!==0&&F!==null)F.return=v,oe=F;else e:for(v=O;oe!==null;){if(S=oe,(S.flags&2048)!==0)try{switch(S.tag){case 0:case 11:case 15:eu(9,S)}}catch(he){st(S,S.return,he)}if(S===v){oe=null;break e}var J=S.sibling;if(J!==null){J.return=S.return,oe=J;break e}oe=S.return}}if(be=d,Yr(),Zt&&typeof Zt.onPostCommitFiberRoot=="function")try{Zt.onPostCommitFiberRoot(Oi,n)}catch{}c=!0}return c}finally{Ve=a,gn.transition=r}}return!1}function qm(n,r,a){r=Ys(a,r),r=lm(n,r,1),n=Zr(n,r,1),r=qt(),n!==null&&(Ui(n,1,r),Qt(n,r))}function st(n,r,a){if(n.tag===3)qm(n,n,a);else for(;r!==null;){if(r.tag===3){qm(r,n,a);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(ti===null||!ti.has(c))){n=Ys(a,n),n=um(r,n,1),r=Zr(r,n,1),n=qt(),r!==null&&(Ui(r,1,n),Qt(r,n));break}}r=r.return}}function A1(n,r,a){var c=n.pingCache;c!==null&&c.delete(r),r=qt(),n.pingedLanes|=n.suspendedLanes&a,Et===n&&(Ct&a)===a&&(_t===4||_t===3&&(Ct&130023424)===Ct&&500>Ge()-Vh?Ji(n,0):Dh|=a),Qt(n,r)}function Hm(n,r){r===0&&((n.mode&1)===0?r=1:(r=Br,Br<<=1,(Br&130023424)===0&&(Br=4194304)));var a=qt();n=vr(n,r),n!==null&&(Ui(n,r,a),Qt(n,a))}function R1(n){var r=n.memoizedState,a=0;r!==null&&(a=r.retryLane),Hm(n,a)}function C1(n,r){var a=0;switch(n.tag){case 13:var c=n.stateNode,d=n.memoizedState;d!==null&&(a=d.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(r),Hm(n,a)}var Wm;Wm=function(n,r,a){if(n!==null)if(n.memoizedProps!==r.pendingProps||Ht.current)Gt=!0;else{if((n.lanes&a)===0&&(r.flags&128)===0)return Gt=!1,p1(n,r,a);Gt=(n.flags&131072)!==0}else Gt=!1,Ze&&(r.flags&1048576)!==0&&Ap(r,bl,r.index);switch(r.lanes=0,r.tag){case 2:var c=r.type;Jl(n,r),n=r.pendingProps;var d=$s(r,Vt.current);Qs(r,a),d=ch(null,r,c,n,d,a);var p=hh();return r.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,Wt(c)?(p=!0,Ol(r)):p=!1,r.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,rh(r),d.updater=Xl,r.stateNode=d,d._reactInternals=r,yh(r,c,n,a),r=Eh(null,r,c,!0,p,a)):(r.tag=0,Ze&&p&&Gc(r),$t(null,r,d,a),r=r.child),r;case 16:c=r.elementType;e:{switch(Jl(n,r),n=r.pendingProps,d=c._init,c=d(c._payload),r.type=c,d=r.tag=k1(c),n=An(c,n),d){case 0:r=wh(null,r,c,n,a);break e;case 1:r=_m(null,r,c,n,a);break e;case 11:r=fm(null,r,c,n,a);break e;case 14:r=pm(null,r,c,An(c.type,n),a);break e}throw Error(t(306,c,""))}return r;case 0:return c=r.type,d=r.pendingProps,d=r.elementType===c?d:An(c,d),wh(n,r,c,d,a);case 1:return c=r.type,d=r.pendingProps,d=r.elementType===c?d:An(c,d),_m(n,r,c,d,a);case 3:e:{if(vm(r),n===null)throw Error(t(387));c=r.pendingProps,p=r.memoizedState,d=p.element,Op(n,r),$l(r,c,null,a);var v=r.memoizedState;if(c=v.element,p.isDehydrated)if(p={element:c,isDehydrated:!1,cache:v.cache,pendingSuspenseBoundaries:v.pendingSuspenseBoundaries,transitions:v.transitions},r.updateQueue.baseState=p,r.memoizedState=p,r.flags&256){d=Ys(Error(t(423)),r),r=wm(n,r,c,a,d);break e}else if(c!==d){d=Ys(Error(t(424)),r),r=wm(n,r,c,a,d);break e}else for(an=Kr(r.stateNode.containerInfo.firstChild),on=r,Ze=!0,Sn=null,a=Dp(r,null,c,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Ws(),c===d){r=Er(n,r,a);break e}$t(n,r,c,a)}r=r.child}return r;case 5:return bp(r),n===null&&Xc(r),c=r.type,d=r.pendingProps,p=n!==null?n.memoizedProps:null,v=d.children,Bc(c,d)?v=null:p!==null&&Bc(c,p)&&(r.flags|=32),ym(n,r),$t(n,r,v,a),r.child;case 6:return n===null&&Xc(r),null;case 13:return Em(n,r,a);case 4:return ih(r,r.stateNode.containerInfo),c=r.pendingProps,n===null?r.child=Gs(r,null,c,a):$t(n,r,c,a),r.child;case 11:return c=r.type,d=r.pendingProps,d=r.elementType===c?d:An(c,d),fm(n,r,c,d,a);case 7:return $t(n,r,r.pendingProps,a),r.child;case 8:return $t(n,r,r.pendingProps.children,a),r.child;case 12:return $t(n,r,r.pendingProps.children,a),r.child;case 10:e:{if(c=r.type._context,d=r.pendingProps,p=r.memoizedProps,v=d.value,He(jl,c._currentValue),c._currentValue=v,p!==null)if(In(p.value,v)){if(p.children===d.children&&!Ht.current){r=Er(n,r,a);break e}}else for(p=r.child,p!==null&&(p.return=r);p!==null;){var S=p.dependencies;if(S!==null){v=p.child;for(var P=S.firstContext;P!==null;){if(P.context===c){if(p.tag===1){P=wr(-1,a&-a),P.tag=2;var B=p.updateQueue;if(B!==null){B=B.shared;var X=B.pending;X===null?P.next=P:(P.next=X.next,X.next=P),B.pending=P}}p.lanes|=a,P=p.alternate,P!==null&&(P.lanes|=a),th(p.return,a,r),S.lanes|=a;break}P=P.next}}else if(p.tag===10)v=p.type===r.type?null:p.child;else if(p.tag===18){if(v=p.return,v===null)throw Error(t(341));v.lanes|=a,S=v.alternate,S!==null&&(S.lanes|=a),th(v,a,r),v=p.sibling}else v=p.child;if(v!==null)v.return=p;else for(v=p;v!==null;){if(v===r){v=null;break}if(p=v.sibling,p!==null){p.return=v.return,v=p;break}v=v.return}p=v}$t(n,r,d.children,a),r=r.child}return r;case 9:return d=r.type,c=r.pendingProps.children,Qs(r,a),d=pn(d),c=c(d),r.flags|=1,$t(n,r,c,a),r.child;case 14:return c=r.type,d=An(c,r.pendingProps),d=An(c.type,d),pm(n,r,c,d,a);case 15:return mm(n,r,r.type,r.pendingProps,a);case 17:return c=r.type,d=r.pendingProps,d=r.elementType===c?d:An(c,d),Jl(n,r),r.tag=1,Wt(c)?(n=!0,Ol(r)):n=!1,Qs(r,a),om(r,c,d),yh(r,c,d,a),Eh(null,r,c,!0,n,a);case 19:return Im(n,r,a);case 22:return gm(n,r,a)}throw Error(t(156,r.tag))};function Gm(n,r){return Uo(n,r)}function P1(n,r,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yn(n,r,a,c){return new P1(n,r,a,c)}function Bh(n){return n=n.prototype,!(!n||!n.isReactComponent)}function k1(n){if(typeof n=="function")return Bh(n)?1:0;if(n!=null){if(n=n.$$typeof,n===M)return 11;if(n===Je)return 14}return 2}function si(n,r){var a=n.alternate;return a===null?(a=yn(n.tag,r,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=r,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,r=n.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function uu(n,r,a,c,d,p){var v=2;if(c=n,typeof n=="function")Bh(n)&&(v=1);else if(typeof n=="string")v=5;else e:switch(n){case k:return es(a.children,d,p,r);case A:v=8,d|=8;break;case R:return n=yn(12,a,r,d|2),n.elementType=R,n.lanes=p,n;case C:return n=yn(13,a,r,d),n.elementType=C,n.lanes=p,n;case Le:return n=yn(19,a,r,d),n.elementType=Le,n.lanes=p,n;case je:return cu(a,d,p,r);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case D:v=10;break e;case x:v=9;break e;case M:v=11;break e;case Je:v=14;break e;case rt:v=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return r=yn(v,a,r,d),r.elementType=n,r.type=c,r.lanes=p,r}function es(n,r,a,c){return n=yn(7,n,c,r),n.lanes=a,n}function cu(n,r,a,c){return n=yn(22,n,c,r),n.elementType=je,n.lanes=a,n.stateNode={isHidden:!1},n}function zh(n,r,a){return n=yn(6,n,null,r),n.lanes=a,n}function $h(n,r,a){return r=yn(4,n.children!==null?n.children:[],n.key,r),r.lanes=a,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}function x1(n,r,a,c,d){this.tag=r,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$o(0),this.expirationTimes=$o(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$o(0),this.identifierPrefix=c,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function qh(n,r,a,c,d,p,v,S,P){return n=new x1(n,r,a,S,P),r===1?(r=1,p===!0&&(r|=8)):r=0,p=yn(3,null,null,r),n.current=p,p.stateNode=n,p.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},rh(p),n}function N1(n,r,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ce,key:c==null?null:""+c,children:n,containerInfo:r,implementation:a}}function Km(n){if(!n)return Xr;n=n._reactInternals;e:{if(En(n)!==n||n.tag!==1)throw Error(t(170));var r=n;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(Wt(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(Wt(a))return Tp(n,a,r)}return r}function Qm(n,r,a,c,d,p,v,S,P){return n=qh(a,c,!0,n,d,p,v,S,P),n.context=Km(null),a=n.current,c=qt(),d=ri(a),p=wr(c,d),p.callback=r??null,Zr(a,p,d),n.current.lanes=d,Ui(n,d,c),Qt(n,c),n}function hu(n,r,a,c){var d=r.current,p=qt(),v=ri(d);return a=Km(a),r.context===null?r.context=a:r.pendingContext=a,r=wr(p,v),r.payload={element:n},c=c===void 0?null:c,c!==null&&(r.callback=c),n=Zr(d,r,v),n!==null&&(Pn(n,d,v,p),zl(n,d,v)),v}function du(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Xm(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<r?a:r}}function Hh(n,r){Xm(n,r),(n=n.alternate)&&Xm(n,r)}function D1(){return null}var Ym=typeof reportError=="function"?reportError:function(n){console.error(n)};function Wh(n){this._internalRoot=n}fu.prototype.render=Wh.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(t(409));hu(n,r,null,null)},fu.prototype.unmount=Wh.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;Yi(function(){hu(null,n,null,null)}),r[mr]=null}};function fu(n){this._internalRoot=n}fu.prototype.unstable_scheduleHydration=function(n){if(n){var r=Go();n={blockedOn:null,target:n,priority:r};for(var a=0;a<tn.length&&r!==0&&r<tn[a].priority;a++);tn.splice(a,0,n),a===0&&Cs(n)}};function Gh(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function pu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Jm(){}function V1(n,r,a,c,d){if(d){if(typeof c=="function"){var p=c;c=function(){var B=du(v);p.call(B)}}var v=Qm(r,c,n,0,null,!1,!1,"",Jm);return n._reactRootContainer=v,n[mr]=v.current,sa(n.nodeType===8?n.parentNode:n),Yi(),v}for(;d=n.lastChild;)n.removeChild(d);if(typeof c=="function"){var S=c;c=function(){var B=du(P);S.call(B)}}var P=qh(n,0,!1,null,null,!1,!1,"",Jm);return n._reactRootContainer=P,n[mr]=P.current,sa(n.nodeType===8?n.parentNode:n),Yi(function(){hu(r,P,a,c)}),P}function mu(n,r,a,c,d){var p=a._reactRootContainer;if(p){var v=p;if(typeof d=="function"){var S=d;d=function(){var P=du(v);S.call(P)}}hu(r,v,n,d)}else v=V1(a,r,n,d,c);return du(v)}Ho=function(n){switch(n.tag){case 3:var r=n.stateNode;if(r.current.memoizedState.isDehydrated){var a=Fe(r.pendingLanes);a!==0&&(qo(r,a|1),Qt(r,Ge()),(be&6)===0&&(eo=Ge()+500,Yr()))}break;case 13:Yi(function(){var c=vr(n,1);if(c!==null){var d=qt();Pn(c,n,1,d)}}),Hh(n,1)}},As=function(n){if(n.tag===13){var r=vr(n,134217728);if(r!==null){var a=qt();Pn(r,n,134217728,a)}Hh(n,134217728)}},Wo=function(n){if(n.tag===13){var r=ri(n),a=vr(n,r);if(a!==null){var c=qt();Pn(a,n,r,c)}Hh(n,r)}},Go=function(){return Ve},Ko=function(n,r){var a=Ve;try{return Ve=n,r()}finally{Ve=a}},sr=function(n,r,a){switch(r){case"input":if(Pi(n,a),r=a.name,a.type==="radio"&&r!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<a.length;r++){var c=a[r];if(c!==n&&c.form===n.form){var d=Dl(c);if(!d)throw Error(t(90));ko(c),Pi(c,d)}}}break;case"textarea":rl(n,a);break;case"select":r=a.value,r!=null&&vn(n,!!a.multiple,r,!1)}},ol=Uh,al=Yi;var O1={usingClientEntryPoint:!1,Events:[la,Bs,Dl,br,Ur,Uh]},Ta={findFiberByHostInstance:$i,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},L1={bundleType:Ta.bundleType,version:Ta.version,rendererPackageName:Ta.rendererPackageName,rendererConfig:Ta.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Te.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=pl(n),n===null?null:n.stateNode},findFiberByHostInstance:Ta.findFiberByHostInstance||D1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gu.isDisabled&&gu.supportsFiber)try{Oi=gu.inject(L1),Zt=gu}catch{}}return Xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O1,Xt.createPortal=function(n,r){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Gh(r))throw Error(t(200));return N1(n,r,null,a)},Xt.createRoot=function(n,r){if(!Gh(n))throw Error(t(299));var a=!1,c="",d=Ym;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onRecoverableError!==void 0&&(d=r.onRecoverableError)),r=qh(n,1,!1,null,null,a,!1,c,d),n[mr]=r.current,sa(n.nodeType===8?n.parentNode:n),new Wh(r)},Xt.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=pl(r),n=n===null?null:n.stateNode,n},Xt.flushSync=function(n){return Yi(n)},Xt.hydrate=function(n,r,a){if(!pu(r))throw Error(t(200));return mu(null,n,r,!0,a)},Xt.hydrateRoot=function(n,r,a){if(!Gh(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,d=!1,p="",v=Ym;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onRecoverableError!==void 0&&(v=a.onRecoverableError)),r=Qm(r,null,n,1,a??null,d,!1,p,v),n[mr]=r.current,sa(n),c)for(n=0;n<c.length;n++)a=c[n],d=a._getVersion,d=d(a._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[a,d]:r.mutableSourceEagerHydrationData.push(a,d);return new fu(r)},Xt.render=function(n,r,a){if(!pu(r))throw Error(t(200));return mu(null,n,r,!1,a)},Xt.unmountComponentAtNode=function(n){if(!pu(n))throw Error(t(40));return n._reactRootContainer?(Yi(function(){mu(null,null,n,!1,function(){n._reactRootContainer=null,n[mr]=null})}),!0):!1},Xt.unstable_batchedUpdates=Uh,Xt.unstable_renderSubtreeIntoContainer=function(n,r,a,c){if(!pu(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return mu(n,r,a,!1,c)},Xt.version="18.3.1-next-f1338f8080-20240426",Xt}var og;function q1(){if(og)return Xh.exports;og=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Xh.exports=$1(),Xh.exports}var ag;function H1(){if(ag)return yu;ag=1;var i=q1();return yu.createRoot=i.createRoot,yu.hydrateRoot=i.hydrateRoot,yu}var W1=H1();/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G1=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n_=(...i)=>i.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var K1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q1=Xe.forwardRef(({color:i="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:o="",children:l,iconNode:h,...f},g)=>Xe.createElement("svg",{ref:g,...K1,width:e,height:e,stroke:i,strokeWidth:s?Number(t)*24/Number(e):t,className:n_("lucide",o),...f},[...h.map(([y,w])=>Xe.createElement(y,w)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bt=(i,e)=>{const t=Xe.forwardRef(({className:s,...o},l)=>Xe.createElement(Q1,{ref:l,iconNode:e,className:n_(`lucide-${G1(i)}`,s),...o}));return t.displayName=`${i}`,t};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r_=Bt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X1=Bt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y1=Bt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pd=Bt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J1=Bt("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z1=Bt("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zh=Bt("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ew=Bt("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ed=Bt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const td=Bt("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nd=Bt("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tw=Bt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nw=Bt("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rw=Bt("Undo2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _u=Bt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iw=Bt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var no={},rd={exports:{}},id,lg;function sw(){if(lg)return id;lg=1;var i="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return id=i,id}var sd,ug;function ow(){if(ug)return sd;ug=1;var i=sw();function e(){}function t(){}return t.resetWarningCache=e,sd=function(){function s(h,f,g,y,w,E){if(E!==i){var I=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw I.name="Invariant Violation",I}}s.isRequired=s;function o(){return s}var l={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:o,element:s,elementType:s,instanceOf:o,node:s,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:t,resetWarningCache:e};return l.PropTypes=l,l},sd}var cg;function i_(){return cg||(cg=1,rd.exports=ow()()),rd.exports}var od,hg;function s_(){return hg||(hg=1,od={L:1,M:0,Q:3,H:2}),od}var ad,dg;function o_(){return dg||(dg=1,ad={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8}),ad}var ld,fg;function aw(){if(fg)return ld;fg=1;var i=o_();function e(t){this.mode=i.MODE_8BIT_BYTE,this.data=t}return e.prototype={getLength:function(t){return this.data.length},write:function(t){for(var s=0;s<this.data.length;s++)t.put(this.data.charCodeAt(s),8)}},ld=e,ld}var ud,pg;function lw(){if(pg)return ud;pg=1;var i=s_();function e(t,s){this.totalCount=t,this.dataCount=s}return e.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],e.getRSBlocks=function(t,s){var o=e.getRsBlockTable(t,s);if(o==null)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+s);for(var l=o.length/3,h=new Array,f=0;f<l;f++)for(var g=o[f*3+0],y=o[f*3+1],w=o[f*3+2],E=0;E<g;E++)h.push(new e(y,w));return h},e.getRsBlockTable=function(t,s){switch(s){case i.L:return e.RS_BLOCK_TABLE[(t-1)*4+0];case i.M:return e.RS_BLOCK_TABLE[(t-1)*4+1];case i.Q:return e.RS_BLOCK_TABLE[(t-1)*4+2];case i.H:return e.RS_BLOCK_TABLE[(t-1)*4+3];default:return}},ud=e,ud}var cd,mg;function uw(){if(mg)return cd;mg=1;function i(){this.buffer=new Array,this.length=0}return i.prototype={get:function(e){var t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)==1},put:function(e,t){for(var s=0;s<t;s++)this.putBit((e>>>t-s-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},cd=i,cd}var hd,gg;function a_(){if(gg)return hd;gg=1;for(var i={glog:function(t){if(t<1)throw new Error("glog("+t+")");return i.LOG_TABLE[t]},gexp:function(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return i.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},e=0;e<8;e++)i.EXP_TABLE[e]=1<<e;for(var e=8;e<256;e++)i.EXP_TABLE[e]=i.EXP_TABLE[e-4]^i.EXP_TABLE[e-5]^i.EXP_TABLE[e-6]^i.EXP_TABLE[e-8];for(var e=0;e<255;e++)i.LOG_TABLE[i.EXP_TABLE[e]]=e;return hd=i,hd}var dd,yg;function l_(){if(yg)return dd;yg=1;var i=a_();function e(t,s){if(t.length==null)throw new Error(t.length+"/"+s);for(var o=0;o<t.length&&t[o]==0;)o++;this.num=new Array(t.length-o+s);for(var l=0;l<t.length-o;l++)this.num[l]=t[l+o]}return e.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var s=new Array(this.getLength()+t.getLength()-1),o=0;o<this.getLength();o++)for(var l=0;l<t.getLength();l++)s[o+l]^=i.gexp(i.glog(this.get(o))+i.glog(t.get(l)));return new e(s,0)},mod:function(t){if(this.getLength()-t.getLength()<0)return this;for(var s=i.glog(this.get(0))-i.glog(t.get(0)),o=new Array(this.getLength()),l=0;l<this.getLength();l++)o[l]=this.get(l);for(var l=0;l<t.getLength();l++)o[l]^=i.gexp(i.glog(t.get(l))+s);return new e(o,0).mod(t)}},dd=e,dd}var fd,_g;function cw(){if(_g)return fd;_g=1;var i=o_(),e=l_(),t=a_(),s={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},o={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(l){for(var h=l<<10;o.getBCHDigit(h)-o.getBCHDigit(o.G15)>=0;)h^=o.G15<<o.getBCHDigit(h)-o.getBCHDigit(o.G15);return(l<<10|h)^o.G15_MASK},getBCHTypeNumber:function(l){for(var h=l<<12;o.getBCHDigit(h)-o.getBCHDigit(o.G18)>=0;)h^=o.G18<<o.getBCHDigit(h)-o.getBCHDigit(o.G18);return l<<12|h},getBCHDigit:function(l){for(var h=0;l!=0;)h++,l>>>=1;return h},getPatternPosition:function(l){return o.PATTERN_POSITION_TABLE[l-1]},getMask:function(l,h,f){switch(l){case s.PATTERN000:return(h+f)%2==0;case s.PATTERN001:return h%2==0;case s.PATTERN010:return f%3==0;case s.PATTERN011:return(h+f)%3==0;case s.PATTERN100:return(Math.floor(h/2)+Math.floor(f/3))%2==0;case s.PATTERN101:return h*f%2+h*f%3==0;case s.PATTERN110:return(h*f%2+h*f%3)%2==0;case s.PATTERN111:return(h*f%3+(h+f)%2)%2==0;default:throw new Error("bad maskPattern:"+l)}},getErrorCorrectPolynomial:function(l){for(var h=new e([1],0),f=0;f<l;f++)h=h.multiply(new e([1,t.gexp(f)],0));return h},getLengthInBits:function(l,h){if(1<=h&&h<10)switch(l){case i.MODE_NUMBER:return 10;case i.MODE_ALPHA_NUM:return 9;case i.MODE_8BIT_BYTE:return 8;case i.MODE_KANJI:return 8;default:throw new Error("mode:"+l)}else if(h<27)switch(l){case i.MODE_NUMBER:return 12;case i.MODE_ALPHA_NUM:return 11;case i.MODE_8BIT_BYTE:return 16;case i.MODE_KANJI:return 10;default:throw new Error("mode:"+l)}else if(h<41)switch(l){case i.MODE_NUMBER:return 14;case i.MODE_ALPHA_NUM:return 13;case i.MODE_8BIT_BYTE:return 16;case i.MODE_KANJI:return 12;default:throw new Error("mode:"+l)}else throw new Error("type:"+h)},getLostPoint:function(l){for(var h=l.getModuleCount(),f=0,g=0;g<h;g++)for(var y=0;y<h;y++){for(var w=0,E=l.isDark(g,y),I=-1;I<=1;I++)if(!(g+I<0||h<=g+I))for(var L=-1;L<=1;L++)y+L<0||h<=y+L||I==0&&L==0||E==l.isDark(g+I,y+L)&&w++;w>5&&(f+=3+w-5)}for(var g=0;g<h-1;g++)for(var y=0;y<h-1;y++){var $=0;l.isDark(g,y)&&$++,l.isDark(g+1,y)&&$++,l.isDark(g,y+1)&&$++,l.isDark(g+1,y+1)&&$++,($==0||$==4)&&(f+=3)}for(var g=0;g<h;g++)for(var y=0;y<h-6;y++)l.isDark(g,y)&&!l.isDark(g,y+1)&&l.isDark(g,y+2)&&l.isDark(g,y+3)&&l.isDark(g,y+4)&&!l.isDark(g,y+5)&&l.isDark(g,y+6)&&(f+=40);for(var y=0;y<h;y++)for(var g=0;g<h-6;g++)l.isDark(g,y)&&!l.isDark(g+1,y)&&l.isDark(g+2,y)&&l.isDark(g+3,y)&&l.isDark(g+4,y)&&!l.isDark(g+5,y)&&l.isDark(g+6,y)&&(f+=40);for(var q=0,y=0;y<h;y++)for(var g=0;g<h;g++)l.isDark(g,y)&&q++;var H=Math.abs(100*q/h/h-50)/5;return f+=H*10,f}};return fd=o,fd}var pd,vg;function hw(){if(vg)return pd;vg=1;var i=aw(),e=lw(),t=uw(),s=cw(),o=l_();function l(f,g){this.typeNumber=f,this.errorCorrectLevel=g,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var h=l.prototype;return h.addData=function(f){var g=new i(f);this.dataList.push(g),this.dataCache=null},h.isDark=function(f,g){if(f<0||this.moduleCount<=f||g<0||this.moduleCount<=g)throw new Error(f+","+g);return this.modules[f][g]},h.getModuleCount=function(){return this.moduleCount},h.make=function(){if(this.typeNumber<1){var f=1;for(f=1;f<40;f++){for(var g=e.getRSBlocks(f,this.errorCorrectLevel),y=new t,w=0,E=0;E<g.length;E++)w+=g[E].dataCount;for(var E=0;E<this.dataList.length;E++){var I=this.dataList[E];y.put(I.mode,4),y.put(I.getLength(),s.getLengthInBits(I.mode,f)),I.write(y)}if(y.getLengthInBits()<=w*8)break}this.typeNumber=f}this.makeImpl(!1,this.getBestMaskPattern())},h.makeImpl=function(f,g){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var y=0;y<this.moduleCount;y++){this.modules[y]=new Array(this.moduleCount);for(var w=0;w<this.moduleCount;w++)this.modules[y][w]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(f,g),this.typeNumber>=7&&this.setupTypeNumber(f),this.dataCache==null&&(this.dataCache=l.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,g)},h.setupPositionProbePattern=function(f,g){for(var y=-1;y<=7;y++)if(!(f+y<=-1||this.moduleCount<=f+y))for(var w=-1;w<=7;w++)g+w<=-1||this.moduleCount<=g+w||(0<=y&&y<=6&&(w==0||w==6)||0<=w&&w<=6&&(y==0||y==6)||2<=y&&y<=4&&2<=w&&w<=4?this.modules[f+y][g+w]=!0:this.modules[f+y][g+w]=!1)},h.getBestMaskPattern=function(){for(var f=0,g=0,y=0;y<8;y++){this.makeImpl(!0,y);var w=s.getLostPoint(this);(y==0||f>w)&&(f=w,g=y)}return g},h.createMovieClip=function(f,g,y){var w=f.createEmptyMovieClip(g,y),E=1;this.make();for(var I=0;I<this.modules.length;I++)for(var L=I*E,$=0;$<this.modules[I].length;$++){var q=$*E,H=this.modules[I][$];H&&(w.beginFill(0,100),w.moveTo(q,L),w.lineTo(q+E,L),w.lineTo(q+E,L+E),w.lineTo(q,L+E),w.endFill())}return w},h.setupTimingPattern=function(){for(var f=8;f<this.moduleCount-8;f++)this.modules[f][6]==null&&(this.modules[f][6]=f%2==0);for(var g=8;g<this.moduleCount-8;g++)this.modules[6][g]==null&&(this.modules[6][g]=g%2==0)},h.setupPositionAdjustPattern=function(){for(var f=s.getPatternPosition(this.typeNumber),g=0;g<f.length;g++)for(var y=0;y<f.length;y++){var w=f[g],E=f[y];if(this.modules[w][E]==null)for(var I=-2;I<=2;I++)for(var L=-2;L<=2;L++)I==-2||I==2||L==-2||L==2||I==0&&L==0?this.modules[w+I][E+L]=!0:this.modules[w+I][E+L]=!1}},h.setupTypeNumber=function(f){for(var g=s.getBCHTypeNumber(this.typeNumber),y=0;y<18;y++){var w=!f&&(g>>y&1)==1;this.modules[Math.floor(y/3)][y%3+this.moduleCount-8-3]=w}for(var y=0;y<18;y++){var w=!f&&(g>>y&1)==1;this.modules[y%3+this.moduleCount-8-3][Math.floor(y/3)]=w}},h.setupTypeInfo=function(f,g){for(var y=this.errorCorrectLevel<<3|g,w=s.getBCHTypeInfo(y),E=0;E<15;E++){var I=!f&&(w>>E&1)==1;E<6?this.modules[E][8]=I:E<8?this.modules[E+1][8]=I:this.modules[this.moduleCount-15+E][8]=I}for(var E=0;E<15;E++){var I=!f&&(w>>E&1)==1;E<8?this.modules[8][this.moduleCount-E-1]=I:E<9?this.modules[8][15-E-1+1]=I:this.modules[8][15-E-1]=I}this.modules[this.moduleCount-8][8]=!f},h.mapData=function(f,g){for(var y=-1,w=this.moduleCount-1,E=7,I=0,L=this.moduleCount-1;L>0;L-=2)for(L==6&&L--;;){for(var $=0;$<2;$++)if(this.modules[w][L-$]==null){var q=!1;I<f.length&&(q=(f[I]>>>E&1)==1);var H=s.getMask(g,w,L-$);H&&(q=!q),this.modules[w][L-$]=q,E--,E==-1&&(I++,E=7)}if(w+=y,w<0||this.moduleCount<=w){w-=y,y=-y;break}}},l.PAD0=236,l.PAD1=17,l.createData=function(f,g,y){for(var w=e.getRSBlocks(f,g),E=new t,I=0;I<y.length;I++){var L=y[I];E.put(L.mode,4),E.put(L.getLength(),s.getLengthInBits(L.mode,f)),L.write(E)}for(var $=0,I=0;I<w.length;I++)$+=w[I].dataCount;if(E.getLengthInBits()>$*8)throw new Error("code length overflow. ("+E.getLengthInBits()+">"+$*8+")");for(E.getLengthInBits()+4<=$*8&&E.put(0,4);E.getLengthInBits()%8!=0;)E.putBit(!1);for(;!(E.getLengthInBits()>=$*8||(E.put(l.PAD0,8),E.getLengthInBits()>=$*8));)E.put(l.PAD1,8);return l.createBytes(E,w)},l.createBytes=function(f,g){for(var y=0,w=0,E=0,I=new Array(g.length),L=new Array(g.length),$=0;$<g.length;$++){var q=g[$].dataCount,H=g[$].totalCount-q;w=Math.max(w,q),E=Math.max(E,H),I[$]=new Array(q);for(var Z=0;Z<I[$].length;Z++)I[$][Z]=255&f.buffer[Z+y];y+=q;var se=s.getErrorCorrectPolynomial(H),fe=new o(I[$],se.getLength()-1),Te=fe.mod(se);L[$]=new Array(se.getLength()-1);for(var Z=0;Z<L[$].length;Z++){var De=Z+Te.getLength()-L[$].length;L[$][Z]=De>=0?Te.get(De):0}}for(var Ce=0,Z=0;Z<g.length;Z++)Ce+=g[Z].totalCount;for(var k=new Array(Ce),A=0,Z=0;Z<w;Z++)for(var $=0;$<g.length;$++)Z<I[$].length&&(k[A++]=I[$][Z]);for(var Z=0;Z<E;Z++)for(var $=0;$<g.length;$++)Z<L[$].length&&(k[A++]=L[$][Z]);return k},pd=l,pd}var vu={},wg;function dw(){if(wg)return vu;wg=1,Object.defineProperty(vu,"__esModule",{value:!0});var i=Object.assign||function(y){for(var w=1;w<arguments.length;w++){var E=arguments[w];for(var I in E)Object.prototype.hasOwnProperty.call(E,I)&&(y[I]=E[I])}return y},e=i_(),t=l(e),s=$a(),o=l(s);function l(y){return y&&y.__esModule?y:{default:y}}function h(y,w){var E={};for(var I in y)w.indexOf(I)>=0||Object.prototype.hasOwnProperty.call(y,I)&&(E[I]=y[I]);return E}var f={bgColor:t.default.oneOfType([t.default.object,t.default.string]).isRequired,bgD:t.default.string.isRequired,fgColor:t.default.oneOfType([t.default.object,t.default.string]).isRequired,fgD:t.default.string.isRequired,size:t.default.number.isRequired,title:t.default.string,viewBoxSize:t.default.number.isRequired,xmlns:t.default.string},g=(0,s.forwardRef)(function(y,w){var E=y.bgColor,I=y.bgD,L=y.fgD,$=y.fgColor,q=y.size,H=y.title,Z=y.viewBoxSize,se=y.xmlns,fe=se===void 0?"http://www.w3.org/2000/svg":se,Te=h(y,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return o.default.createElement("svg",i({},Te,{height:q,ref:w,viewBox:"0 0 "+Z+" "+Z,width:q,xmlns:fe}),H?o.default.createElement("title",null,H):null,o.default.createElement("path",{d:I,fill:E}),o.default.createElement("path",{d:L,fill:$}))});return g.displayName="QRCodeSvg",g.propTypes=f,vu.default=g,vu}var Eg;function fw(){if(Eg)return no;Eg=1,Object.defineProperty(no,"__esModule",{value:!0}),no.QRCode=void 0;var i=Object.assign||function(q){for(var H=1;H<arguments.length;H++){var Z=arguments[H];for(var se in Z)Object.prototype.hasOwnProperty.call(Z,se)&&(q[se]=Z[se])}return q},e=i_(),t=E(e),s=s_(),o=E(s),l=hw(),h=E(l),f=$a(),g=E(f),y=dw(),w=E(y);function E(q){return q&&q.__esModule?q:{default:q}}function I(q,H){var Z={};for(var se in q)H.indexOf(se)>=0||Object.prototype.hasOwnProperty.call(q,se)&&(Z[se]=q[se]);return Z}var L={bgColor:t.default.oneOfType([t.default.object,t.default.string]),fgColor:t.default.oneOfType([t.default.object,t.default.string]),level:t.default.string,size:t.default.number,value:t.default.string.isRequired},$=(0,f.forwardRef)(function(q,H){var Z=q.bgColor,se=Z===void 0?"#FFFFFF":Z,fe=q.fgColor,Te=fe===void 0?"#000000":fe,De=q.level,Ce=De===void 0?"L":De,k=q.size,A=k===void 0?256:k,R=q.value,D=I(q,["bgColor","fgColor","level","size","value"]),x=new h.default(-1,o.default[Ce]);x.addData(R),x.make();var M=x.modules;return g.default.createElement(w.default,i({},D,{bgColor:se,bgD:M.map(function(C,Le){return C.map(function(Je,rt){return Je?"":"M "+rt+" "+Le+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:Te,fgD:M.map(function(C,Le){return C.map(function(Je,rt){return Je?"M "+rt+" "+Le+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:H,size:A,viewBoxSize:M.length}))});return no.QRCode=$,$.displayName="QRCode",$.propTypes=L,no.default=$,no}var pw=fw();const mw=b1(pw),gw=()=>{};var Tg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u_=function(i){const e=[];let t=0;for(let s=0;s<i.length;s++){let o=i.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},yw=function(i){const e=[];let t=0,s=0;for(;t<i.length;){const o=i[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const l=i[t++];e[s++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=i[t++],h=i[t++],f=i[t++],g=((o&7)<<18|(l&63)<<12|(h&63)<<6|f&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const l=i[t++],h=i[t++];e[s++]=String.fromCharCode((o&15)<<12|(l&63)<<6|h&63)}}return e.join("")},c_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<i.length;o+=3){const l=i[o],h=o+1<i.length,f=h?i[o+1]:0,g=o+2<i.length,y=g?i[o+2]:0,w=l>>2,E=(l&3)<<4|f>>4;let I=(f&15)<<2|y>>6,L=y&63;g||(L=64,h||(I=64)),s.push(t[w],t[E],t[I],t[L])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(u_(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):yw(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<i.length;){const l=t[i.charAt(o++)],f=o<i.length?t[i.charAt(o)]:0;++o;const y=o<i.length?t[i.charAt(o)]:64;++o;const E=o<i.length?t[i.charAt(o)]:64;if(++o,l==null||f==null||y==null||E==null)throw new _w;const I=l<<2|f>>4;if(s.push(I),y!==64){const L=f<<4&240|y>>2;if(s.push(L),E!==64){const $=y<<6&192|E;s.push($)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class _w extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const vw=function(i){const e=u_(i);return c_.encodeByteArray(e,!0)},Uu=function(i){return vw(i).replace(/\./g,"")},h_=function(i){try{return c_.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ww(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ew=()=>ww().__FIREBASE_DEFAULTS__,Tw=()=>{if(typeof process>"u"||typeof Tg>"u")return;const i=Tg.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},Iw=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&h_(i[1]);return e&&JSON.parse(e)},ic=()=>{try{return gw()||Ew()||Tw()||Iw()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},d_=i=>{var e,t;return(t=(e=ic())==null?void 0:e.emulatorHosts)==null?void 0:t[i]},Sw=i=>{const e=d_(i);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},f_=()=>{var i;return(i=ic())==null?void 0:i.config},p_=i=>{var e;return(e=ic())==null?void 0:e[`_${i}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eo(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function m_(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rw(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=i.iat||0,l=i.sub||i.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...i};return[Uu(JSON.stringify(t)),Uu(JSON.stringify(h)),""].join(".")}const Pa={};function Cw(){const i={prod:[],emulator:[]};for(const e of Object.keys(Pa))Pa[e]?i.emulator.push(e):i.prod.push(e);return i}function Pw(i){let e=document.getElementById(i),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),t=!0),{created:t,element:e}}let Ig=!1;function g_(i,e){if(typeof window>"u"||typeof document>"u"||!Eo(window.location.host)||Pa[i]===e||Pa[i]||Ig)return;Pa[i]=e;function t(I){return`__firebase__banner__${I}`}const s="__firebase__banner",l=Cw().prod.length>0;function h(){const I=document.getElementById(s);I&&I.remove()}function f(I){I.style.display="flex",I.style.background="#7faaf0",I.style.position="fixed",I.style.bottom="5px",I.style.left="5px",I.style.padding=".5em",I.style.borderRadius="5px",I.style.alignItems="center"}function g(I,L){I.setAttribute("width","24"),I.setAttribute("id",L),I.setAttribute("height","24"),I.setAttribute("viewBox","0 0 24 24"),I.setAttribute("fill","none"),I.style.marginLeft="-6px"}function y(){const I=document.createElement("span");return I.style.cursor="pointer",I.style.marginLeft="16px",I.style.fontSize="24px",I.innerHTML=" &times;",I.onclick=()=>{Ig=!0,h()},I}function w(I,L){I.setAttribute("id",L),I.innerText="Learn more",I.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",I.setAttribute("target","__blank"),I.style.paddingLeft="5px",I.style.textDecoration="underline"}function E(){const I=Pw(s),L=t("text"),$=document.getElementById(L)||document.createElement("span"),q=t("learnmore"),H=document.getElementById(q)||document.createElement("a"),Z=t("preprendIcon"),se=document.getElementById(Z)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(I.created){const fe=I.element;f(fe),w(H,q);const Te=y();g(se,Z),fe.append(se,$,H,Te),document.body.appendChild(fe)}l?($.innerText="Preview backend disconnected.",se.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(se.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,$.innerText="Preview backend running in this workspace."),$.setAttribute("id",L)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function kw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(jt())}function xw(){var e;const i=(e=ic())==null?void 0:e.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Nw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Dw(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function Vw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Ow(){const i=jt();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function Lw(){return!xw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Mw(){try{return typeof indexedDB=="object"}catch{return!1}}function bw(){return new Promise((i,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),i(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uw="FirebaseError";class xr extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=Uw,Object.setPrototypeOf(this,xr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qa.prototype.create)}}class qa{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],h=l?Fw(l,s):"Error",f=`${this.serviceName}: ${h} (${o}).`;return new xr(o,f,s)}}function Fw(i,e){return i.replace(jw,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const jw=/\{\$([^}]+)}/g;function Bw(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function as(i,e){if(i===e)return!0;const t=Object.keys(i),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const l=i[o],h=e[o];if(Sg(l)&&Sg(h)){if(!as(l,h))return!1}else if(l!==h)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function Sg(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ha(i){const e=[];for(const[t,s]of Object.entries(i))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function zw(i,e){const t=new $w(i,e);return t.subscribe.bind(t)}class $w{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");qw(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=md),o.error===void 0&&(o.error=md),o.complete===void 0&&(o.complete=md);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function qw(i,e){if(typeof i!="object"||i===null)return!1;for(const t of e)if(t in i&&typeof i[t]=="function")return!0;return!1}function md(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xt(i){return i&&i._delegate?i._delegate:i}class ls{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ns="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new Aw;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Gw(e))try{this.getOrInitializeService({instanceIdentifier:ns})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});s.resolve(l)}catch{}}}}clearInstance(e=ns){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ns){return this.instances.has(e)}getOptions(e=ns){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,h]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);s===f&&h.resolve(o)}return o}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const l=this.instances.get(s);return l&&e(l,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:Ww(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=ns){return this.component?this.component.multipleInstances?e:ns:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Ww(i){return i===ns?void 0:i}function Gw(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Hw(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ke;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(ke||(ke={}));const Qw={debug:ke.DEBUG,verbose:ke.VERBOSE,info:ke.INFO,warn:ke.WARN,error:ke.ERROR,silent:ke.SILENT},Xw=ke.INFO,Yw={[ke.DEBUG]:"log",[ke.VERBOSE]:"log",[ke.INFO]:"info",[ke.WARN]:"warn",[ke.ERROR]:"error"},Jw=(i,e,...t)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),o=Yw[e];if(o)console[o](`[${s}]  ${i.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class tf{constructor(e){this.name=e,this._logLevel=Xw,this._logHandler=Jw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Qw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ke.DEBUG,...e),this._logHandler(this,ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ke.VERBOSE,...e),this._logHandler(this,ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ke.INFO,...e),this._logHandler(this,ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ke.WARN,...e),this._logHandler(this,ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ke.ERROR,...e),this._logHandler(this,ke.ERROR,...e)}}const Zw=(i,e)=>e.some(t=>i instanceof t);let Ag,Rg;function eE(){return Ag||(Ag=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function tE(){return Rg||(Rg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const y_=new WeakMap,kd=new WeakMap,__=new WeakMap,gd=new WeakMap,nf=new WeakMap;function nE(i){const e=new Promise((t,s)=>{const o=()=>{i.removeEventListener("success",l),i.removeEventListener("error",h)},l=()=>{t(fi(i.result)),o()},h=()=>{s(i.error),o()};i.addEventListener("success",l),i.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&y_.set(t,i)}).catch(()=>{}),nf.set(e,i),e}function rE(i){if(kd.has(i))return;const e=new Promise((t,s)=>{const o=()=>{i.removeEventListener("complete",l),i.removeEventListener("error",h),i.removeEventListener("abort",h)},l=()=>{t(),o()},h=()=>{s(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",l),i.addEventListener("error",h),i.addEventListener("abort",h)});kd.set(i,e)}let xd={get(i,e,t){if(i instanceof IDBTransaction){if(e==="done")return kd.get(i);if(e==="objectStoreNames")return i.objectStoreNames||__.get(i);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return fi(i[e])},set(i,e,t){return i[e]=t,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function iE(i){xd=i(xd)}function sE(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=i.call(yd(this),e,...t);return __.set(s,e.sort?e.sort():[e]),fi(s)}:tE().includes(i)?function(...e){return i.apply(yd(this),e),fi(y_.get(this))}:function(...e){return fi(i.apply(yd(this),e))}}function oE(i){return typeof i=="function"?sE(i):(i instanceof IDBTransaction&&rE(i),Zw(i,eE())?new Proxy(i,xd):i)}function fi(i){if(i instanceof IDBRequest)return nE(i);if(gd.has(i))return gd.get(i);const e=oE(i);return e!==i&&(gd.set(i,e),nf.set(e,i)),e}const yd=i=>nf.get(i);function aE(i,e,{blocked:t,upgrade:s,blocking:o,terminated:l}={}){const h=indexedDB.open(i,e),f=fi(h);return s&&h.addEventListener("upgradeneeded",g=>{s(fi(h.result),g.oldVersion,g.newVersion,fi(h.transaction),g)}),t&&h.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),f.then(g=>{l&&g.addEventListener("close",()=>l()),o&&g.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),f}const lE=["get","getKey","getAll","getAllKeys","count"],uE=["put","add","delete","clear"],_d=new Map;function Cg(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(_d.get(e))return _d.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=uE.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||lE.includes(t)))return;const l=async function(h,...f){const g=this.transaction(h,o?"readwrite":"readonly");let y=g.store;return s&&(y=y.index(f.shift())),(await Promise.all([y[t](...f),o&&g.done]))[0]};return _d.set(e,l),l}iE(i=>({...i,get:(e,t,s)=>Cg(e,t)||i.get(e,t,s),has:(e,t)=>!!Cg(e,t)||i.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(hE(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function hE(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Nd="@firebase/app",Pg="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ar=new tf("@firebase/app"),dE="@firebase/app-compat",fE="@firebase/analytics-compat",pE="@firebase/analytics",mE="@firebase/app-check-compat",gE="@firebase/app-check",yE="@firebase/auth",_E="@firebase/auth-compat",vE="@firebase/database",wE="@firebase/data-connect",EE="@firebase/database-compat",TE="@firebase/functions",IE="@firebase/functions-compat",SE="@firebase/installations",AE="@firebase/installations-compat",RE="@firebase/messaging",CE="@firebase/messaging-compat",PE="@firebase/performance",kE="@firebase/performance-compat",xE="@firebase/remote-config",NE="@firebase/remote-config-compat",DE="@firebase/storage",VE="@firebase/storage-compat",OE="@firebase/firestore",LE="@firebase/ai",ME="@firebase/firestore-compat",bE="firebase",UE="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dd="[DEFAULT]",FE={[Nd]:"fire-core",[dE]:"fire-core-compat",[pE]:"fire-analytics",[fE]:"fire-analytics-compat",[gE]:"fire-app-check",[mE]:"fire-app-check-compat",[yE]:"fire-auth",[_E]:"fire-auth-compat",[vE]:"fire-rtdb",[wE]:"fire-data-connect",[EE]:"fire-rtdb-compat",[TE]:"fire-fn",[IE]:"fire-fn-compat",[SE]:"fire-iid",[AE]:"fire-iid-compat",[RE]:"fire-fcm",[CE]:"fire-fcm-compat",[PE]:"fire-perf",[kE]:"fire-perf-compat",[xE]:"fire-rc",[NE]:"fire-rc-compat",[DE]:"fire-gcs",[VE]:"fire-gcs-compat",[OE]:"fire-fst",[ME]:"fire-fst-compat",[LE]:"fire-vertex","fire-js":"fire-js",[bE]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fu=new Map,jE=new Map,Vd=new Map;function kg(i,e){try{i.container.addComponent(e)}catch(t){Ar.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,t)}}function po(i){const e=i.name;if(Vd.has(e))return Ar.debug(`There were multiple attempts to register component ${e}.`),!1;Vd.set(e,i);for(const t of Fu.values())kg(t,i);for(const t of jE.values())kg(t,i);return!0}function rf(i,e){const t=i.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),i.container.getProvider(e)}function kn(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BE={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},pi=new qa("app","Firebase",BE);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new ls("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw pi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const To=UE;function v_(i,e={}){let t=i;typeof e!="object"&&(e={name:e});const s={name:Dd,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw pi.create("bad-app-name",{appName:String(o)});if(t||(t=f_()),!t)throw pi.create("no-options");const l=Fu.get(o);if(l){if(as(t,l.options)&&as(s,l.config))return l;throw pi.create("duplicate-app",{appName:o})}const h=new Kw(o);for(const g of Vd.values())h.addComponent(g);const f=new zE(t,s,h);return Fu.set(o,f),f}function w_(i=Dd){const e=Fu.get(i);if(!e&&i===Dd&&f_())return v_();if(!e)throw pi.create("no-app",{appName:i});return e}function mi(i,e,t){let s=FE[i]??i;t&&(s+=`-${t}`);const o=s.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const h=[`Unable to register library "${s}" with version "${e}":`];o&&h.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&l&&h.push("and"),l&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ar.warn(h.join(" "));return}po(new ls(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $E="firebase-heartbeat-database",qE=1,Oa="firebase-heartbeat-store";let vd=null;function E_(){return vd||(vd=aE($E,qE,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(Oa)}catch(t){console.warn(t)}}}}).catch(i=>{throw pi.create("idb-open",{originalErrorMessage:i.message})})),vd}async function HE(i){try{const t=(await E_()).transaction(Oa),s=await t.objectStore(Oa).get(T_(i));return await t.done,s}catch(e){if(e instanceof xr)Ar.warn(e.message);else{const t=pi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ar.warn(t.message)}}}async function xg(i,e){try{const s=(await E_()).transaction(Oa,"readwrite");await s.objectStore(Oa).put(e,T_(i)),await s.done}catch(t){if(t instanceof xr)Ar.warn(t.message);else{const s=pi.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Ar.warn(s.message)}}}function T_(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WE=1024,GE=30;class KE{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new XE(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Ng();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(h=>h.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>GE){const h=YE(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Ar.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Ng(),{heartbeatsToSend:s,unsentEntries:o}=QE(this._heartbeatsCache.heartbeats),l=Uu(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Ar.warn(t),""}}}function Ng(){return new Date().toISOString().substring(0,10)}function QE(i,e=WE){const t=[];let s=i.slice();for(const o of i){const l=t.find(h=>h.agent===o.agent);if(l){if(l.dates.push(o.date),Dg(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Dg(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class XE{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Mw()?bw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await HE(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return xg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return xg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Dg(i){return Uu(JSON.stringify({version:2,heartbeats:i})).length}function YE(i){if(i.length===0)return-1;let e=0,t=i[0].date;for(let s=1;s<i.length;s++)i[s].date<t&&(t=i[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JE(i){po(new ls("platform-logger",e=>new cE(e),"PRIVATE")),po(new ls("heartbeat",e=>new KE(e),"PRIVATE")),mi(Nd,Pg,i),mi(Nd,Pg,"esm2020"),mi("fire-js","")}JE("");var ZE="firebase",eT="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */mi(ZE,eT,"app");var Vg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var gi,I_;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,A){function R(){}R.prototype=A.prototype,k.F=A.prototype,k.prototype=new R,k.prototype.constructor=k,k.D=function(D,x,M){for(var C=Array(arguments.length-2),Le=2;Le<arguments.length;Le++)C[Le-2]=arguments[Le];return A.prototype[x].apply(D,C)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(k,A,R){R||(R=0);const D=Array(16);if(typeof A=="string")for(var x=0;x<16;++x)D[x]=A.charCodeAt(R++)|A.charCodeAt(R++)<<8|A.charCodeAt(R++)<<16|A.charCodeAt(R++)<<24;else for(x=0;x<16;++x)D[x]=A[R++]|A[R++]<<8|A[R++]<<16|A[R++]<<24;A=k.g[0],R=k.g[1],x=k.g[2];let M=k.g[3],C;C=A+(M^R&(x^M))+D[0]+3614090360&4294967295,A=R+(C<<7&4294967295|C>>>25),C=M+(x^A&(R^x))+D[1]+3905402710&4294967295,M=A+(C<<12&4294967295|C>>>20),C=x+(R^M&(A^R))+D[2]+606105819&4294967295,x=M+(C<<17&4294967295|C>>>15),C=R+(A^x&(M^A))+D[3]+3250441966&4294967295,R=x+(C<<22&4294967295|C>>>10),C=A+(M^R&(x^M))+D[4]+4118548399&4294967295,A=R+(C<<7&4294967295|C>>>25),C=M+(x^A&(R^x))+D[5]+1200080426&4294967295,M=A+(C<<12&4294967295|C>>>20),C=x+(R^M&(A^R))+D[6]+2821735955&4294967295,x=M+(C<<17&4294967295|C>>>15),C=R+(A^x&(M^A))+D[7]+4249261313&4294967295,R=x+(C<<22&4294967295|C>>>10),C=A+(M^R&(x^M))+D[8]+1770035416&4294967295,A=R+(C<<7&4294967295|C>>>25),C=M+(x^A&(R^x))+D[9]+2336552879&4294967295,M=A+(C<<12&4294967295|C>>>20),C=x+(R^M&(A^R))+D[10]+4294925233&4294967295,x=M+(C<<17&4294967295|C>>>15),C=R+(A^x&(M^A))+D[11]+2304563134&4294967295,R=x+(C<<22&4294967295|C>>>10),C=A+(M^R&(x^M))+D[12]+1804603682&4294967295,A=R+(C<<7&4294967295|C>>>25),C=M+(x^A&(R^x))+D[13]+4254626195&4294967295,M=A+(C<<12&4294967295|C>>>20),C=x+(R^M&(A^R))+D[14]+2792965006&4294967295,x=M+(C<<17&4294967295|C>>>15),C=R+(A^x&(M^A))+D[15]+1236535329&4294967295,R=x+(C<<22&4294967295|C>>>10),C=A+(x^M&(R^x))+D[1]+4129170786&4294967295,A=R+(C<<5&4294967295|C>>>27),C=M+(R^x&(A^R))+D[6]+3225465664&4294967295,M=A+(C<<9&4294967295|C>>>23),C=x+(A^R&(M^A))+D[11]+643717713&4294967295,x=M+(C<<14&4294967295|C>>>18),C=R+(M^A&(x^M))+D[0]+3921069994&4294967295,R=x+(C<<20&4294967295|C>>>12),C=A+(x^M&(R^x))+D[5]+3593408605&4294967295,A=R+(C<<5&4294967295|C>>>27),C=M+(R^x&(A^R))+D[10]+38016083&4294967295,M=A+(C<<9&4294967295|C>>>23),C=x+(A^R&(M^A))+D[15]+3634488961&4294967295,x=M+(C<<14&4294967295|C>>>18),C=R+(M^A&(x^M))+D[4]+3889429448&4294967295,R=x+(C<<20&4294967295|C>>>12),C=A+(x^M&(R^x))+D[9]+568446438&4294967295,A=R+(C<<5&4294967295|C>>>27),C=M+(R^x&(A^R))+D[14]+3275163606&4294967295,M=A+(C<<9&4294967295|C>>>23),C=x+(A^R&(M^A))+D[3]+4107603335&4294967295,x=M+(C<<14&4294967295|C>>>18),C=R+(M^A&(x^M))+D[8]+1163531501&4294967295,R=x+(C<<20&4294967295|C>>>12),C=A+(x^M&(R^x))+D[13]+2850285829&4294967295,A=R+(C<<5&4294967295|C>>>27),C=M+(R^x&(A^R))+D[2]+4243563512&4294967295,M=A+(C<<9&4294967295|C>>>23),C=x+(A^R&(M^A))+D[7]+1735328473&4294967295,x=M+(C<<14&4294967295|C>>>18),C=R+(M^A&(x^M))+D[12]+2368359562&4294967295,R=x+(C<<20&4294967295|C>>>12),C=A+(R^x^M)+D[5]+4294588738&4294967295,A=R+(C<<4&4294967295|C>>>28),C=M+(A^R^x)+D[8]+2272392833&4294967295,M=A+(C<<11&4294967295|C>>>21),C=x+(M^A^R)+D[11]+1839030562&4294967295,x=M+(C<<16&4294967295|C>>>16),C=R+(x^M^A)+D[14]+4259657740&4294967295,R=x+(C<<23&4294967295|C>>>9),C=A+(R^x^M)+D[1]+2763975236&4294967295,A=R+(C<<4&4294967295|C>>>28),C=M+(A^R^x)+D[4]+1272893353&4294967295,M=A+(C<<11&4294967295|C>>>21),C=x+(M^A^R)+D[7]+4139469664&4294967295,x=M+(C<<16&4294967295|C>>>16),C=R+(x^M^A)+D[10]+3200236656&4294967295,R=x+(C<<23&4294967295|C>>>9),C=A+(R^x^M)+D[13]+681279174&4294967295,A=R+(C<<4&4294967295|C>>>28),C=M+(A^R^x)+D[0]+3936430074&4294967295,M=A+(C<<11&4294967295|C>>>21),C=x+(M^A^R)+D[3]+3572445317&4294967295,x=M+(C<<16&4294967295|C>>>16),C=R+(x^M^A)+D[6]+76029189&4294967295,R=x+(C<<23&4294967295|C>>>9),C=A+(R^x^M)+D[9]+3654602809&4294967295,A=R+(C<<4&4294967295|C>>>28),C=M+(A^R^x)+D[12]+3873151461&4294967295,M=A+(C<<11&4294967295|C>>>21),C=x+(M^A^R)+D[15]+530742520&4294967295,x=M+(C<<16&4294967295|C>>>16),C=R+(x^M^A)+D[2]+3299628645&4294967295,R=x+(C<<23&4294967295|C>>>9),C=A+(x^(R|~M))+D[0]+4096336452&4294967295,A=R+(C<<6&4294967295|C>>>26),C=M+(R^(A|~x))+D[7]+1126891415&4294967295,M=A+(C<<10&4294967295|C>>>22),C=x+(A^(M|~R))+D[14]+2878612391&4294967295,x=M+(C<<15&4294967295|C>>>17),C=R+(M^(x|~A))+D[5]+4237533241&4294967295,R=x+(C<<21&4294967295|C>>>11),C=A+(x^(R|~M))+D[12]+1700485571&4294967295,A=R+(C<<6&4294967295|C>>>26),C=M+(R^(A|~x))+D[3]+2399980690&4294967295,M=A+(C<<10&4294967295|C>>>22),C=x+(A^(M|~R))+D[10]+4293915773&4294967295,x=M+(C<<15&4294967295|C>>>17),C=R+(M^(x|~A))+D[1]+2240044497&4294967295,R=x+(C<<21&4294967295|C>>>11),C=A+(x^(R|~M))+D[8]+1873313359&4294967295,A=R+(C<<6&4294967295|C>>>26),C=M+(R^(A|~x))+D[15]+4264355552&4294967295,M=A+(C<<10&4294967295|C>>>22),C=x+(A^(M|~R))+D[6]+2734768916&4294967295,x=M+(C<<15&4294967295|C>>>17),C=R+(M^(x|~A))+D[13]+1309151649&4294967295,R=x+(C<<21&4294967295|C>>>11),C=A+(x^(R|~M))+D[4]+4149444226&4294967295,A=R+(C<<6&4294967295|C>>>26),C=M+(R^(A|~x))+D[11]+3174756917&4294967295,M=A+(C<<10&4294967295|C>>>22),C=x+(A^(M|~R))+D[2]+718787259&4294967295,x=M+(C<<15&4294967295|C>>>17),C=R+(M^(x|~A))+D[9]+3951481745&4294967295,k.g[0]=k.g[0]+A&4294967295,k.g[1]=k.g[1]+(x+(C<<21&4294967295|C>>>11))&4294967295,k.g[2]=k.g[2]+x&4294967295,k.g[3]=k.g[3]+M&4294967295}s.prototype.v=function(k,A){A===void 0&&(A=k.length);const R=A-this.blockSize,D=this.C;let x=this.h,M=0;for(;M<A;){if(x==0)for(;M<=R;)o(this,k,M),M+=this.blockSize;if(typeof k=="string"){for(;M<A;)if(D[x++]=k.charCodeAt(M++),x==this.blockSize){o(this,D),x=0;break}}else for(;M<A;)if(D[x++]=k[M++],x==this.blockSize){o(this,D),x=0;break}}this.h=x,this.o+=A},s.prototype.A=function(){var k=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);k[0]=128;for(var A=1;A<k.length-8;++A)k[A]=0;A=this.o*8;for(var R=k.length-8;R<k.length;++R)k[R]=A&255,A/=256;for(this.v(k),k=Array(16),A=0,R=0;R<4;++R)for(let D=0;D<32;D+=8)k[A++]=this.g[R]>>>D&255;return k};function l(k,A){var R=f;return Object.prototype.hasOwnProperty.call(R,k)?R[k]:R[k]=A(k)}function h(k,A){this.h=A;const R=[];let D=!0;for(let x=k.length-1;x>=0;x--){const M=k[x]|0;D&&M==A||(R[x]=M,D=!1)}this.g=R}var f={};function g(k){return-128<=k&&k<128?l(k,function(A){return new h([A|0],A<0?-1:0)}):new h([k|0],k<0?-1:0)}function y(k){if(isNaN(k)||!isFinite(k))return E;if(k<0)return H(y(-k));const A=[];let R=1;for(let D=0;k>=R;D++)A[D]=k/R|0,R*=4294967296;return new h(A,0)}function w(k,A){if(k.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(k.charAt(0)=="-")return H(w(k.substring(1),A));if(k.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=y(Math.pow(A,8));let D=E;for(let M=0;M<k.length;M+=8){var x=Math.min(8,k.length-M);const C=parseInt(k.substring(M,M+x),A);x<8?(x=y(Math.pow(A,x)),D=D.j(x).add(y(C))):(D=D.j(R),D=D.add(y(C)))}return D}var E=g(0),I=g(1),L=g(16777216);i=h.prototype,i.m=function(){if(q(this))return-H(this).m();let k=0,A=1;for(let R=0;R<this.g.length;R++){const D=this.i(R);k+=(D>=0?D:4294967296+D)*A,A*=4294967296}return k},i.toString=function(k){if(k=k||10,k<2||36<k)throw Error("radix out of range: "+k);if($(this))return"0";if(q(this))return"-"+H(this).toString(k);const A=y(Math.pow(k,6));var R=this;let D="";for(;;){const x=Te(R,A).g;R=Z(R,x.j(A));let M=((R.g.length>0?R.g[0]:R.h)>>>0).toString(k);if(R=x,$(R))return M+D;for(;M.length<6;)M="0"+M;D=M+D}},i.i=function(k){return k<0?0:k<this.g.length?this.g[k]:this.h};function $(k){if(k.h!=0)return!1;for(let A=0;A<k.g.length;A++)if(k.g[A]!=0)return!1;return!0}function q(k){return k.h==-1}i.l=function(k){return k=Z(this,k),q(k)?-1:$(k)?0:1};function H(k){const A=k.g.length,R=[];for(let D=0;D<A;D++)R[D]=~k.g[D];return new h(R,~k.h).add(I)}i.abs=function(){return q(this)?H(this):this},i.add=function(k){const A=Math.max(this.g.length,k.g.length),R=[];let D=0;for(let x=0;x<=A;x++){let M=D+(this.i(x)&65535)+(k.i(x)&65535),C=(M>>>16)+(this.i(x)>>>16)+(k.i(x)>>>16);D=C>>>16,M&=65535,C&=65535,R[x]=C<<16|M}return new h(R,R[R.length-1]&-2147483648?-1:0)};function Z(k,A){return k.add(H(A))}i.j=function(k){if($(this)||$(k))return E;if(q(this))return q(k)?H(this).j(H(k)):H(H(this).j(k));if(q(k))return H(this.j(H(k)));if(this.l(L)<0&&k.l(L)<0)return y(this.m()*k.m());const A=this.g.length+k.g.length,R=[];for(var D=0;D<2*A;D++)R[D]=0;for(D=0;D<this.g.length;D++)for(let x=0;x<k.g.length;x++){const M=this.i(D)>>>16,C=this.i(D)&65535,Le=k.i(x)>>>16,Je=k.i(x)&65535;R[2*D+2*x]+=C*Je,se(R,2*D+2*x),R[2*D+2*x+1]+=M*Je,se(R,2*D+2*x+1),R[2*D+2*x+1]+=C*Le,se(R,2*D+2*x+1),R[2*D+2*x+2]+=M*Le,se(R,2*D+2*x+2)}for(k=0;k<A;k++)R[k]=R[2*k+1]<<16|R[2*k];for(k=A;k<2*A;k++)R[k]=0;return new h(R,0)};function se(k,A){for(;(k[A]&65535)!=k[A];)k[A+1]+=k[A]>>>16,k[A]&=65535,A++}function fe(k,A){this.g=k,this.h=A}function Te(k,A){if($(A))throw Error("division by zero");if($(k))return new fe(E,E);if(q(k))return A=Te(H(k),A),new fe(H(A.g),H(A.h));if(q(A))return A=Te(k,H(A)),new fe(H(A.g),A.h);if(k.g.length>30){if(q(k)||q(A))throw Error("slowDivide_ only works with positive integers.");for(var R=I,D=A;D.l(k)<=0;)R=De(R),D=De(D);var x=Ce(R,1),M=Ce(D,1);for(D=Ce(D,2),R=Ce(R,2);!$(D);){var C=M.add(D);C.l(k)<=0&&(x=x.add(R),M=C),D=Ce(D,1),R=Ce(R,1)}return A=Z(k,x.j(A)),new fe(x,A)}for(x=E;k.l(A)>=0;){for(R=Math.max(1,Math.floor(k.m()/A.m())),D=Math.ceil(Math.log(R)/Math.LN2),D=D<=48?1:Math.pow(2,D-48),M=y(R),C=M.j(A);q(C)||C.l(k)>0;)R-=D,M=y(R),C=M.j(A);$(M)&&(M=I),x=x.add(M),k=Z(k,C)}return new fe(x,k)}i.B=function(k){return Te(this,k).h},i.and=function(k){const A=Math.max(this.g.length,k.g.length),R=[];for(let D=0;D<A;D++)R[D]=this.i(D)&k.i(D);return new h(R,this.h&k.h)},i.or=function(k){const A=Math.max(this.g.length,k.g.length),R=[];for(let D=0;D<A;D++)R[D]=this.i(D)|k.i(D);return new h(R,this.h|k.h)},i.xor=function(k){const A=Math.max(this.g.length,k.g.length),R=[];for(let D=0;D<A;D++)R[D]=this.i(D)^k.i(D);return new h(R,this.h^k.h)};function De(k){const A=k.g.length+1,R=[];for(let D=0;D<A;D++)R[D]=k.i(D)<<1|k.i(D-1)>>>31;return new h(R,k.h)}function Ce(k,A){const R=A>>5;A%=32;const D=k.g.length-R,x=[];for(let M=0;M<D;M++)x[M]=A>0?k.i(M+R)>>>A|k.i(M+R+1)<<32-A:k.i(M+R);return new h(x,k.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,I_=s,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=y,h.fromString=w,gi=h}).apply(typeof Vg<"u"?Vg:typeof self<"u"?self:typeof window<"u"?window:{});var wu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var S_,Sa,A_,Cu,Od,R_,C_,P_;(function(){var i,e=Object.defineProperty;function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof wu=="object"&&wu];for(var m=0;m<u.length;++m){var _=u[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=t(this);function o(u,m){if(m)e:{var _=s;u=u.split(".");for(var T=0;T<u.length-1;T++){var U=u[T];if(!(U in _))break e;_=_[U]}u=u[u.length-1],T=_[u],m=m(T),m!=T&&m!=null&&e(_,u,{configurable:!0,writable:!0,value:m})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(m){var _=[],T;for(T in m)Object.prototype.hasOwnProperty.call(m,T)&&_.push([T,m[T]]);return _}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},h=this||self;function f(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function g(u,m,_){return u.call.apply(u.bind,arguments)}function y(u,m,_){return y=g,y.apply(null,arguments)}function w(u,m){var _=Array.prototype.slice.call(arguments,1);return function(){var T=_.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function E(u,m){function _(){}_.prototype=m.prototype,u.Z=m.prototype,u.prototype=new _,u.prototype.constructor=u,u.Ob=function(T,U,z){for(var ee=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)ee[Ae-2]=arguments[Ae];return m.prototype[U].apply(T,ee)}}var I=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function L(u){const m=u.length;if(m>0){const _=Array(m);for(let T=0;T<m;T++)_[T]=u[T];return _}return[]}function $(u,m){for(let T=1;T<arguments.length;T++){const U=arguments[T];var _=typeof U;if(_=_!="object"?_:U?Array.isArray(U)?"array":_:"null",_=="array"||_=="object"&&typeof U.length=="number"){_=u.length||0;const z=U.length||0;u.length=_+z;for(let ee=0;ee<z;ee++)u[_+ee]=U[ee]}else u.push(U)}}class q{constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function H(u){h.setTimeout(()=>{throw u},0)}function Z(){var u=k;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class se{constructor(){this.h=this.g=null}add(m,_){const T=fe.get();T.set(m,_),this.h?this.h.next=T:this.g=T,this.h=T}}var fe=new q(()=>new Te,u=>u.reset());class Te{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let De,Ce=!1,k=new se,A=()=>{const u=Promise.resolve(void 0);De=()=>{u.then(R)}};function R(){for(var u;u=Z();){try{u.h.call(u.g)}catch(_){H(_)}var m=fe;m.j(u),m.h<100&&(m.h++,u.next=m.g,m.g=u)}Ce=!1}function D(){this.u=this.u,this.C=this.C}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function x(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}x.prototype.h=function(){this.defaultPrevented=!0};var M=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};h.addEventListener("test",_,m),h.removeEventListener("test",_,m)}catch{}return u})();function C(u){return/^[\s\xa0]*$/.test(u)}function Le(u,m){x.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,m)}E(Le,x),Le.prototype.init=function(u,m){const _=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget,m||(_=="mouseover"?m=u.fromElement:_=="mouseout"&&(m=u.toElement)),this.relatedTarget=m,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&Le.Z.h.call(this)},Le.prototype.h=function(){Le.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Je="closure_listenable_"+(Math.random()*1e6|0),rt=0;function je(u,m,_,T,U){this.listener=u,this.proxy=null,this.src=m,this.type=_,this.capture=!!T,this.ha=U,this.key=++rt,this.da=this.fa=!1}function te(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function de(u,m,_){for(const T in u)m.call(_,u[T],T,u)}function j(u,m){for(const _ in u)m.call(void 0,u[_],_,u)}function N(u){const m={};for(const _ in u)m[_]=u[_];return m}const W="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ce(u,m){let _,T;for(let U=1;U<arguments.length;U++){T=arguments[U];for(_ in T)u[_]=T[_];for(let z=0;z<W.length;z++)_=W[z],Object.prototype.hasOwnProperty.call(T,_)&&(u[_]=T[_])}}function le(u){this.src=u,this.g={},this.h=0}le.prototype.add=function(u,m,_,T,U){const z=u.toString();u=this.g[z],u||(u=this.g[z]=[],this.h++);const ee=ve(u,m,T,U);return ee>-1?(m=u[ee],_||(m.fa=!1)):(m=new je(m,this.src,z,!!T,U),m.fa=_,u.push(m)),m};function _e(u,m){const _=m.type;if(_ in u.g){var T=u.g[_],U=Array.prototype.indexOf.call(T,m,void 0),z;(z=U>=0)&&Array.prototype.splice.call(T,U,1),z&&(te(m),u.g[_].length==0&&(delete u.g[_],u.h--))}}function ve(u,m,_,T){for(let U=0;U<u.length;++U){const z=u[U];if(!z.da&&z.listener==m&&z.capture==!!_&&z.ha==T)return U}return-1}var Ie="closure_lm_"+(Math.random()*1e6|0),Me={};function $e(u,m,_,T,U){if(Array.isArray(m)){for(let z=0;z<m.length;z++)$e(u,m[z],_,T,U);return null}return _=xo(_),u&&u[Je]?u.J(m,_,f(T)?!!T.capture:!1,U):zt(u,m,_,!1,T,U)}function zt(u,m,_,T,U,z){if(!m)throw Error("Invalid event type");const ee=f(U)?!!U.capture:!!U;let Ae=gs(u);if(Ae||(u[Ie]=Ae=new le(u)),_=Ae.add(m,_,T,ee,z),_.proxy)return _;if(T=ps(),_.proxy=T,T.src=u,T.listener=_,u.addEventListener)M||(U=ee),U===void 0&&(U=!1),u.addEventListener(m.toString(),T,U);else if(u.attachEvent)u.attachEvent(ms(m.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return _}function ps(){function u(_){return m.call(u.src,u.listener,_)}const m=nl;return u}function ko(u,m,_,T,U){if(Array.isArray(m))for(var z=0;z<m.length;z++)ko(u,m[z],_,T,U);else T=f(T)?!!T.capture:!!T,_=xo(_),u&&u[Je]?(u=u.i,z=String(m).toString(),z in u.g&&(m=u.g[z],_=ve(m,_,T,U),_>-1&&(te(m[_]),Array.prototype.splice.call(m,_,1),m.length==0&&(delete u.g[z],u.h--)))):u&&(u=gs(u))&&(m=u.g[m.toString()],u=-1,m&&(u=ve(m,_,T,U)),(_=u>-1?m[u]:null)&&Nr(_))}function Nr(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[Je])_e(m.i,u);else{var _=u.type,T=u.proxy;m.removeEventListener?m.removeEventListener(_,T,u.capture):m.detachEvent?m.detachEvent(ms(_),T):m.addListener&&m.removeListener&&m.removeListener(T),(_=gs(m))?(_e(_,u),_.h==0&&(_.src=null,m[Ie]=null)):te(u)}}}function ms(u){return u in Me?Me[u]:Me[u]="on"+u}function nl(u,m){if(u.da)u=!0;else{m=new Le(m,this);const _=u.listener,T=u.ha||u.src;u.fa&&Nr(u),u=_.call(T,m)}return u}function gs(u){return u=u[Ie],u instanceof le?u:null}var Pi="__closure_events_fn_"+(Math.random()*1e9>>>0);function xo(u){return typeof u=="function"?u:(u[Pi]||(u[Pi]=function(m){return u.handleEvent(m)}),u[Pi])}function ct(){D.call(this),this.i=new le(this),this.M=this,this.G=null}E(ct,D),ct.prototype[Je]=!0,ct.prototype.removeEventListener=function(u,m,_,T){ko(this,u,m,_,T)};function ot(u,m){var _,T=u.G;if(T)for(_=[];T;T=T.G)_.push(T);if(u=u.M,T=m.type||m,typeof m=="string")m=new x(m,u);else if(m instanceof x)m.target=m.target||u;else{var U=m;m=new x(T,u),ce(m,U)}U=!0;let z,ee;if(_)for(ee=_.length-1;ee>=0;ee--)z=m.g=_[ee],U=vn(z,T,!0,m)&&U;if(z=m.g=u,U=vn(z,T,!0,m)&&U,U=vn(z,T,!1,m)&&U,_)for(ee=0;ee<_.length;ee++)z=m.g=_[ee],U=vn(z,T,!1,m)&&U}ct.prototype.N=function(){if(ct.Z.N.call(this),this.i){var u=this.i;for(const m in u.g){const _=u.g[m];for(let T=0;T<_.length;T++)te(_[T]);delete u.g[m],u.h--}}this.G=null},ct.prototype.J=function(u,m,_,T){return this.i.add(String(u),m,!1,_,T)},ct.prototype.K=function(u,m,_,T){return this.i.add(String(u),m,!0,_,T)};function vn(u,m,_,T){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();let U=!0;for(let z=0;z<m.length;++z){const ee=m[z];if(ee&&!ee.da&&ee.capture==_){const Ae=ee.listener,at=ee.ha||ee.src;ee.fa&&_e(u.i,ee),U=Ae.call(at,T)!==!1&&U}}return U&&!T.defaultPrevented}function No(u,m){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=y(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:h.setTimeout(u,m||0)}function Do(u){u.g=No(()=>{u.g=null,u.i&&(u.i=!1,Do(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class rl extends D{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Do(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Dr(u){D.call(this),this.h=u,this.g={}}E(Dr,D);var Vo=[];function ys(u){de(u.g,function(m,_){this.g.hasOwnProperty(_)&&Nr(m)},u),u.g={}}Dr.prototype.N=function(){Dr.Z.N.call(this),ys(this)},Dr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Vr=h.JSON.stringify,il=h.JSON.parse,ki=class{stringify(u){return h.JSON.stringify(u,void 0)}parse(u){return h.JSON.parse(u,void 0)}};function Or(){}function sl(){}var Lr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function _s(){x.call(this,"d")}E(_s,x);function Oo(){x.call(this,"c")}E(Oo,x);var wn={},vs=null;function Mr(){return vs=vs||new ct}wn.Ia="serverreachability";function ws(u){x.call(this,wn.Ia,u)}E(ws,x);function sr(u){const m=Mr();ot(m,new ws(m))}wn.STAT_EVENT="statevent";function or(u,m){x.call(this,wn.STAT_EVENT,u),this.stat=m}E(or,x);function it(u){const m=Mr();ot(m,new or(m,u))}wn.Ja="timingevent";function Lo(u,m){x.call(this,wn.Ja,u),this.size=m}E(Lo,x);function br(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){u()},m)}function Ur(){this.g=!0}Ur.prototype.ua=function(){this.g=!1};function ol(u,m,_,T,U,z){u.info(function(){if(u.g)if(z){var ee="",Ae=z.split("&");for(let ze=0;ze<Ae.length;ze++){var at=Ae[ze].split("=");if(at.length>1){const ht=at[0];at=at[1];const sn=ht.split("_");ee=sn.length>=2&&sn[1]=="type"?ee+(ht+"="+at+"&"):ee+(ht+"=redacted&")}}}else ee=null;else ee=z;return"XMLHTTP REQ ("+T+") [attempt "+U+"]: "+m+`
`+_+`
`+ee})}function al(u,m,_,T,U,z,ee){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+U+"]: "+m+`
`+_+`
`+z+" "+ee})}function Dn(u,m,_,T){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+xi(u,_)+(T?" "+T:"")})}function ll(u,m){u.info(function(){return"TIMEOUT: "+m})}Ur.prototype.info=function(){};function xi(u,m){if(!u.g)return m;if(!m)return null;try{const z=JSON.parse(m);if(z){for(u=0;u<z.length;u++)if(Array.isArray(z[u])){var _=z[u];if(!(_.length<2)){var T=_[1];if(Array.isArray(T)&&!(T.length<1)){var U=T[0];if(U!="noop"&&U!="stop"&&U!="close")for(let ee=1;ee<T.length;ee++)T[ee]=""}}}}return Vr(z)}catch{return m}}var Fr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},jr={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ul;function ar(){}E(ar,Or),ar.prototype.g=function(){return new XMLHttpRequest},ul=new ar;function Vn(u){return encodeURIComponent(String(u))}function Es(u){var m=1;u=u.split(":");const _=[];for(;m>0&&u.length;)_.push(u.shift()),m--;return u.length&&_.push(u.join(":")),_}function cn(u,m,_,T){this.j=u,this.i=m,this.l=_,this.S=T||1,this.V=new Dr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new cl}function cl(){this.i=null,this.g="",this.h=!1}var hl={},Mo={};function En(u,m,_){u.M=1,u.A=ur(hn(m)),u.u=_,u.R=!0,bo(u,null)}function bo(u,m){u.F=Date.now(),Ni(u),u.B=hn(u.A);var _=u.B,T=u.S;Array.isArray(T)||(T=[String(T)]),Go(_.i,"t",T),u.C=0,_=u.j.L,u.h=new cl,u.g=El(u.j,_?m:null,!u.u),u.P>0&&(u.O=new rl(y(u.Y,u,u.g),u.P)),m=u.V,_=u.g,T=u.ba;var U="readystatechange";Array.isArray(U)||(U&&(Vo[0]=U.toString()),U=Vo);for(let z=0;z<U.length;z++){const ee=$e(_,U[z],T||m.handleEvent,!1,m.h||m);if(!ee)break;m.g[ee.key]=ee}m=u.J?N(u.J):{},u.u?(u.v||(u.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,m)):(u.v="GET",u.g.ea(u.B,u.v,null,m)),sr(),ol(u.i,u.v,u.B,u.l,u.S,u.u)}cn.prototype.ba=function(u){u=u.target;const m=this.O;m&&jn(u)==3?m.j():this.Y(u)},cn.prototype.Y=function(u){try{if(u==this.g)e:{const Ae=jn(this.g),at=this.g.ya(),ze=this.g.ca();if(!(Ae<3)&&(Ae!=3||this.g&&(this.h.h||this.g.la()||vl(this.g)))){this.K||Ae!=4||at==7||(at==8||ze<=0?sr(3):sr(2)),Ts(this);var m=this.g.ca();this.X=m;var _=dl(this);if(this.o=m==200,al(this.i,this.v,this.B,this.l,this.S,Ae,m),this.o){if(this.U&&!this.L){t:{if(this.g){var T,U=this.g;if((T=U.g?U.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(T)){var z=T;break t}}z=null}if(u=z)Dn(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ge(this,u);else{this.o=!1,this.m=3,it(12),lr(this),Di(this);break e}}if(this.R){u=!0;let ht;for(;!this.K&&this.C<_.length;)if(ht=pl(this,_),ht==Mo){Ae==4&&(this.m=4,it(14),u=!1),Dn(this.i,this.l,null,"[Incomplete Response]");break}else if(ht==hl){this.m=4,it(15),Dn(this.i,this.l,_,"[Invalid Chunk]"),u=!1;break}else Dn(this.i,this.l,ht,null),Ge(this,ht);if(fl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ae!=4||_.length!=0||this.h.h||(this.m=1,it(16),u=!1),this.o=this.o&&u,!u)Dn(this.i,this.l,_,"[Invalid Chunked Response]"),lr(this),Di(this);else if(_.length>0&&!this.W){this.W=!0;var ee=this.j;ee.g==this&&ee.aa&&!ee.P&&(ee.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),Bi(ee),ee.P=!0,it(11))}}else Dn(this.i,this.l,_,null),Ge(this,_);Ae==4&&lr(this),this.o&&!this.K&&(Ae==4?Ds(this.j,this):(this.o=!1,Ni(this)))}else Qo(this.g),m==400&&_.indexOf("Unknown SID")>0?(this.m=3,it(12)):(this.m=0,it(13)),lr(this),Di(this)}}}catch{}finally{}};function dl(u){if(!fl(u))return u.g.la();const m=vl(u.g);if(m==="")return"";let _="";const T=m.length,U=jn(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return lr(u),Di(u),"";u.h.i=new h.TextDecoder}for(let z=0;z<T;z++)u.h.h=!0,_+=u.h.i.decode(m[z],{stream:!(U&&z==T-1)});return m.length=0,u.h.g+=_,u.C=0,u.h.g}function fl(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function pl(u,m){var _=u.C,T=m.indexOf(`
`,_);return T==-1?Mo:(_=Number(m.substring(_,T)),isNaN(_)?hl:(T+=1,T+_>m.length?Mo:(m=m.slice(T,T+_),u.C=T+_,m)))}cn.prototype.cancel=function(){this.K=!0,lr(this)};function Ni(u){u.T=Date.now()+u.H,Uo(u,u.H)}function Uo(u,m){if(u.D!=null)throw Error("WatchDog timer not null");u.D=br(y(u.aa,u),m)}function Ts(u){u.D&&(h.clearTimeout(u.D),u.D=null)}cn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(ll(this.i,this.B),this.M!=2&&(sr(),it(17)),lr(this),this.m=2,Di(this)):Uo(this,this.T-u)};function Di(u){u.j.I==0||u.K||Ds(u.j,u)}function lr(u){Ts(u);var m=u.O;m&&typeof m.dispose=="function"&&m.dispose(),u.O=null,ys(u.V),u.g&&(m=u.g,u.g=null,m.abort(),m.dispose())}function Ge(u,m){try{var _=u.j;if(_.I!=0&&(_.g==u||jo(_.h,u))){if(!u.L&&jo(_.h,u)&&_.I==3){try{var T=_.Ba.g.parse(m)}catch{T=null}if(Array.isArray(T)&&T.length==3){var U=T;if(U[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<u.F)Ns(_),nn(_);else break e;$n(_),it(18)}}else _.xa=U[1],0<_.xa-_.K&&U[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=br(y(_.Va,_),6e3));Vi(_.h)<=1&&_.ta&&(_.ta=void 0)}else rn(_,11)}else if((u.L||_.g==u)&&Ns(_),!C(m))for(U=_.Ba.g.parse(m),m=0;m<U.length;m++){let ze=U[m];const ht=ze[0];if(!(ht<=_.K))if(_.K=ht,ze=ze[1],_.I==2)if(ze[0]=="c"){_.M=ze[1],_.ba=ze[2];const sn=ze[3];sn!=null&&(_.ka=sn,_.j.info("VER="+_.ka));const pr=ze[4];pr!=null&&(_.za=pr,_.j.info("SVER="+_.za));const qn=ze[5];qn!=null&&typeof qn=="number"&&qn>0&&(T=1.5*qn,_.O=T,_.j.info("backChannelRequestTimeoutMs_="+T)),T=_;const Hn=u.g;if(Hn){const Ls=Hn.g?Hn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ls){var z=T.h;z.g||Ls.indexOf("spdy")==-1&&Ls.indexOf("quic")==-1&&Ls.indexOf("h2")==-1||(z.j=z.l,z.g=new Set,z.h&&(Ss(z,z.h),z.h=null))}if(T.G){const Jo=Hn.g?Hn.g.getResponseHeader("X-HTTP-Session-Id"):null;Jo&&(T.wa=Jo,Fe(T.J,T.G,Jo))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-u.F,_.j.info("Handshake RTT: "+_.T+"ms")),T=_;var ee=u;if(T.na=Yo(T,T.L?T.ba:null,T.W),ee.L){Oi(T.h,ee);var Ae=ee,at=T.O;at&&(Ae.H=at),Ae.D&&(Ts(Ae),Ni(Ae)),T.g=ee}else Dt(T);_.i.length>0&&fr(_)}else ze[0]!="stop"&&ze[0]!="close"||rn(_,7);else _.I==3&&(ze[0]=="stop"||ze[0]=="close"?ze[0]=="stop"?rn(_,7):ks(_):ze[0]!="noop"&&_.l&&_.l.qa(ze),_.A=0)}}sr(4)}catch{}}var Ac=class{constructor(u,m){this.g=u,this.map=m}};function Is(u){this.l=u||10,h.PerformanceNavigationTiming?(u=h.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Fo(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Vi(u){return u.h?1:u.g?u.g.size:0}function jo(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function Ss(u,m){u.g?u.g.add(m):u.h=m}function Oi(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}Is.prototype.cancel=function(){if(this.i=Zt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Zt(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const _ of u.g.values())m=m.concat(_.G);return m}return L(u.i)}var ml=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function en(u,m){if(u){u=u.split("&");for(let _=0;_<u.length;_++){const T=u[_].indexOf("=");let U,z=null;T>=0?(U=u[_].substring(0,T),z=u[_].substring(T+1)):U=u[_],m(U,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function On(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;u instanceof On?(this.l=u.l,Li(this,u.j),this.o=u.o,this.g=u.g,Ln(this,u.u),this.h=u.h,Br(this,Ko(u.i)),this.m=u.m):u&&(m=String(u).match(ml))?(this.l=!1,Li(this,m[1]||"",!0),this.o=Mi(m[2]||""),this.g=Mi(m[3]||"",!0),Ln(this,m[4]),this.h=Mi(m[5]||"",!0),Br(this,m[6]||"",!0),this.m=Mi(m[7]||"")):(this.l=!1,this.i=new Ve(null,this.l))}On.prototype.toString=function(){const u=[];var m=this.j;m&&u.push(bi(m,zo,!0),":");var _=this.g;return(_||m=="file")&&(u.push("//"),(m=this.o)&&u.push(bi(m,zo,!0),"@"),u.push(Vn(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&u.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(bi(_,_.charAt(0)=="/"?Ui:$o,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",bi(_,qo)),u.join("")},On.prototype.resolve=function(u){const m=hn(this);let _=!!u.j;_?Li(m,u.j):_=!!u.o,_?m.o=u.o:_=!!u.g,_?m.g=u.g:_=u.u!=null;var T=u.h;if(_)Ln(m,u.u);else if(_=!!u.h){if(T.charAt(0)!="/")if(this.g&&!this.h)T="/"+T;else{var U=m.h.lastIndexOf("/");U!=-1&&(T=m.h.slice(0,U+1)+T)}if(U=T,U==".."||U==".")T="";else if(U.indexOf("./")!=-1||U.indexOf("/.")!=-1){T=U.lastIndexOf("/",0)==0,U=U.split("/");const z=[];for(let ee=0;ee<U.length;){const Ae=U[ee++];Ae=="."?T&&ee==U.length&&z.push(""):Ae==".."?((z.length>1||z.length==1&&z[0]!="")&&z.pop(),T&&ee==U.length&&z.push("")):(z.push(Ae),T=!0)}T=z.join("/")}else T=U}return _?m.h=T:_=u.i.toString()!=="",_?Br(m,Ko(u.i)):_=!!u.m,_&&(m.m=u.m),m};function hn(u){return new On(u)}function Li(u,m,_){u.j=_?Mi(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function Ln(u,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);u.u=m}else u.u=null}function Br(u,m,_){m instanceof Ve?(u.i=m,Rs(u.i,u.l)):(_||(m=bi(m,Rc)),u.i=new Ve(m,u.l))}function Fe(u,m,_){u.i.set(m,_)}function ur(u){return Fe(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Mi(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function bi(u,m,_){return typeof u=="string"?(u=encodeURI(u).replace(m,Bo),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Bo(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var zo=/[#\/\?@]/g,$o=/[#\?:]/g,Ui=/[#\?]/g,Rc=/[#\?@]/g,qo=/#/g;function Ve(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function Mn(u){u.g||(u.g=new Map,u.h=0,u.i&&en(u.i,function(m,_){u.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}i=Ve.prototype,i.add=function(u,m){Mn(this),this.i=null,u=bn(this,u);let _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(m),this.h+=1,this};function Ho(u,m){Mn(u),m=bn(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function As(u,m){return Mn(u),m=bn(u,m),u.g.has(m)}i.forEach=function(u,m){Mn(this),this.g.forEach(function(_,T){_.forEach(function(U){u.call(m,U,T,this)},this)},this)};function Wo(u,m){Mn(u);let _=[];if(typeof m=="string")As(u,m)&&(_=_.concat(u.g.get(bn(u,m))));else for(u=Array.from(u.g.values()),m=0;m<u.length;m++)_=_.concat(u[m]);return _}i.set=function(u,m){return Mn(this),this.i=null,u=bn(this,u),As(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},i.get=function(u,m){return u?(u=Wo(this,u),u.length>0?String(u[0]):m):m};function Go(u,m,_){Ho(u,m),_.length>0&&(u.i=null,u.g.set(bn(u,m),L(_)),u.h+=_.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(let T=0;T<m.length;T++){var _=m[T];const U=Vn(_);_=Wo(this,_);for(let z=0;z<_.length;z++){let ee=U;_[z]!==""&&(ee+="="+Vn(_[z])),u.push(ee)}}return this.i=u.join("&")};function Ko(u){const m=new Ve;return m.i=u.i,u.g&&(m.g=new Map(u.g),m.h=u.h),m}function bn(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function Rs(u,m){m&&!u.j&&(Mn(u),u.i=null,u.g.forEach(function(_,T){const U=T.toLowerCase();T!=U&&(Ho(this,T),Go(this,U,_))},u)),u.j=m}function Un(u,m){const _=new Ur;if(h.Image){const T=new Image;T.onload=w(St,_,"TestLoadImage: loaded",!0,m,T),T.onerror=w(St,_,"TestLoadImage: error",!1,m,T),T.onabort=w(St,_,"TestLoadImage: abort",!1,m,T),T.ontimeout=w(St,_,"TestLoadImage: timeout",!1,m,T),h.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else m(!1)}function Fn(u,m){const _=new Ur,T=new AbortController,U=setTimeout(()=>{T.abort(),St(_,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:T.signal}).then(z=>{clearTimeout(U),z.ok?St(_,"TestPingServer: ok",!0,m):St(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(U),St(_,"TestPingServer: error",!1,m)})}function St(u,m,_,T,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),T(_)}catch{}}function Fi(){this.g=new ki}function cr(u){this.i=u.Sb||null,this.h=u.ab||!1}E(cr,Or),cr.prototype.g=function(){return new tn(this.i,this.h)};function tn(u,m){ct.call(this),this.H=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(tn,ct),i=tn.prototype,i.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=m,this.readyState=1,Tn(this)},i.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(m.body=u),(this.H||h).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,zr(this)),this.readyState=0},i.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Tn(this)),this.g&&(this.readyState=3,Tn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;gl(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function gl(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}i.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?zr(this):Tn(this),this.readyState==3&&gl(this)}},i.Oa=function(u){this.g&&(this.response=this.responseText=u,zr(this))},i.Na=function(u){this.g&&(this.response=u,zr(this))},i.ga=function(){this.g&&zr(this)};function zr(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Tn(u)}i.setRequestHeader=function(u,m){this.A.append(u,m)},i.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=m.next();return u.join(`\r
`)};function Tn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(tn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function yl(u){let m="";return de(u,function(_,T){m+=T,m+=":",m+=_,m+=`\r
`}),m}function Cs(u,m,_){e:{for(T in _){var T=!1;break e}T=!0}T||(_=yl(_),typeof u=="string"?_!=null&&Vn(_):Fe(u,m,_))}function qe(u){ct.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(qe,ct);var _l=/^https?$/i,Cc=["POST","PUT"];i=qe.prototype,i.Fa=function(u){this.H=u},i.ea=function(u,m,_,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ul.g(),this.g.onreadystatechange=I(y(this.Ca,this));try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(z){$r(this,z);return}if(u=_||"",_=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var U in T)_.set(U,T[U]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const z of T.keys())_.set(z,T.get(z));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(_.keys()).find(z=>z.toLowerCase()=="content-type"),U=h.FormData&&u instanceof h.FormData,!(Array.prototype.indexOf.call(Cc,m,void 0)>=0)||T||U||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[z,ee]of _)this.g.setRequestHeader(z,ee);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(z){$r(this,z)}};function $r(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.o=5,qr(u),dr(u)}function qr(u){u.A||(u.A=!0,ot(u,"complete"),ot(u,"error"))}i.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,ot(this,"complete"),ot(this,"abort"),dr(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),dr(this,!0)),qe.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?hr(this):this.Xa())},i.Xa=function(){hr(this)};function hr(u){if(u.h&&typeof l<"u"){if(u.v&&jn(u)==4)setTimeout(u.Ca.bind(u),0);else if(ot(u,"readystatechange"),jn(u)==4){u.h=!1;try{const z=u.ca();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var _;if(!(_=m)){var T;if(T=z===0){let ee=String(u.D).match(ml)[1]||null;!ee&&h.self&&h.self.location&&(ee=h.self.location.protocol.slice(0,-1)),T=!_l.test(ee?ee.toLowerCase():"")}_=T}if(_)ot(u,"complete"),ot(u,"success");else{u.o=6;try{var U=jn(u)>2?u.g.statusText:""}catch{U=""}u.l=U+" ["+u.ca()+"]",qr(u)}}finally{dr(u)}}}}function dr(u,m){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const _=u.g;u.g=null,m||ot(u,"ready");try{_.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function jn(u){return u.g?u.g.readyState:0}i.ca=function(){try{return jn(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),il(m)}};function vl(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Qo(u){const m={};u=(u.g&&jn(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(C(u[T]))continue;var _=Es(u[T]);const U=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const z=m[U]||[];m[U]=z,z.push(_)}j(m,function(T){return T.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Bn(u,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||m}function Ps(u){this.za=0,this.i=[],this.j=new Ur,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Bn("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Bn("baseRetryDelayMs",5e3,u),this.Za=Bn("retryDelaySeedMs",1e4,u),this.Ta=Bn("forwardChannelMaxRetries",2,u),this.va=Bn("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Is(u&&u.concurrentRequestLimit),this.Ba=new Fi,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=Ps.prototype,i.ka=8,i.I=1,i.connect=function(u,m,_,T){it(0),this.W=u,this.H=m||{},_&&T!==void 0&&(this.H.OSID=_,this.H.OAID=T),this.F=this.X,this.J=Yo(this,null,this.W),fr(this)};function ks(u){if(xs(u),u.I==3){var m=u.V++,_=hn(u.J);if(Fe(_,"SID",u.M),Fe(_,"RID",m),Fe(_,"TYPE","terminate"),zn(u,_),m=new cn(u,u.j,m),m.M=2,m.A=ur(hn(_)),_=!1,h.navigator&&h.navigator.sendBeacon)try{_=h.navigator.sendBeacon(m.A.toString(),"")}catch{}!_&&h.Image&&(new Image().src=m.A,_=!0),_||(m.g=El(m.j,null),m.g.ea(m.A)),m.F=Date.now(),Ni(m)}zi(u)}function nn(u){u.g&&(Bi(u),u.g.cancel(),u.g=null)}function xs(u){nn(u),u.v&&(h.clearTimeout(u.v),u.v=null),Ns(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&h.clearTimeout(u.m),u.m=null)}function fr(u){if(!Fo(u.h)&&!u.m){u.m=!0;var m=u.Ea;De||A(),Ce||(De(),Ce=!0),k.add(m,u),u.D=0}}function wl(u,m){return Vi(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=m.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=br(y(u.Ea,u,m),Vs(u,u.D)),u.D++,!0)}i.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const U=new cn(this,this.j,u);let z=this.o;if(this.U&&(z?(z=N(z),ce(z,this.U)):z=this.U),this.u!==null||this.R||(U.J=z,z=null),this.S)e:{for(var m=0,_=0;_<this.i.length;_++){t:{var T=this.i[_];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(m+=T,m>4096){m=_;break e}if(m===4096||_===this.i.length-1){m=_+1;break e}}m=1e3}else m=1e3;m=Xo(this,U,m),_=hn(this.J),Fe(_,"RID",u),Fe(_,"CVER",22),this.G&&Fe(_,"X-HTTP-Session-Id",this.G),zn(this,_),z&&(this.R?m="headers="+Vn(yl(z))+"&"+m:this.u&&Cs(_,this.u,z)),Ss(this.h,U),this.Ra&&Fe(_,"TYPE","init"),this.S?(Fe(_,"$req",m),Fe(_,"SID","null"),U.U=!0,En(U,_,null)):En(U,_,m),this.I=2}}else this.I==3&&(u?ji(this,u):this.i.length==0||Fo(this.h)||ji(this))};function ji(u,m){var _;m?_=m.l:_=u.V++;const T=hn(u.J);Fe(T,"SID",u.M),Fe(T,"RID",_),Fe(T,"AID",u.K),zn(u,T),u.u&&u.o&&Cs(T,u.u,u.o),_=new cn(u,u.j,_,u.D+1),u.u===null&&(_.J=u.o),m&&(u.i=m.G.concat(u.i)),m=Xo(u,_,1e3),_.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Ss(u.h,_),En(_,T,m)}function zn(u,m){u.H&&de(u.H,function(_,T){Fe(m,T,_)}),u.l&&de({},function(_,T){Fe(m,T,_)})}function Xo(u,m,_){_=Math.min(u.i.length,_);const T=u.l?y(u.l.Ka,u.l,u):null;e:{var U=u.i;let Ae=-1;for(;;){const at=["count="+_];Ae==-1?_>0?(Ae=U[0].g,at.push("ofs="+Ae)):Ae=0:at.push("ofs="+Ae);let ze=!0;for(let ht=0;ht<_;ht++){var z=U[ht].g;const sn=U[ht].map;if(z-=Ae,z<0)Ae=Math.max(0,U[ht].g-100),ze=!1;else try{z="req"+z+"_"||"";try{var ee=sn instanceof Map?sn:Object.entries(sn);for(const[pr,qn]of ee){let Hn=qn;f(qn)&&(Hn=Vr(qn)),at.push(z+pr+"="+encodeURIComponent(Hn))}}catch(pr){throw at.push(z+"type="+encodeURIComponent("_badmap")),pr}}catch{T&&T(sn)}}if(ze){ee=at.join("&");break e}}ee=void 0}return u=u.i.splice(0,_),m.G=u,ee}function Dt(u){if(!u.g&&!u.v){u.Y=1;var m=u.Da;De||A(),Ce||(De(),Ce=!0),k.add(m,u),u.A=0}}function $n(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=br(y(u.Da,u),Vs(u,u.A)),u.A++,!0)}i.Da=function(){if(this.v=null,Hr(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=br(y(this.Wa,this),u)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,it(10),nn(this),Hr(this))};function Bi(u){u.B!=null&&(h.clearTimeout(u.B),u.B=null)}function Hr(u){u.g=new cn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var m=hn(u.na);Fe(m,"RID","rpc"),Fe(m,"SID",u.M),Fe(m,"AID",u.K),Fe(m,"CI",u.F?"0":"1"),!u.F&&u.ia&&Fe(m,"TO",u.ia),Fe(m,"TYPE","xmlhttp"),zn(u,m),u.u&&u.o&&Cs(m,u.u,u.o),u.O&&(u.g.H=u.O);var _=u.g;u=u.ba,_.M=1,_.A=ur(hn(m)),_.u=null,_.R=!0,bo(_,u)}i.Va=function(){this.C!=null&&(this.C=null,nn(this),$n(this),it(19))};function Ns(u){u.C!=null&&(h.clearTimeout(u.C),u.C=null)}function Ds(u,m){var _=null;if(u.g==m){Ns(u),Bi(u),u.g=null;var T=2}else if(jo(u.h,m))_=m.G,Oi(u.h,m),T=1;else return;if(u.I!=0){if(m.o)if(T==1){_=m.u?m.u.length:0,m=Date.now()-m.F;var U=u.D;T=Mr(),ot(T,new Lo(T,_)),fr(u)}else Dt(u);else if(U=m.m,U==3||U==0&&m.X>0||!(T==1&&wl(u,m)||T==2&&$n(u)))switch(_&&_.length>0&&(m=u.h,m.i=m.i.concat(_)),U){case 1:rn(u,5);break;case 4:rn(u,10);break;case 3:rn(u,6);break;default:rn(u,2)}}}function Vs(u,m){let _=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(_*=2),_*m}function rn(u,m){if(u.j.info("Error code "+m),m==2){var _=y(u.bb,u),T=u.Ua;const U=!T;T=new On(T||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Li(T,"https"),ur(T),U?Un(T.toString(),_):Fn(T.toString(),_)}else it(2);u.I=0,u.l&&u.l.pa(m),zi(u),xs(u)}i.bb=function(u){u?(this.j.info("Successfully pinged google.com"),it(2)):(this.j.info("Failed to ping google.com"),it(1))};function zi(u){if(u.I=0,u.ja=[],u.l){const m=Zt(u.h);(m.length!=0||u.i.length!=0)&&($(u.ja,m),$(u.ja,u.i),u.h.i.length=0,L(u.i),u.i.length=0),u.l.oa()}}function Yo(u,m,_){var T=_ instanceof On?hn(_):new On(_);if(T.g!="")m&&(T.g=m+"."+T.g),Ln(T,T.u);else{var U=h.location;T=U.protocol,m=m?m+"."+U.hostname:U.hostname,U=+U.port;const z=new On(null);T&&Li(z,T),m&&(z.g=m),U&&Ln(z,U),_&&(z.h=_),T=z}return _=u.G,m=u.wa,_&&m&&Fe(T,_,m),Fe(T,"VER",u.ka),zn(u,T),T}function El(u,m,_){if(m&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Aa&&!u.ma?new qe(new cr({ab:_})):new qe(u.ma),m.Fa(u.L),m}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Tl(){}i=Tl.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function Os(){}Os.prototype.g=function(u,m){return new At(u,m)};function At(u,m){ct.call(this),this.g=new Ps(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(u?u["X-WebChannel-Client-Profile"]=m.sa:u={"X-WebChannel-Client-Profile":m.sa}),this.g.U=u,(u=m&&m.Qb)&&!C(u)&&(this.g.u=u),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!C(m)&&(this.g.G=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new Wr(this)}E(At,ct),At.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},At.prototype.close=function(){ks(this.g)},At.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.v&&(_={},_.__data__=Vr(u),u=_);m.i.push(new Ac(m.Ya++,u)),m.I==3&&fr(m)},At.prototype.N=function(){this.g.l=null,delete this.j,ks(this.g),delete this.g,At.Z.N.call(this)};function Il(u){_s.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const _ in m){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}E(Il,_s);function Sl(){Oo.call(this),this.status=1}E(Sl,Oo);function Wr(u){this.g=u}E(Wr,Tl),Wr.prototype.ra=function(){ot(this.g,"a")},Wr.prototype.qa=function(u){ot(this.g,new Il(u))},Wr.prototype.pa=function(u){ot(this.g,new Sl)},Wr.prototype.oa=function(){ot(this.g,"b")},Os.prototype.createWebChannel=Os.prototype.g,At.prototype.send=At.prototype.o,At.prototype.open=At.prototype.m,At.prototype.close=At.prototype.close,P_=function(){return new Os},C_=function(){return Mr()},R_=wn,Od={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Fr.NO_ERROR=0,Fr.TIMEOUT=8,Fr.HTTP_ERROR=6,Cu=Fr,jr.COMPLETE="complete",A_=jr,sl.EventType=Lr,Lr.OPEN="a",Lr.CLOSE="b",Lr.ERROR="c",Lr.MESSAGE="d",ct.prototype.listen=ct.prototype.J,Sa=sl,qe.prototype.listenOnce=qe.prototype.K,qe.prototype.getLastError=qe.prototype.Ha,qe.prototype.getLastErrorCode=qe.prototype.ya,qe.prototype.getStatus=qe.prototype.ca,qe.prototype.getResponseJson=qe.prototype.La,qe.prototype.getResponseText=qe.prototype.la,qe.prototype.send=qe.prototype.ea,qe.prototype.setWithCredentials=qe.prototype.Fa,S_=qe}).apply(typeof wu<"u"?wu:typeof self<"u"?self:typeof window<"u"?window:{});const Og="@firebase/firestore",Lg="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ut.UNAUTHENTICATED=new Ut(null),Ut.GOOGLE_CREDENTIALS=new Ut("google-credentials-uid"),Ut.FIRST_PARTY=new Ut("first-party-uid"),Ut.MOCK_USER=new Ut("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Io="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const us=new tf("@firebase/firestore");function ro(){return us.logLevel}function re(i,...e){if(us.logLevel<=ke.DEBUG){const t=e.map(sf);us.debug(`Firestore (${Io}): ${i}`,...t)}}function Rr(i,...e){if(us.logLevel<=ke.ERROR){const t=e.map(sf);us.error(`Firestore (${Io}): ${i}`,...t)}}function mo(i,...e){if(us.logLevel<=ke.WARN){const t=e.map(sf);us.warn(`Firestore (${Io}): ${i}`,...t)}}function sf(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ye(i,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,k_(i,s,t)}function k_(i,e,t){let s=`FIRESTORE (${Io}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw Rr(s),new Error(s)}function Be(i,e,t,s){let o="Unexpected state";typeof t=="string"?o=t:s=t,i||k_(e,o,s)}function Re(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ie extends xr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class tT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Ut.UNAUTHENTICATED)))}shutdown(){}}class nT{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class rT{constructor(e){this.t=e,this.currentUser=Ut.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Be(this.o===void 0,42304);let s=this.i;const o=g=>this.i!==s?(s=this.i,t(g)):Promise.resolve();let l=new is;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new is,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const g=l;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},f=g=>{re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((g=>f(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?f(g):(re("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new is)}}),0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Be(typeof s.accessToken=="string",31837,{l:s}),new x_(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Be(e===null||typeof e=="string",2055,{h:e}),new Ut(e)}}class iT{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=Ut.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class sT{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new iT(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Ut.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Mg{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class oT{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,kn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Be(this.o===void 0,3512);const s=l=>{l.error!=null&&re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.m;return this.m=l.token,re("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const o=l=>{re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Mg(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Be(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Mg(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aT(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<i;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=aT(40);for(let l=0;l<o.length;++l)s.length<20&&o[l]<t&&(s+=e.charAt(o[l]%62))}return s}}function xe(i,e){return i<e?-1:i>e?1:0}function Ld(i,e){const t=Math.min(i.length,e.length);for(let s=0;s<t;s++){const o=i.charAt(s),l=e.charAt(s);if(o!==l)return wd(o)===wd(l)?xe(o,l):wd(o)?1:-1}return xe(i.length,e.length)}const lT=55296,uT=57343;function wd(i){const e=i.charCodeAt(0);return e>=lT&&e<=uT}function go(i,e,t){return i.length===e.length&&i.every(((s,o)=>t(s,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bg="__name__";class Xn{constructor(e,t,s){t===void 0?t=0:t>e.length&&ye(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&ye(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Xn.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Xn?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const l=Xn.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return xe(e.length,t.length)}static compareSegments(e,t){const s=Xn.isNumericId(e),o=Xn.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?Xn.extractNumericId(e).compare(Xn.extractNumericId(t)):Ld(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return gi.fromString(e.substring(4,e.length-2))}}class We extends Xn{construct(e,t,s){return new We(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new ie(G.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((o=>o.length>0)))}return new We(t)}static emptyPath(){return new We([])}}const cT=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class kt extends Xn{construct(e,t,s){return new kt(e,t,s)}static isValidIdentifier(e){return cT.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),kt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===bg}static keyField(){return new kt([bg])}static fromServerFormat(e){const t=[];let s="",o=0;const l=()=>{if(s.length===0)throw new ie(G.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let h=!1;for(;o<e.length;){const f=e[o];if(f==="\\"){if(o+1===e.length)throw new ie(G.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ie(G.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,o+=2}else f==="`"?(h=!h,o++):f!=="."||h?(s+=f,o++):(l(),o++)}if(l(),h)throw new ie(G.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new kt(t)}static emptyPath(){return new kt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(e){this.path=e}static fromPath(e){return new pe(We.fromString(e))}static fromName(e){return new pe(We.fromString(e).popFirst(5))}static empty(){return new pe(We.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&We.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return We.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new pe(new We(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N_(i,e,t){if(!t)throw new ie(G.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function hT(i,e,t,s){if(e===!0&&s===!0)throw new ie(G.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function Ug(i){if(!pe.isDocumentKey(i))throw new ie(G.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Fg(i){if(pe.isDocumentKey(i))throw new ie(G.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function D_(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function sc(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":ye(12329,{type:typeof i})}function ss(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new ie(G.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=sc(i);throw new ie(G.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mt(i,e){const t={typeString:i};return e&&(t.value=e),t}function Wa(i,e){if(!D_(i))throw new ie(G.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const o=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in i)){t=`JSON missing required field: '${s}'`;break}const h=i[s];if(o&&typeof h!==o){t=`JSON field '${s}' must be a ${o}.`;break}if(l!==void 0&&h!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new ie(G.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jg=-62135596800,Bg=1e6;class Ye{static now(){return Ye.fromMillis(Date.now())}static fromDate(e){return Ye.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*Bg);return new Ye(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ie(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ie(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<jg)throw new ie(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ie(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Bg}_compareTo(e){return this.seconds===e.seconds?xe(this.nanoseconds,e.nanoseconds):xe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ye._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Wa(e,Ye._jsonSchema))return new Ye(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-jg;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ye._jsonSchemaVersion="firestore/timestamp/1.0",Ye._jsonSchema={type:mt("string",Ye._jsonSchemaVersion),seconds:mt("number"),nanoseconds:mt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{static fromTimestamp(e){return new Se(e)}static min(){return new Se(new Ye(0,0))}static max(){return new Se(new Ye(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const La=-1;function dT(i,e){const t=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,o=Se.fromTimestamp(s===1e9?new Ye(t+1,0):new Ye(t,s));return new vi(o,pe.empty(),e)}function fT(i){return new vi(i.readTime,i.key,La)}class vi{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new vi(Se.min(),pe.empty(),La)}static max(){return new vi(Se.max(),pe.empty(),La)}}function pT(i,e){let t=i.readTime.compareTo(e.readTime);return t!==0?t:(t=pe.comparator(i.documentKey,e.documentKey),t!==0?t:xe(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class gT{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function So(i){if(i.code!==G.FAILED_PRECONDITION||i.message!==mT)throw i;re("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ye(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new K(((s,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof K?t:K.resolve(t)}catch(t){return K.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):K.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):K.reject(t)}static resolve(e){return new K(((t,s)=>{t(e)}))}static reject(e){return new K(((t,s)=>{s(e)}))}static waitFor(e){return new K(((t,s)=>{let o=0,l=0,h=!1;e.forEach((f=>{++o,f.next((()=>{++l,h&&l===o&&t()}),(g=>s(g)))})),h=!0,l===o&&t()}))}static or(e){let t=K.resolve(!1);for(const s of e)t=t.next((o=>o?K.resolve(o):s()));return t}static forEach(e,t){const s=[];return e.forEach(((o,l)=>{s.push(t.call(this,o,l))})),this.waitFor(s)}static mapArray(e,t){return new K(((s,o)=>{const l=e.length,h=new Array(l);let f=0;for(let g=0;g<l;g++){const y=g;t(e[y]).next((w=>{h[y]=w,++f,f===l&&s(h)}),(w=>o(w)))}}))}static doWhile(e,t){return new K(((s,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):s()};l()}))}}function yT(i){const e=i.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ao(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}oc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const af=-1;function ac(i){return i==null}function ju(i){return i===0&&1/i==-1/0}function _T(i){return typeof i=="number"&&Number.isInteger(i)&&!ju(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V_="";function vT(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=zg(e)),e=wT(i.get(t),e);return zg(e)}function wT(i,e){let t=e;const s=i.length;for(let o=0;o<s;o++){const l=i.charAt(o);switch(l){case"\0":t+="";break;case V_:t+="";break;default:t+=l}}return t}function zg(i){return i+V_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $g(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function Ri(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function O_(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e,t){this.comparator=e,this.root=t||Pt.EMPTY}insert(e,t){return new nt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Pt.BLACK,null,null))}remove(e){return new nt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Pt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Eu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Eu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Eu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Eu(this.root,e,this.comparator,!0)}}class Eu{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Pt{constructor(e,t,s,o,l){this.key=e,this.value=t,this.color=s??Pt.RED,this.left=o??Pt.EMPTY,this.right=l??Pt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,l){return new Pt(e??this.key,t??this.value,s??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const l=s(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,s),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Pt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Pt.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Pt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Pt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ye(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ye(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ye(27949);return e+(this.isRed()?0:1)}}Pt.EMPTY=null,Pt.RED=!0,Pt.BLACK=!1;Pt.EMPTY=new class{constructor(){this.size=0}get key(){throw ye(57766)}get value(){throw ye(16141)}get color(){throw ye(16727)}get left(){throw ye(29726)}get right(){throw ye(36894)}copy(e,t,s,o,l){return this}insert(e,t,s){return new Pt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e){this.comparator=e,this.data=new nt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new qg(this.data.getIterator())}getIteratorFrom(e){return new qg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof vt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new vt(this.comparator);return t.data=e,t}}class qg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.fields=e,e.sort(kt.comparator)}static empty(){return new un([])}unionWith(e){let t=new vt(kt.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new un(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return go(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new L_("Invalid base64 string: "+l):l}})(e);return new Nt(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let h=0;h<o.length;++h)l+=String.fromCharCode(o[h]);return l})(e);return new Nt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return xe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Nt.EMPTY_BYTE_STRING=new Nt("");const ET=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function wi(i){if(Be(!!i,39018),typeof i=="string"){let e=0;const t=ET.exec(i);if(Be(!!t,46558,{timestamp:i}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:ut(i.seconds),nanos:ut(i.nanos)}}function ut(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function Ei(i){return typeof i=="string"?Nt.fromBase64String(i):Nt.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M_="server_timestamp",b_="__type__",U_="__previous_value__",F_="__local_write_time__";function lf(i){var t,s;return((s=(((t=i==null?void 0:i.mapValue)==null?void 0:t.fields)||{})[b_])==null?void 0:s.stringValue)===M_}function lc(i){const e=i.mapValue.fields[U_];return lf(e)?lc(e):e}function Ma(i){const e=wi(i.mapValue.fields[F_].timestampValue);return new Ye(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(e,t,s,o,l,h,f,g,y,w){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=f,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=w}}const Bu="(default)";class ba{constructor(e,t){this.projectId=e,this.database=t||Bu}static empty(){return new ba("","")}get isDefaultDatabase(){return this.database===Bu}isEqual(e){return e instanceof ba&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j_="__type__",IT="__max__",Tu={mapValue:{}},B_="__vector__",zu="value";function Ti(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?lf(i)?4:AT(i)?9007199254740991:ST(i)?10:11:ye(28295,{value:i})}function ir(i,e){if(i===e)return!0;const t=Ti(i);if(t!==Ti(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Ma(i).isEqual(Ma(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const h=wi(o.timestampValue),f=wi(l.timestampValue);return h.seconds===f.seconds&&h.nanos===f.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(o,l){return Ei(o.bytesValue).isEqual(Ei(l.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(o,l){return ut(o.geoPointValue.latitude)===ut(l.geoPointValue.latitude)&&ut(o.geoPointValue.longitude)===ut(l.geoPointValue.longitude)})(i,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return ut(o.integerValue)===ut(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const h=ut(o.doubleValue),f=ut(l.doubleValue);return h===f?ju(h)===ju(f):isNaN(h)&&isNaN(f)}return!1})(i,e);case 9:return go(i.arrayValue.values||[],e.arrayValue.values||[],ir);case 10:case 11:return(function(o,l){const h=o.mapValue.fields||{},f=l.mapValue.fields||{};if($g(h)!==$g(f))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(f[g]===void 0||!ir(h[g],f[g])))return!1;return!0})(i,e);default:return ye(52216,{left:i})}}function Ua(i,e){return(i.values||[]).find((t=>ir(t,e)))!==void 0}function yo(i,e){if(i===e)return 0;const t=Ti(i),s=Ti(e);if(t!==s)return xe(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return xe(i.booleanValue,e.booleanValue);case 2:return(function(l,h){const f=ut(l.integerValue||l.doubleValue),g=ut(h.integerValue||h.doubleValue);return f<g?-1:f>g?1:f===g?0:isNaN(f)?isNaN(g)?0:-1:1})(i,e);case 3:return Hg(i.timestampValue,e.timestampValue);case 4:return Hg(Ma(i),Ma(e));case 5:return Ld(i.stringValue,e.stringValue);case 6:return(function(l,h){const f=Ei(l),g=Ei(h);return f.compareTo(g)})(i.bytesValue,e.bytesValue);case 7:return(function(l,h){const f=l.split("/"),g=h.split("/");for(let y=0;y<f.length&&y<g.length;y++){const w=xe(f[y],g[y]);if(w!==0)return w}return xe(f.length,g.length)})(i.referenceValue,e.referenceValue);case 8:return(function(l,h){const f=xe(ut(l.latitude),ut(h.latitude));return f!==0?f:xe(ut(l.longitude),ut(h.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return Wg(i.arrayValue,e.arrayValue);case 10:return(function(l,h){var I,L,$,q;const f=l.fields||{},g=h.fields||{},y=(I=f[zu])==null?void 0:I.arrayValue,w=(L=g[zu])==null?void 0:L.arrayValue,E=xe((($=y==null?void 0:y.values)==null?void 0:$.length)||0,((q=w==null?void 0:w.values)==null?void 0:q.length)||0);return E!==0?E:Wg(y,w)})(i.mapValue,e.mapValue);case 11:return(function(l,h){if(l===Tu.mapValue&&h===Tu.mapValue)return 0;if(l===Tu.mapValue)return 1;if(h===Tu.mapValue)return-1;const f=l.fields||{},g=Object.keys(f),y=h.fields||{},w=Object.keys(y);g.sort(),w.sort();for(let E=0;E<g.length&&E<w.length;++E){const I=Ld(g[E],w[E]);if(I!==0)return I;const L=yo(f[g[E]],y[w[E]]);if(L!==0)return L}return xe(g.length,w.length)})(i.mapValue,e.mapValue);default:throw ye(23264,{he:t})}}function Hg(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return xe(i,e);const t=wi(i),s=wi(e),o=xe(t.seconds,s.seconds);return o!==0?o:xe(t.nanos,s.nanos)}function Wg(i,e){const t=i.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const l=yo(t[o],s[o]);if(l)return l}return xe(t.length,s.length)}function _o(i){return Md(i)}function Md(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(t){const s=wi(t);return`time(${s.seconds},${s.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(t){return Ei(t).toBase64()})(i.bytesValue):"referenceValue"in i?(function(t){return pe.fromName(t).toString()})(i.referenceValue):"geoPointValue"in i?(function(t){return`geo(${t.latitude},${t.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(t){let s="[",o=!0;for(const l of t.values||[])o?o=!1:s+=",",s+=Md(l);return s+"]"})(i.arrayValue):"mapValue"in i?(function(t){const s=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const h of s)l?l=!1:o+=",",o+=`${h}:${Md(t.fields[h])}`;return o+"}"})(i.mapValue):ye(61005,{value:i})}function Pu(i){switch(Ti(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=lc(i);return e?16+Pu(e):16;case 5:return 2*i.stringValue.length;case 6:return Ei(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,l)=>o+Pu(l)),0)})(i.arrayValue);case 10:case 11:return(function(s){let o=0;return Ri(s.fields,((l,h)=>{o+=l.length+Pu(h)})),o})(i.mapValue);default:throw ye(13486,{value:i})}}function Gg(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function bd(i){return!!i&&"integerValue"in i}function uf(i){return!!i&&"arrayValue"in i}function Kg(i){return!!i&&"nullValue"in i}function Qg(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function ku(i){return!!i&&"mapValue"in i}function ST(i){var t,s;return((s=(((t=i==null?void 0:i.mapValue)==null?void 0:t.fields)||{})[j_])==null?void 0:s.stringValue)===B_}function ka(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return Ri(i.mapValue.fields,((t,s)=>e.mapValue.fields[t]=ka(s))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ka(i.arrayValue.values[t]);return e}return{...i}}function AT(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===IT}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.value=e}static empty(){return new Jt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!ku(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ka(t)}setAll(e){let t=kt.emptyPath(),s={},o=[];e.forEach(((h,f)=>{if(!t.isImmediateParentOf(f)){const g=this.getFieldsMap(t);this.applyChanges(g,s,o),s={},o=[],t=f.popLast()}h?s[f.lastSegment()]=ka(h):o.push(f.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,s,o)}delete(e){const t=this.field(e.popLast());ku(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ir(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];ku(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){Ri(t,((o,l)=>e[o]=l));for(const o of s)delete e[o]}clone(){return new Jt(ka(this.value))}}function z_(i){const e=[];return Ri(i.fields,((t,s)=>{const o=new kt([t]);if(ku(s)){const l=z_(s.mapValue).fields;if(l.length===0)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)})),new un(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e,t,s,o,l,h,f){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=l,this.data=h,this.documentState=f}static newInvalidDocument(e){return new Ft(e,0,Se.min(),Se.min(),Se.min(),Jt.empty(),0)}static newFoundDocument(e,t,s,o){return new Ft(e,1,t,Se.min(),s,o,0)}static newNoDocument(e,t){return new Ft(e,2,t,Se.min(),Se.min(),Jt.empty(),0)}static newUnknownDocument(e,t){return new Ft(e,3,t,Se.min(),Se.min(),Jt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Jt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Jt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ft&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ft(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(e,t){this.position=e,this.inclusive=t}}function Xg(i,e,t){let s=0;for(let o=0;o<i.position.length;o++){const l=e[o],h=i.position[o];if(l.field.isKeyField()?s=pe.comparator(pe.fromName(h.referenceValue),t.key):s=yo(h,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function Yg(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!ir(i.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{constructor(e,t="asc"){this.field=e,this.dir=t}}function RT(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{}class pt extends $_{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new PT(e,t,s):t==="array-contains"?new NT(e,s):t==="in"?new DT(e,s):t==="not-in"?new VT(e,s):t==="array-contains-any"?new OT(e,s):new pt(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new kT(e,s):new xT(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(yo(t,this.value)):t!==null&&Ti(this.value)===Ti(t)&&this.matchesComparison(yo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ye(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Nn extends $_{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Nn(e,t)}matches(e){return q_(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function q_(i){return i.op==="and"}function H_(i){return CT(i)&&q_(i)}function CT(i){for(const e of i.filters)if(e instanceof Nn)return!1;return!0}function Ud(i){if(i instanceof pt)return i.field.canonicalString()+i.op.toString()+_o(i.value);if(H_(i))return i.filters.map((e=>Ud(e))).join(",");{const e=i.filters.map((t=>Ud(t))).join(",");return`${i.op}(${e})`}}function W_(i,e){return i instanceof pt?(function(s,o){return o instanceof pt&&s.op===o.op&&s.field.isEqual(o.field)&&ir(s.value,o.value)})(i,e):i instanceof Nn?(function(s,o){return o instanceof Nn&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((l,h,f)=>l&&W_(h,o.filters[f])),!0):!1})(i,e):void ye(19439)}function G_(i){return i instanceof pt?(function(t){return`${t.field.canonicalString()} ${t.op} ${_o(t.value)}`})(i):i instanceof Nn?(function(t){return t.op.toString()+" {"+t.getFilters().map(G_).join(" ,")+"}"})(i):"Filter"}class PT extends pt{constructor(e,t,s){super(e,t,s),this.key=pe.fromName(s.referenceValue)}matches(e){const t=pe.comparator(e.key,this.key);return this.matchesComparison(t)}}class kT extends pt{constructor(e,t){super(e,"in",t),this.keys=K_("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class xT extends pt{constructor(e,t){super(e,"not-in",t),this.keys=K_("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function K_(i,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((s=>pe.fromName(s.referenceValue)))}class NT extends pt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return uf(t)&&Ua(t.arrayValue,this.value)}}class DT extends pt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ua(this.value.arrayValue,t)}}class VT extends pt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ua(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Ua(this.value.arrayValue,t)}}class OT extends pt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!uf(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>Ua(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(e,t=null,s=[],o=[],l=null,h=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=l,this.startAt=h,this.endAt=f,this.Te=null}}function Jg(i,e=null,t=[],s=[],o=null,l=null,h=null){return new LT(i,e,t,s,o,l,h)}function cf(i){const e=Re(i);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>Ud(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),ac(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>_o(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>_o(s))).join(",")),e.Te=t}return e.Te}function hf(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!RT(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!W_(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Yg(i.startAt,e.startAt)&&Yg(i.endAt,e.endAt)}function Fd(i){return pe.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(e,t=null,s=[],o=[],l=null,h="F",f=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=l,this.limitType=h,this.startAt=f,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function MT(i,e,t,s,o,l,h,f){return new Ga(i,e,t,s,o,l,h,f)}function df(i){return new Ga(i)}function Zg(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function Q_(i){return i.collectionGroup!==null}function xa(i){const e=Re(i);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let f=new vt(kt.comparator);return h.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(f=f.add(y.field))}))})),f})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new qu(l,s))})),t.has(kt.keyField().canonicalString())||e.Ie.push(new qu(kt.keyField(),s))}return e.Ie}function Yn(i){const e=Re(i);return e.Ee||(e.Ee=bT(e,xa(i))),e.Ee}function bT(i,e){if(i.limitType==="F")return Jg(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new qu(o.field,l)}));const t=i.endAt?new $u(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new $u(i.startAt.position,i.startAt.inclusive):null;return Jg(i.path,i.collectionGroup,e,i.filters,i.limit,t,s)}}function jd(i,e){const t=i.filters.concat([e]);return new Ga(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function Bd(i,e,t){return new Ga(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function uc(i,e){return hf(Yn(i),Yn(e))&&i.limitType===e.limitType}function X_(i){return`${cf(Yn(i))}|lt:${i.limitType}`}function io(i){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((o=>G_(o))).join(", ")}]`),ac(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((o=>_o(o))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((o=>_o(o))).join(",")),`Target(${s})`})(Yn(i))}; limitType=${i.limitType})`}function cc(i,e){return e.isFoundDocument()&&(function(s,o){const l=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):pe.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(i,e)&&(function(s,o){for(const l of xa(s))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(i,e)&&(function(s,o){for(const l of s.filters)if(!l.matches(o))return!1;return!0})(i,e)&&(function(s,o){return!(s.startAt&&!(function(h,f,g){const y=Xg(h,f,g);return h.inclusive?y<=0:y<0})(s.startAt,xa(s),o)||s.endAt&&!(function(h,f,g){const y=Xg(h,f,g);return h.inclusive?y>=0:y>0})(s.endAt,xa(s),o))})(i,e)}function UT(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Y_(i){return(e,t)=>{let s=!1;for(const o of xa(i)){const l=FT(o,e,t);if(l!==0)return l;s=s||o.field.isKeyField()}return 0}}function FT(i,e,t){const s=i.field.isKeyField()?pe.comparator(e.key,t.key):(function(l,h,f){const g=h.data.field(l),y=f.data.field(l);return g!==null&&y!==null?yo(g,y):ye(42886)})(i.field,e,t);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return ye(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,l]of s)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ri(this.inner,((t,s)=>{for(const[o,l]of s)e(o,l)}))}isEmpty(){return O_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jT=new nt(pe.comparator);function Cr(){return jT}const J_=new nt(pe.comparator);function Aa(...i){let e=J_;for(const t of i)e=e.insert(t.key,t);return e}function Z_(i){let e=J_;return i.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function rs(){return Na()}function ev(){return Na()}function Na(){return new ds((i=>i.toString()),((i,e)=>i.isEqual(e)))}const BT=new nt(pe.comparator),zT=new vt(pe.comparator);function Ne(...i){let e=zT;for(const t of i)e=e.add(t);return e}const $T=new vt(xe);function qT(){return $T}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ff(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ju(e)?"-0":e}}function tv(i){return{integerValue:""+i}}function HT(i,e){return _T(e)?tv(e):ff(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(){this._=void 0}}function WT(i,e,t){return i instanceof Hu?(function(o,l){const h={fields:{[b_]:{stringValue:M_},[F_]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&lf(l)&&(l=lc(l)),l&&(h.fields[U_]=l),{mapValue:h}})(t,e):i instanceof Fa?rv(i,e):i instanceof ja?iv(i,e):(function(o,l){const h=nv(o,l),f=ey(h)+ey(o.Ae);return bd(h)&&bd(o.Ae)?tv(f):ff(o.serializer,f)})(i,e)}function GT(i,e,t){return i instanceof Fa?rv(i,e):i instanceof ja?iv(i,e):t}function nv(i,e){return i instanceof Wu?(function(s){return bd(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class Hu extends hc{}class Fa extends hc{constructor(e){super(),this.elements=e}}function rv(i,e){const t=sv(e);for(const s of i.elements)t.some((o=>ir(o,s)))||t.push(s);return{arrayValue:{values:t}}}class ja extends hc{constructor(e){super(),this.elements=e}}function iv(i,e){let t=sv(e);for(const s of i.elements)t=t.filter((o=>!ir(o,s)));return{arrayValue:{values:t}}}class Wu extends hc{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function ey(i){return ut(i.integerValue||i.doubleValue)}function sv(i){return uf(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function KT(i,e){return i.field.isEqual(e.field)&&(function(s,o){return s instanceof Fa&&o instanceof Fa||s instanceof ja&&o instanceof ja?go(s.elements,o.elements,ir):s instanceof Wu&&o instanceof Wu?ir(s.Ae,o.Ae):s instanceof Hu&&o instanceof Hu})(i.transform,e.transform)}class QT{constructor(e,t){this.version=e,this.transformResults=t}}class Jn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Jn}static exists(e){return new Jn(void 0,e)}static updateTime(e){return new Jn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function xu(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class dc{}function ov(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new lv(i.key,Jn.none()):new Ka(i.key,i.data,Jn.none());{const t=i.data,s=Jt.empty();let o=new vt(kt.comparator);for(let l of e.fields)if(!o.has(l)){let h=t.field(l);h===null&&l.length>1&&(l=l.popLast(),h=t.field(l)),h===null?s.delete(l):s.set(l,h),o=o.add(l)}return new Ci(i.key,s,new un(o.toArray()),Jn.none())}}function XT(i,e,t){i instanceof Ka?(function(o,l,h){const f=o.value.clone(),g=ny(o.fieldTransforms,l,h.transformResults);f.setAll(g),l.convertToFoundDocument(h.version,f).setHasCommittedMutations()})(i,e,t):i instanceof Ci?(function(o,l,h){if(!xu(o.precondition,l))return void l.convertToUnknownDocument(h.version);const f=ny(o.fieldTransforms,l,h.transformResults),g=l.data;g.setAll(av(o)),g.setAll(f),l.convertToFoundDocument(h.version,g).setHasCommittedMutations()})(i,e,t):(function(o,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,t)}function Da(i,e,t,s){return i instanceof Ka?(function(l,h,f,g){if(!xu(l.precondition,h))return f;const y=l.value.clone(),w=ry(l.fieldTransforms,g,h);return y.setAll(w),h.convertToFoundDocument(h.version,y).setHasLocalMutations(),null})(i,e,t,s):i instanceof Ci?(function(l,h,f,g){if(!xu(l.precondition,h))return f;const y=ry(l.fieldTransforms,g,h),w=h.data;return w.setAll(av(l)),w.setAll(y),h.convertToFoundDocument(h.version,w).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(i,e,t,s):(function(l,h,f){return xu(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):f})(i,e,t)}function YT(i,e){let t=null;for(const s of i.fieldTransforms){const o=e.data.field(s.field),l=nv(s.transform,o||null);l!=null&&(t===null&&(t=Jt.empty()),t.set(s.field,l))}return t||null}function ty(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&go(s,o,((l,h)=>KT(l,h)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Ka extends dc{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ci extends dc{constructor(e,t,s,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function av(i){const e=new Map;return i.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=i.data.field(t);e.set(t,s)}})),e}function ny(i,e,t){const s=new Map;Be(i.length===t.length,32656,{Re:t.length,Ve:i.length});for(let o=0;o<t.length;o++){const l=i[o],h=l.transform,f=e.data.field(l.field);s.set(l.field,GT(h,f,t[o]))}return s}function ry(i,e,t){const s=new Map;for(const o of i){const l=o.transform,h=t.data.field(o.field);s.set(o.field,WT(l,h,e))}return s}class lv extends dc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class JT extends dc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&XT(l,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Da(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Da(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=ev();return this.mutations.forEach((o=>{const l=e.get(o.key),h=l.overlayedDocument;let f=this.applyToLocalView(h,l.mutatedFields);f=t.has(o.key)?null:f;const g=ov(h,f);g!==null&&s.set(o.key,g),h.isValidDocument()||h.convertToNoDocument(Se.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ne())}isEqual(e){return this.batchId===e.batchId&&go(this.mutations,e.mutations,((t,s)=>ty(t,s)))&&go(this.baseMutations,e.baseMutations,((t,s)=>ty(t,s)))}}class pf{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){Be(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return BT})();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,s[h].version);return new pf(e,t,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ft,Oe;function nI(i){switch(i){case G.OK:return ye(64938);case G.CANCELLED:case G.UNKNOWN:case G.DEADLINE_EXCEEDED:case G.RESOURCE_EXHAUSTED:case G.INTERNAL:case G.UNAVAILABLE:case G.UNAUTHENTICATED:return!1;case G.INVALID_ARGUMENT:case G.NOT_FOUND:case G.ALREADY_EXISTS:case G.PERMISSION_DENIED:case G.FAILED_PRECONDITION:case G.ABORTED:case G.OUT_OF_RANGE:case G.UNIMPLEMENTED:case G.DATA_LOSS:return!0;default:return ye(15467,{code:i})}}function uv(i){if(i===void 0)return Rr("GRPC error has no .code"),G.UNKNOWN;switch(i){case ft.OK:return G.OK;case ft.CANCELLED:return G.CANCELLED;case ft.UNKNOWN:return G.UNKNOWN;case ft.DEADLINE_EXCEEDED:return G.DEADLINE_EXCEEDED;case ft.RESOURCE_EXHAUSTED:return G.RESOURCE_EXHAUSTED;case ft.INTERNAL:return G.INTERNAL;case ft.UNAVAILABLE:return G.UNAVAILABLE;case ft.UNAUTHENTICATED:return G.UNAUTHENTICATED;case ft.INVALID_ARGUMENT:return G.INVALID_ARGUMENT;case ft.NOT_FOUND:return G.NOT_FOUND;case ft.ALREADY_EXISTS:return G.ALREADY_EXISTS;case ft.PERMISSION_DENIED:return G.PERMISSION_DENIED;case ft.FAILED_PRECONDITION:return G.FAILED_PRECONDITION;case ft.ABORTED:return G.ABORTED;case ft.OUT_OF_RANGE:return G.OUT_OF_RANGE;case ft.UNIMPLEMENTED:return G.UNIMPLEMENTED;case ft.DATA_LOSS:return G.DATA_LOSS;default:return ye(39323,{code:i})}}(Oe=ft||(ft={}))[Oe.OK=0]="OK",Oe[Oe.CANCELLED=1]="CANCELLED",Oe[Oe.UNKNOWN=2]="UNKNOWN",Oe[Oe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Oe[Oe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Oe[Oe.NOT_FOUND=5]="NOT_FOUND",Oe[Oe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Oe[Oe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Oe[Oe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Oe[Oe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Oe[Oe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Oe[Oe.ABORTED=10]="ABORTED",Oe[Oe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Oe[Oe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Oe[Oe.INTERNAL=13]="INTERNAL",Oe[Oe.UNAVAILABLE=14]="UNAVAILABLE",Oe[Oe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iI=new gi([4294967295,4294967295],0);function iy(i){const e=rI().encode(i),t=new I_;return t.update(e),new Uint8Array(t.digest())}function sy(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new gi([t,s],0),new gi([o,l],0)]}class mf{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Ra(`Invalid padding: ${t}`);if(s<0)throw new Ra(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Ra(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Ra(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=gi.fromNumber(this.ge)}ye(e,t,s){let o=e.add(t.multiply(gi.fromNumber(s)));return o.compare(iI)===1&&(o=new gi([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=iy(e),[s,o]=sy(t);for(let l=0;l<this.hashCount;l++){const h=this.ye(s,o,l);if(!this.we(h))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new mf(l,o,t);return s.forEach((f=>h.insert(f))),h}insert(e){if(this.ge===0)return;const t=iy(e),[s,o]=sy(t);for(let l=0;l<this.hashCount;l++){const h=this.ye(s,o,l);this.Se(h)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Ra extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(e,t,s,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,Qa.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new fc(Se.min(),o,new nt(xe),Cr(),Ne())}}class Qa{constructor(e,t,s,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Qa(s,t,Ne(),Ne(),Ne())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(e,t,s,o){this.be=e,this.removedTargetIds=t,this.key=s,this.De=o}}class cv{constructor(e,t){this.targetId=e,this.Ce=t}}class hv{constructor(e,t,s=Nt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class oy{constructor(){this.ve=0,this.Fe=ay(),this.Me=Nt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ne(),t=Ne(),s=Ne();return this.Fe.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:ye(38017,{changeType:l})}})),new Qa(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=ay()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Be(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class sI{constructor(e){this.Ge=e,this.ze=new Map,this.je=Cr(),this.Je=Iu(),this.He=Iu(),this.Ye=new nt(xe)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:ye(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,s=e.Ce.count,o=this.ot(t);if(o){const l=o.target;if(Fd(l))if(s===0){const h=new pe(l.path);this.et(t,h,Ft.newNoDocument(h,Se.min()))}else Be(s===1,20013,{expectedCount:s});else{const h=this._t(t);if(h!==s){const f=this.ut(e),g=f?this.ct(f,e,h):1;if(g!==0){this.it(t);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,y)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:l=0}=t;let h,f;try{h=Ei(s).toUint8Array()}catch(g){if(g instanceof L_)return mo("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{f=new mf(h,o,l)}catch(g){return mo(g instanceof Ra?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return f.ge===0?null:f}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let o=0;return s.forEach((l=>{const h=this.Ge.ht(),f=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.et(t,l,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((l,h)=>{const f=this.ot(h);if(f){if(l.current&&Fd(f.target)){const g=new pe(f.target.path);this.It(g).has(h)||this.Et(h,g)||this.et(h,g,Ft.newNoDocument(g,e))}l.Be&&(t.set(h,l.ke()),l.qe())}}));let s=Ne();this.He.forEach(((l,h)=>{let f=!0;h.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(s=s.add(l))})),this.je.forEach(((l,h)=>h.setReadTime(e)));const o=new fc(e,t,this.Ye,this.je,s);return this.je=Cr(),this.Je=Iu(),this.He=Iu(),this.Ye=new nt(xe),o}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new oy,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new vt(xe),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new vt(xe),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||re("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new oy),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Iu(){return new nt(pe.comparator)}function ay(){return new nt(pe.comparator)}const oI={asc:"ASCENDING",desc:"DESCENDING"},aI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},lI={and:"AND",or:"OR"};class uI{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function zd(i,e){return i.useProto3Json||ac(e)?e:{value:e}}function Gu(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function dv(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function cI(i,e){return Gu(i,e.toTimestamp())}function Zn(i){return Be(!!i,49232),Se.fromTimestamp((function(t){const s=wi(t);return new Ye(s.seconds,s.nanos)})(i))}function gf(i,e){return $d(i,e).canonicalString()}function $d(i,e){const t=(function(o){return new We(["projects",o.projectId,"databases",o.database])})(i).child("documents");return e===void 0?t:t.child(e)}function fv(i){const e=We.fromString(i);return Be(_v(e),10190,{key:e.toString()}),e}function qd(i,e){return gf(i.databaseId,e.path)}function Ed(i,e){const t=fv(e);if(t.get(1)!==i.databaseId.projectId)throw new ie(G.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new ie(G.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new pe(mv(t))}function pv(i,e){return gf(i.databaseId,e)}function hI(i){const e=fv(i);return e.length===4?We.emptyPath():mv(e)}function Hd(i){return new We(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function mv(i){return Be(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function ly(i,e,t){return{name:qd(i,e),fields:t.value.mapValue.fields}}function dI(i,e){let t;if("targetChange"in e){e.targetChange;const s=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:ye(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(y,w){return y.useProto3Json?(Be(w===void 0||typeof w=="string",58123),Nt.fromBase64String(w||"")):(Be(w===void 0||w instanceof Buffer||w instanceof Uint8Array,16193),Nt.fromUint8Array(w||new Uint8Array))})(i,e.targetChange.resumeToken),h=e.targetChange.cause,f=h&&(function(y){const w=y.code===void 0?G.UNKNOWN:uv(y.code);return new ie(w,y.message||"")})(h);t=new hv(s,o,l,f||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Ed(i,s.document.name),l=Zn(s.document.updateTime),h=s.document.createTime?Zn(s.document.createTime):Se.min(),f=new Jt({mapValue:{fields:s.document.fields}}),g=Ft.newFoundDocument(o,l,h,f),y=s.targetIds||[],w=s.removedTargetIds||[];t=new Nu(y,w,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Ed(i,s.document),l=s.readTime?Zn(s.readTime):Se.min(),h=Ft.newNoDocument(o,l),f=s.removedTargetIds||[];t=new Nu([],f,h.key,h)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Ed(i,s.document),l=s.removedTargetIds||[];t=new Nu([],l,o,null)}else{if(!("filter"in e))return ye(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:l}=s,h=new tI(o,l),f=s.targetId;t=new cv(f,h)}}return t}function fI(i,e){let t;if(e instanceof Ka)t={update:ly(i,e.key,e.value)};else if(e instanceof lv)t={delete:qd(i,e.key)};else if(e instanceof Ci)t={update:ly(i,e.key,e.data),updateMask:TI(e.fieldMask)};else{if(!(e instanceof JT))return ye(16599,{Vt:e.type});t={verify:qd(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(l,h){const f=h.transform;if(f instanceof Hu)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Fa)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof ja)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Wu)return{fieldPath:h.field.canonicalString(),increment:f.Ae};throw ye(20930,{transform:h.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:cI(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:ye(27497)})(i,e.precondition)),t}function pI(i,e){return i&&i.length>0?(Be(e!==void 0,14353),i.map((t=>(function(o,l){let h=o.updateTime?Zn(o.updateTime):Zn(l);return h.isEqual(Se.min())&&(h=Zn(l)),new QT(h,o.transformResults||[])})(t,e)))):[]}function mI(i,e){return{documents:[pv(i,e.path)]}}function gI(i,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=pv(i,o);const l=(function(y){if(y.length!==0)return yv(Nn.create(y,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const h=(function(y){if(y.length!==0)return y.map((w=>(function(I){return{field:so(I.field),direction:vI(I.dir)}})(w)))})(e.orderBy);h&&(t.structuredQuery.orderBy=h);const f=zd(i,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:t,parent:o}}function yI(i){let e=hI(i.parent);const t=i.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){Be(s===1,65062);const w=t.from[0];w.allDescendants?o=w.collectionId:e=e.child(w.collectionId)}let l=[];t.where&&(l=(function(E){const I=gv(E);return I instanceof Nn&&H_(I)?I.getFilters():[I]})(t.where));let h=[];t.orderBy&&(h=(function(E){return E.map((I=>(function($){return new qu(oo($.field),(function(H){switch(H){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})($.direction))})(I)))})(t.orderBy));let f=null;t.limit&&(f=(function(E){let I;return I=typeof E=="object"?E.value:E,ac(I)?null:I})(t.limit));let g=null;t.startAt&&(g=(function(E){const I=!!E.before,L=E.values||[];return new $u(L,I)})(t.startAt));let y=null;return t.endAt&&(y=(function(E){const I=!E.before,L=E.values||[];return new $u(L,I)})(t.endAt)),MT(e,o,h,l,f,"F",g,y)}function _I(i,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ye(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function gv(i){return i.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=oo(t.unaryFilter.field);return pt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=oo(t.unaryFilter.field);return pt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=oo(t.unaryFilter.field);return pt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=oo(t.unaryFilter.field);return pt.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ye(61313);default:return ye(60726)}})(i):i.fieldFilter!==void 0?(function(t){return pt.create(oo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ye(58110);default:return ye(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(t){return Nn.create(t.compositeFilter.filters.map((s=>gv(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return ye(1026)}})(t.compositeFilter.op))})(i):ye(30097,{filter:i})}function vI(i){return oI[i]}function wI(i){return aI[i]}function EI(i){return lI[i]}function so(i){return{fieldPath:i.canonicalString()}}function oo(i){return kt.fromServerFormat(i.fieldPath)}function yv(i){return i instanceof pt?(function(t){if(t.op==="=="){if(Qg(t.value))return{unaryFilter:{field:so(t.field),op:"IS_NAN"}};if(Kg(t.value))return{unaryFilter:{field:so(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Qg(t.value))return{unaryFilter:{field:so(t.field),op:"IS_NOT_NAN"}};if(Kg(t.value))return{unaryFilter:{field:so(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:so(t.field),op:wI(t.op),value:t.value}}})(i):i instanceof Nn?(function(t){const s=t.getFilters().map((o=>yv(o)));return s.length===1?s[0]:{compositeFilter:{op:EI(t.op),filters:s}}})(i):ye(54877,{filter:i})}function TI(i){const e=[];return i.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function _v(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e,t,s,o,l=Se.min(),h=Se.min(),f=Nt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=f,this.expectedCount=g}withSequenceNumber(e){return new di(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new di(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new di(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new di(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(e){this.yt=e}}function SI(i){const e=yI({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?Bd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(){this.Cn=new RI}addToCollectionParentIndex(e,t){return this.Cn.add(t),K.resolve()}getCollectionParents(e,t){return K.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return K.resolve()}deleteFieldIndex(e,t){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,t){return K.resolve()}getDocumentsMatchingTarget(e,t){return K.resolve(null)}getIndexType(e,t){return K.resolve(0)}getFieldIndexes(e,t){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,t){return K.resolve(vi.min())}getMinOffsetFromCollectionGroup(e,t){return K.resolve(vi.min())}updateCollectionGroup(e,t,s){return K.resolve()}updateIndexEntries(e,t){return K.resolve()}}class RI{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new vt(We.comparator),l=!o.has(s);return this.index[t]=o.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new vt(We.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},vv=41943040;class Yt{static withCacheSize(e){return new Yt(e,Yt.DEFAULT_COLLECTION_PERCENTILE,Yt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Yt.DEFAULT_COLLECTION_PERCENTILE=10,Yt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Yt.DEFAULT=new Yt(vv,Yt.DEFAULT_COLLECTION_PERCENTILE,Yt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Yt.DISABLED=new Yt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new vo(0)}static cr(){return new vo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cy="LruGarbageCollector",CI=1048576;function hy([i,e],[t,s]){const o=xe(i,t);return o===0?xe(e,s):o}class PI{constructor(e){this.Ir=e,this.buffer=new vt(hy),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();hy(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class kI{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){re(cy,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ao(t)?re(cy,"Ignoring IndexedDB error during garbage collection: ",t):await So(t)}await this.Vr(3e5)}))}}class xI{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return K.resolve(oc.ce);const s=new PI(t);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(re("LruGarbageCollector","Garbage collection skipped; disabled"),K.resolve(uy)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(re("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),uy):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,o,l,h,f,g,y;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,h=Date.now(),this.nthSequenceNumber(e,o)))).next((E=>(s=E,f=Date.now(),this.removeTargets(e,s,t)))).next((E=>(l=E,g=Date.now(),this.removeOrphanedDocuments(e,s)))).next((E=>(y=Date.now(),ro()<=ke.DEBUG&&re("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-w}ms
	Determined least recently used ${o} in `+(f-h)+`ms
	Removed ${l} targets in `+(g-f)+`ms
	Removed ${E} documents in `+(y-g)+`ms
Total Duration: ${y-w}ms`),K.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:E}))))}}function NI(i,e){return new xI(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(){this.changes=new ds((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ft.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?K.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(s!==null&&Da(s.mutation,o,un.empty(),Ye.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,Ne()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=Ne()){const o=rs();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,s).next((l=>{let h=Aa();return l.forEach(((f,g)=>{h=h.insert(f,g.overlayedDocument)})),h}))))}getOverlayedDocuments(e,t){const s=rs();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,Ne())))}populateOverlays(e,t,s){const o=[];return s.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((h,f)=>{t.set(h,f)}))}))}computeViews(e,t,s,o){let l=Cr();const h=Na(),f=(function(){return Na()})();return t.forEach(((g,y)=>{const w=s.get(y.key);o.has(y.key)&&(w===void 0||w.mutation instanceof Ci)?l=l.insert(y.key,y):w!==void 0?(h.set(y.key,w.mutation.getFieldMask()),Da(w.mutation,y,w.mutation.getFieldMask(),Ye.now())):h.set(y.key,un.empty())})),this.recalculateAndSaveOverlays(e,l).next((g=>(g.forEach(((y,w)=>h.set(y,w))),t.forEach(((y,w)=>f.set(y,new VI(w,h.get(y)??null)))),f)))}recalculateAndSaveOverlays(e,t){const s=Na();let o=new nt(((h,f)=>h-f)),l=Ne();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((h=>{for(const f of h)f.keys().forEach((g=>{const y=t.get(g);if(y===null)return;let w=s.get(g)||un.empty();w=f.applyToLocalView(y,w),s.set(g,w);const E=(o.get(f.batchId)||Ne()).add(g);o=o.insert(f.batchId,E)}))})).next((()=>{const h=[],f=o.getReverseIterator();for(;f.hasNext();){const g=f.getNext(),y=g.key,w=g.value,E=ev();w.forEach((I=>{if(!l.has(I)){const L=ov(t.get(I),s.get(I));L!==null&&E.set(I,L),l=l.add(I)}})),h.push(this.documentOverlayCache.saveOverlays(e,y,E))}return K.waitFor(h)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,o){return(function(h){return pe.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Q_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next((l=>{const h=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-l.size):K.resolve(rs());let f=La,g=l;return h.next((y=>K.forEach(y,((w,E)=>(f<E.largestBatchId&&(f=E.largestBatchId),l.get(w)?K.resolve():this.remoteDocumentCache.getEntry(e,w).next((I=>{g=g.insert(w,I)}))))).next((()=>this.populateOverlays(e,y,l))).next((()=>this.computeViews(e,g,y,Ne()))).next((w=>({batchId:f,changes:Z_(w)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new pe(t)).next((s=>{let o=Aa();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const l=t.collectionGroup;let h=Aa();return this.indexManager.getCollectionParents(e,l).next((f=>K.forEach(f,(g=>{const y=(function(E,I){return new Ga(I,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,s,o).next((w=>{w.forEach(((E,I)=>{h=h.insert(E,I)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,t,s,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,o)))).next((h=>{l.forEach(((g,y)=>{const w=y.getKey();h.get(w)===null&&(h=h.insert(w,Ft.newInvalidDocument(w)))}));let f=Aa();return h.forEach(((g,y)=>{const w=l.get(g);w!==void 0&&Da(w.mutation,y,un.empty(),Ye.now()),cc(t,y)&&(f=f.insert(g,y))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return K.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Zn(o.createTime)}})(t)),K.resolve()}getNamedQuery(e,t){return K.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:SI(o.bundledQuery),readTime:Zn(o.readTime)}})(t)),K.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(){this.overlays=new nt(pe.comparator),this.qr=new Map}getOverlay(e,t){return K.resolve(this.overlays.get(t))}getOverlays(e,t){const s=rs();return K.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&s.set(o,l)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((o,l)=>{this.St(e,t,l)})),K.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(s)),K.resolve()}getOverlaysForCollection(e,t,s){const o=rs(),l=t.length+1,h=new pe(t.child("")),f=this.overlays.getIteratorFrom(h);for(;f.hasNext();){const g=f.getNext().value,y=g.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&g.largestBatchId>s&&o.set(g.getKey(),g)}return K.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let l=new nt(((y,w)=>y-w));const h=this.overlays.getIterator();for(;h.hasNext();){const y=h.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>s){let w=l.get(y.largestBatchId);w===null&&(w=rs(),l=l.insert(y.largestBatchId,w)),w.set(y.getKey(),y)}}const f=rs(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,w)=>f.set(y,w))),!(f.size()>=o)););return K.resolve(f)}St(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const h=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(s.key,new eI(t,s));let l=this.qr.get(t);l===void 0&&(l=Ne(),this.qr.set(t,l)),this.qr.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{constructor(){this.sessionToken=Nt.EMPTY_BYTE_STRING}getSessionToken(e){return K.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,K.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(){this.Qr=new vt(It.$r),this.Ur=new vt(It.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new It(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new It(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new pe(new We([])),s=new It(t,e),o=new It(t,e+1),l=[];return this.Ur.forEachInRange([s,o],(h=>{this.Gr(h),l.push(h.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new pe(new We([])),s=new It(t,e),o=new It(t,e+1);let l=Ne();return this.Ur.forEachInRange([s,o],(h=>{l=l.add(h.key)})),l}containsKey(e){const t=new It(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class It{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return pe.comparator(e.key,t.key)||xe(e.Yr,t.Yr)}static Kr(e,t){return xe(e.Yr,t.Yr)||pe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new vt(It.$r)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new ZT(l,t,s,o);this.mutationQueue.push(h);for(const f of o)this.Zr=this.Zr.add(new It(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return K.resolve(h)}lookupMutationBatch(e,t){return K.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.ei(s),l=o<0?0:o;return K.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?af:this.tr-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new It(t,0),o=new It(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([s,o],(h=>{const f=this.Xr(h.Yr);l.push(f)})),K.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new vt(xe);return t.forEach((o=>{const l=new It(o,0),h=new It(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,h],(f=>{s=s.add(f.Yr)}))})),K.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let l=s;pe.isDocumentKey(l)||(l=l.child(""));const h=new It(new pe(l),0);let f=new vt(xe);return this.Zr.forEachWhile((g=>{const y=g.key.path;return!!s.isPrefixOf(y)&&(y.length===o&&(f=f.add(g.Yr)),!0)}),h),K.resolve(this.ti(f))}ti(e){const t=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){Be(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return K.forEach(t.mutations,(o=>{const l=new It(o.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new It(t,0),o=this.Zr.firstAfterOrEqual(s);return K.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(e){this.ri=e,this.docs=(function(){return new nt(pe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),l=o?o.size:0,h=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return K.resolve(s?s.document.mutableCopy():Ft.newInvalidDocument(t))}getEntries(e,t){let s=Cr();return t.forEach((o=>{const l=this.docs.get(o);s=s.insert(o,l?l.document.mutableCopy():Ft.newInvalidDocument(o))})),K.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let l=Cr();const h=t.path,f=new pe(h.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(f);for(;g.hasNext();){const{key:y,value:{document:w}}=g.getNext();if(!h.isPrefixOf(y.path))break;y.path.length>h.length+1||pT(fT(w),s)<=0||(o.has(w.key)||cc(t,w))&&(l=l.insert(w.key,w.mutableCopy()))}return K.resolve(l)}getAllFromCollectionGroup(e,t,s,o){ye(9500)}ii(e,t){return K.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new jI(this)}getSize(e){return K.resolve(this.size)}}class jI extends DI{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),K.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(e){this.persistence=e,this.si=new ds((t=>cf(t)),hf),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.oi=0,this._i=new yf,this.targetCount=0,this.ai=vo.ur()}forEachTarget(e,t){return this.si.forEach(((s,o)=>t(o))),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),K.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new vo(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,K.resolve()}updateTargetData(e,t){return this.Pr(t),K.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,t,s){let o=0;const l=[];return this.si.forEach(((h,f)=>{f.sequenceNumber<=t&&s.get(f.targetId)===null&&(this.si.delete(h),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),o++)})),K.waitFor(l).next((()=>o))}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return K.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),K.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((h=>{l.push(o.markPotentiallyOrphaned(e,h))})),K.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),K.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return K.resolve(s)}containsKey(e,t){return K.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv{constructor(e,t){this.ui={},this.overlays={},this.ci=new oc(0),this.li=!1,this.li=!0,this.hi=new bI,this.referenceDelegate=e(this),this.Pi=new BI(this),this.indexManager=new AI,this.remoteDocumentCache=(function(o){return new FI(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new II(t),this.Ii=new LI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new MI,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new UI(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){re("MemoryPersistence","Starting transaction:",e);const o=new zI(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ai(e,t){return K.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class zI extends gT{constructor(e){super(),this.currentSequenceNumber=e}}class _f{constructor(e){this.persistence=e,this.Ri=new yf,this.Vi=null}static mi(e){return new _f(e)}get fi(){if(this.Vi)return this.Vi;throw ye(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),K.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),K.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),K.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.fi.add(l.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.fi,(s=>{const o=pe.fromPath(s);return this.gi(e,o).next((l=>{l||t.removeEntry(o,Se.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return K.or([()=>K.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Ku{constructor(e,t){this.persistence=e,this.pi=new ds((s=>vT(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=NI(this,t)}static mi(e,t){return new Ku(e,t)}Ei(){}di(e){return K.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((o=>s+o))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return K.forEach(this.pi,((s,o)=>this.br(e,s,o).next((l=>l?K.resolve():t(o)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ii(e,(h=>this.br(e,h,t).next((f=>{f||(s++,l.removeEntry(h,Se.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),K.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),K.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),K.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),K.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Pu(e.data.value)),t}br(e,t,s){return K.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return K.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=o}static As(e,t){let s=Ne(),o=Ne();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new vf(e,t.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Lw()?8:yT(jt())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,o){const l={result:null};return this.ys(e,t).next((h=>{l.result=h})).next((()=>{if(!l.result)return this.ws(e,t,o,s).next((h=>{l.result=h}))})).next((()=>{if(l.result)return;const h=new $I;return this.Ss(e,t,h).next((f=>{if(l.result=f,this.Vs)return this.bs(e,t,h,f.size)}))})).next((()=>l.result))}bs(e,t,s,o){return s.documentReadCount<this.fs?(ro()<=ke.DEBUG&&re("QueryEngine","SDK will not create cache indexes for query:",io(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),K.resolve()):(ro()<=ke.DEBUG&&re("QueryEngine","Query:",io(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(ro()<=ke.DEBUG&&re("QueryEngine","The SDK decides to create cache indexes for query:",io(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Yn(t))):K.resolve())}ys(e,t){if(Zg(t))return K.resolve(null);let s=Yn(t);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Bd(t,null,"F"),s=Yn(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const h=Ne(...l);return this.ps.getDocuments(e,h).next((f=>this.indexManager.getMinOffset(e,s).next((g=>{const y=this.Ds(t,f);return this.Cs(t,y,h,g.readTime)?this.ys(e,Bd(t,null,"F")):this.vs(e,y,t,g)}))))})))))}ws(e,t,s,o){return Zg(t)||o.isEqual(Se.min())?K.resolve(null):this.ps.getDocuments(e,s).next((l=>{const h=this.Ds(t,l);return this.Cs(t,h,s,o)?K.resolve(null):(ro()<=ke.DEBUG&&re("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),io(t)),this.vs(e,h,t,dT(o,La)).next((f=>f)))}))}Ds(e,t){let s=new vt(Y_(e));return t.forEach(((o,l)=>{cc(e,l)&&(s=s.add(l))})),s}Cs(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Ss(e,t,s){return ro()<=ke.DEBUG&&re("QueryEngine","Using full collection scan to execute query:",io(t)),this.ps.getDocumentsMatchingQuery(e,t,vi.min(),s)}vs(e,t,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((l=>(t.forEach((h=>{l=l.insert(h.key,h)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wf="LocalStore",HI=3e8;class WI{constructor(e,t,s,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new nt(xe),this.xs=new ds((l=>cf(l)),hf),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new OI(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function GI(i,e,t,s){return new WI(i,e,t,s)}async function Ev(i,e){const t=Re(i);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next((l=>(o=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((l=>{const h=[],f=[];let g=Ne();for(const y of o){h.push(y.batchId);for(const w of y.mutations)g=g.add(w.key)}for(const y of l){f.push(y.batchId);for(const w of y.mutations)g=g.add(w.key)}return t.localDocuments.getDocuments(s,g).next((y=>({Ls:y,removedBatchIds:h,addedBatchIds:f})))}))}))}function KI(i,e){const t=Re(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(f,g,y,w){const E=y.batch,I=E.keys();let L=K.resolve();return I.forEach(($=>{L=L.next((()=>w.getEntry(g,$))).next((q=>{const H=y.docVersions.get($);Be(H!==null,48541),q.version.compareTo(H)<0&&(E.applyToRemoteDocument(q,y),q.isValidDocument()&&(q.setReadTime(y.commitVersion),w.addEntry(q)))}))})),L.next((()=>f.mutationQueue.removeMutationBatch(g,E)))})(t,s,e,l).next((()=>l.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(f){let g=Ne();for(let y=0;y<f.mutationResults.length;++y)f.mutationResults[y].transformResults.length>0&&(g=g.add(f.batch.mutations[y].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(s,o)))}))}function Tv(i){const e=Re(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function QI(i,e){const t=Re(i),s=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const h=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const f=[];e.targetChanges.forEach(((w,E)=>{const I=o.get(E);if(!I)return;f.push(t.Pi.removeMatchingKeys(l,w.removedDocuments,E).next((()=>t.Pi.addMatchingKeys(l,w.addedDocuments,E))));let L=I.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?L=L.withResumeToken(Nt.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):w.resumeToken.approximateByteSize()>0&&(L=L.withResumeToken(w.resumeToken,s)),o=o.insert(E,L),(function(q,H,Z){return q.resumeToken.approximateByteSize()===0||H.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=HI?!0:Z.addedDocuments.size+Z.modifiedDocuments.size+Z.removedDocuments.size>0})(I,L,w)&&f.push(t.Pi.updateTargetData(l,L))}));let g=Cr(),y=Ne();if(e.documentUpdates.forEach((w=>{e.resolvedLimboDocuments.has(w)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,w))})),f.push(XI(l,h,e.documentUpdates).next((w=>{g=w.ks,y=w.qs}))),!s.isEqual(Se.min())){const w=t.Pi.getLastRemoteSnapshotVersion(l).next((E=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,s)));f.push(w)}return K.waitFor(f).next((()=>h.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,g,y))).next((()=>g))})).then((l=>(t.Ms=o,l)))}function XI(i,e,t){let s=Ne(),o=Ne();return t.forEach((l=>s=s.add(l))),e.getEntries(i,s).next((l=>{let h=Cr();return t.forEach(((f,g)=>{const y=l.get(f);g.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(f)),g.isNoDocument()&&g.version.isEqual(Se.min())?(e.removeEntry(f,g.readTime),h=h.insert(f,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),h=h.insert(f,g)):re(wf,"Ignoring outdated watch update for ",f,". Current version:",y.version," Watch version:",g.version)})),{ks:h,qs:o}}))}function YI(i,e){const t=Re(i);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=af),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function JI(i,e){const t=Re(i);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return t.Pi.getTargetData(s,e).next((l=>l?(o=l,K.resolve(o)):t.Pi.allocateTargetId(s).next((h=>(o=new di(e,h,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=t.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function Wd(i,e,t){const s=Re(i),o=s.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,(h=>s.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!Ao(h))throw h;re(wf,`Failed to update sequence numbers for target ${e}: ${h}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function dy(i,e,t){const s=Re(i);let o=Se.min(),l=Ne();return s.persistence.runTransaction("Execute query","readwrite",(h=>(function(g,y,w){const E=Re(g),I=E.xs.get(w);return I!==void 0?K.resolve(E.Ms.get(I)):E.Pi.getTargetData(y,w)})(s,h,Yn(e)).next((f=>{if(f)return o=f.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(h,f.targetId).next((g=>{l=g}))})).next((()=>s.Fs.getDocumentsMatchingQuery(h,e,t?o:Se.min(),t?l:Ne()))).next((f=>(ZI(s,UT(e),f),{documents:f,Qs:l})))))}function ZI(i,e,t){let s=i.Os.get(e)||Se.min();t.forEach(((o,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),i.Os.set(e,s)}class fy{constructor(){this.activeTargetIds=qT()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class eS{constructor(){this.Mo=new fy,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new fy,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const py="ConnectivityMonitor";class my{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){re(py,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){re(py,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Su=null;function Gd(){return Su===null?Su=(function(){return 268435456+Math.round(2147483648*Math.random())})():Su++,"0x"+Su.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Td="RestConnection",nS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class rS{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===Bu?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,t,s,o,l){const h=Gd(),f=this.zo(e,t.toUriEncodedString());re(Td,`Sending RPC '${e}' ${h}:`,f,s);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,l);const{host:y}=new URL(f),w=Eo(y);return this.Jo(e,f,g,s,w).then((E=>(re(Td,`Received RPC '${e}' ${h}: `,E),E)),(E=>{throw mo(Td,`RPC '${e}' ${h} failed with error: `,E,"url: ",f,"request:",s),E}))}Ho(e,t,s,o,l,h){return this.Go(e,t,s,o,l)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Io})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),s&&s.headers.forEach(((o,l)=>e[l]=o))}zo(e,t){const s=nS[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bt="WebChannelConnection";class sS extends rS{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,o,l){const h=Gd();return new Promise(((f,g)=>{const y=new S_;y.setWithCredentials(!0),y.listenOnce(A_.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case Cu.NO_ERROR:const E=y.getResponseJson();re(bt,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(E)),f(E);break;case Cu.TIMEOUT:re(bt,`RPC '${e}' ${h} timed out`),g(new ie(G.DEADLINE_EXCEEDED,"Request time out"));break;case Cu.HTTP_ERROR:const I=y.getStatus();if(re(bt,`RPC '${e}' ${h} failed with status:`,I,"response text:",y.getResponseText()),I>0){let L=y.getResponseJson();Array.isArray(L)&&(L=L[0]);const $=L==null?void 0:L.error;if($&&$.status&&$.message){const q=(function(Z){const se=Z.toLowerCase().replace(/_/g,"-");return Object.values(G).indexOf(se)>=0?se:G.UNKNOWN})($.status);g(new ie(q,$.message))}else g(new ie(G.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new ie(G.UNAVAILABLE,"Connection failed."));break;default:ye(9055,{l_:e,streamId:h,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{re(bt,`RPC '${e}' ${h} completed.`)}}));const w=JSON.stringify(o);re(bt,`RPC '${e}' ${h} sending request:`,o),y.send(t,"POST",w,s,15)}))}T_(e,t,s){const o=Gd(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=P_(),f=C_(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(g.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,s),g.encodeInitMessageHeaders=!0;const w=l.join("");re(bt,`Creating RPC '${e}' stream ${o}: ${w}`,g);const E=h.createWebChannel(w,g);this.I_(E);let I=!1,L=!1;const $=new iS({Yo:H=>{L?re(bt,`Not sending because RPC '${e}' stream ${o} is closed:`,H):(I||(re(bt,`Opening RPC '${e}' stream ${o} transport.`),E.open(),I=!0),re(bt,`RPC '${e}' stream ${o} sending:`,H),E.send(H))},Zo:()=>E.close()}),q=(H,Z,se)=>{H.listen(Z,(fe=>{try{se(fe)}catch(Te){setTimeout((()=>{throw Te}),0)}}))};return q(E,Sa.EventType.OPEN,(()=>{L||(re(bt,`RPC '${e}' stream ${o} transport opened.`),$.o_())})),q(E,Sa.EventType.CLOSE,(()=>{L||(L=!0,re(bt,`RPC '${e}' stream ${o} transport closed`),$.a_(),this.E_(E))})),q(E,Sa.EventType.ERROR,(H=>{L||(L=!0,mo(bt,`RPC '${e}' stream ${o} transport errored. Name:`,H.name,"Message:",H.message),$.a_(new ie(G.UNAVAILABLE,"The operation could not be completed")))})),q(E,Sa.EventType.MESSAGE,(H=>{var Z;if(!L){const se=H.data[0];Be(!!se,16349);const fe=se,Te=(fe==null?void 0:fe.error)||((Z=fe[0])==null?void 0:Z.error);if(Te){re(bt,`RPC '${e}' stream ${o} received error:`,Te);const De=Te.status;let Ce=(function(R){const D=ft[R];if(D!==void 0)return uv(D)})(De),k=Te.message;Ce===void 0&&(Ce=G.INTERNAL,k="Unknown error status: "+De+" with message "+Te.message),L=!0,$.a_(new ie(Ce,k)),E.close()}else re(bt,`RPC '${e}' stream ${o} received:`,se),$.u_(se)}})),q(f,R_.STAT_EVENT,(H=>{H.stat===Od.PROXY?re(bt,`RPC '${e}' stream ${o} detected buffering proxy`):H.stat===Od.NOPROXY&&re(bt,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{$.__()}),0),$}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Id(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pc(i){return new uI(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iv{constructor(e,t,s=1e3,o=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=o,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-s);o>0&&re("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gy="PersistentStream";class Sv{constructor(e,t,s,o,l,h,f,g){this.Mi=e,this.S_=s,this.b_=o,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=f,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Iv(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===G.RESOURCE_EXHAUSTED?(Rr(t.toString()),Rr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===G.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===t&&this.G_(s,o)}),(s=>{e((()=>{const o=new ie(G.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return re(gy,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(re(gy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class oS extends Sv{constructor(e,t,s,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,h),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=dI(this.serializer,e),s=(function(l){if(!("targetChange"in l))return Se.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?Se.min():h.readTime?Zn(h.readTime):Se.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=Hd(this.serializer),t.addTarget=(function(l,h){let f;const g=h.target;if(f=Fd(g)?{documents:mI(l,g)}:{query:gI(l,g).ft},f.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){f.resumeToken=dv(l,h.resumeToken);const y=zd(l,h.expectedCount);y!==null&&(f.expectedCount=y)}else if(h.snapshotVersion.compareTo(Se.min())>0){f.readTime=Gu(l,h.snapshotVersion.toTimestamp());const y=zd(l,h.expectedCount);y!==null&&(f.expectedCount=y)}return f})(this.serializer,e);const s=_I(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=Hd(this.serializer),t.removeTarget=e,this.q_(t)}}class aS extends Sv{constructor(e,t,s,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,h),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Be(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Be(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Be(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=pI(e.writeResults,e.commitTime),s=Zn(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=Hd(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>fI(this.serializer,s)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{}class uS extends lS{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ie(G.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,h])=>this.connection.Go(e,$d(t,s),o,l,h))).catch((l=>{throw l.name==="FirebaseError"?(l.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ie(G.UNKNOWN,l.toString())}))}Ho(e,t,s,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,f])=>this.connection.Ho(e,$d(t,s),o,h,f,l))).catch((h=>{throw h.name==="FirebaseError"?(h.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new ie(G.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class cS{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Rr(t),this.aa=!1):re("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cs="RemoteStore";class hS{constructor(e,t,s,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((h=>{s.enqueueAndForget((async()=>{fs(this)&&(re(cs,"Restarting streams for network reachability change."),await(async function(g){const y=Re(g);y.Ea.add(4),await Xa(y),y.Ra.set("Unknown"),y.Ea.delete(4),await mc(y)})(this))}))})),this.Ra=new cS(s,o)}}async function mc(i){if(fs(i))for(const e of i.da)await e(!0)}async function Xa(i){for(const e of i.da)await e(!1)}function Av(i,e){const t=Re(i);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Sf(t)?If(t):Ro(t).O_()&&Tf(t,e))}function Ef(i,e){const t=Re(i),s=Ro(t);t.Ia.delete(e),s.O_()&&Rv(t,e),t.Ia.size===0&&(s.O_()?s.L_():fs(t)&&t.Ra.set("Unknown"))}function Tf(i,e){if(i.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ro(i).Y_(e)}function Rv(i,e){i.Va.Ue(e),Ro(i).Z_(e)}function If(i){i.Va=new sI({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),Ro(i).start(),i.Ra.ua()}function Sf(i){return fs(i)&&!Ro(i).x_()&&i.Ia.size>0}function fs(i){return Re(i).Ea.size===0}function Cv(i){i.Va=void 0}async function dS(i){i.Ra.set("Online")}async function fS(i){i.Ia.forEach(((e,t)=>{Tf(i,e)}))}async function pS(i,e){Cv(i),Sf(i)?(i.Ra.ha(e),If(i)):i.Ra.set("Unknown")}async function mS(i,e,t){if(i.Ra.set("Online"),e instanceof hv&&e.state===2&&e.cause)try{await(async function(o,l){const h=l.cause;for(const f of l.targetIds)o.Ia.has(f)&&(await o.remoteSyncer.rejectListen(f,h),o.Ia.delete(f),o.Va.removeTarget(f))})(i,e)}catch(s){re(cs,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Qu(i,s)}else if(e instanceof Nu?i.Va.Ze(e):e instanceof cv?i.Va.st(e):i.Va.tt(e),!t.isEqual(Se.min()))try{const s=await Tv(i.localStore);t.compareTo(s)>=0&&await(function(l,h){const f=l.Va.Tt(h);return f.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const w=l.Ia.get(y);w&&l.Ia.set(y,w.withResumeToken(g.resumeToken,h))}})),f.targetMismatches.forEach(((g,y)=>{const w=l.Ia.get(g);if(!w)return;l.Ia.set(g,w.withResumeToken(Nt.EMPTY_BYTE_STRING,w.snapshotVersion)),Rv(l,g);const E=new di(w.target,g,y,w.sequenceNumber);Tf(l,E)})),l.remoteSyncer.applyRemoteEvent(f)})(i,t)}catch(s){re(cs,"Failed to raise snapshot:",s),await Qu(i,s)}}async function Qu(i,e,t){if(!Ao(e))throw e;i.Ea.add(1),await Xa(i),i.Ra.set("Offline"),t||(t=()=>Tv(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{re(cs,"Retrying IndexedDB access"),await t(),i.Ea.delete(1),await mc(i)}))}function Pv(i,e){return e().catch((t=>Qu(i,t,e)))}async function gc(i){const e=Re(i),t=Ii(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:af;for(;gS(e);)try{const o=await YI(e.localStore,s);if(o===null){e.Ta.length===0&&t.L_();break}s=o.batchId,yS(e,o)}catch(o){await Qu(e,o)}kv(e)&&xv(e)}function gS(i){return fs(i)&&i.Ta.length<10}function yS(i,e){i.Ta.push(e);const t=Ii(i);t.O_()&&t.X_&&t.ea(e.mutations)}function kv(i){return fs(i)&&!Ii(i).x_()&&i.Ta.length>0}function xv(i){Ii(i).start()}async function _S(i){Ii(i).ra()}async function vS(i){const e=Ii(i);for(const t of i.Ta)e.ea(t.mutations)}async function wS(i,e,t){const s=i.Ta.shift(),o=pf.from(s,e,t);await Pv(i,(()=>i.remoteSyncer.applySuccessfulWrite(o))),await gc(i)}async function ES(i,e){e&&Ii(i).X_&&await(async function(s,o){if((function(h){return nI(h)&&h!==G.ABORTED})(o.code)){const l=s.Ta.shift();Ii(s).B_(),await Pv(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,o))),await gc(s)}})(i,e),kv(i)&&xv(i)}async function yy(i,e){const t=Re(i);t.asyncQueue.verifyOperationInProgress(),re(cs,"RemoteStore received new credentials");const s=fs(t);t.Ea.add(3),await Xa(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await mc(t)}async function TS(i,e){const t=Re(i);e?(t.Ea.delete(2),await mc(t)):e||(t.Ea.add(2),await Xa(t),t.Ra.set("Unknown"))}function Ro(i){return i.ma||(i.ma=(function(t,s,o){const l=Re(t);return l.sa(),new oS(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(i.datastore,i.asyncQueue,{Xo:dS.bind(null,i),t_:fS.bind(null,i),r_:pS.bind(null,i),H_:mS.bind(null,i)}),i.da.push((async e=>{e?(i.ma.B_(),Sf(i)?If(i):i.Ra.set("Unknown")):(await i.ma.stop(),Cv(i))}))),i.ma}function Ii(i){return i.fa||(i.fa=(function(t,s,o){const l=Re(t);return l.sa(),new aS(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:_S.bind(null,i),r_:ES.bind(null,i),ta:vS.bind(null,i),na:wS.bind(null,i)}),i.da.push((async e=>{e?(i.fa.B_(),await gc(i)):(await i.fa.stop(),i.Ta.length>0&&(re(cs,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(e,t,s,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=l,this.deferred=new is,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,l){const h=Date.now()+s,f=new Af(e,t,h,o,l);return f.start(s),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ie(G.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Rf(i,e){if(Rr("AsyncQueue",`${e}: ${i}`),Ao(i))return new ie(G.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{static emptySet(e){return new lo(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||pe.comparator(t.key,s.key):(t,s)=>pe.comparator(t.key,s.key),this.keyedMap=Aa(),this.sortedSet=new nt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof lo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new lo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y{constructor(){this.ga=new nt(pe.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ye(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class wo{constructor(e,t,s,o,l,h,f,g,y){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=f,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,t,s,o,l){const h=[];return t.forEach((f=>{h.push({type:0,doc:f})})),new wo(e,t,lo.emptySet(t),h,s,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&uc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class SS{constructor(){this.queries=vy(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const o=Re(t),l=o.queries;o.queries=vy(),l.forEach(((h,f)=>{for(const g of f.Sa)g.onError(s)}))})(this,new ie(G.ABORTED,"Firestore shutting down"))}}function vy(){return new ds((i=>X_(i)),uc)}async function AS(i,e){const t=Re(i);let s=3;const o=e.query;let l=t.queries.get(o);l?!l.ba()&&e.Da()&&(s=2):(l=new IS,s=e.Da()?0:1);try{switch(s){case 0:l.wa=await t.onListen(o,!0);break;case 1:l.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const f=Rf(h,`Initialization of query '${io(e.query)}' failed`);return void e.onError(f)}t.queries.set(o,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Cf(t)}async function RS(i,e){const t=Re(i),s=e.query;let o=3;const l=t.queries.get(s);if(l){const h=l.Sa.indexOf(e);h>=0&&(l.Sa.splice(h,1),l.Sa.length===0?o=e.Da()?0:1:!l.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function CS(i,e){const t=Re(i);let s=!1;for(const o of e){const l=o.query,h=t.queries.get(l);if(h){for(const f of h.Sa)f.Fa(o)&&(s=!0);h.wa=o}}s&&Cf(t)}function PS(i,e,t){const s=Re(i),o=s.queries.get(e);if(o)for(const l of o.Sa)l.onError(t);s.queries.delete(e)}function Cf(i){i.Ca.forEach((e=>{e.next()}))}var Kd,wy;(wy=Kd||(Kd={})).Ma="default",wy.Cache="cache";class kS{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new wo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=wo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Kd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv{constructor(e){this.key=e}}class Dv{constructor(e){this.key=e}}class xS{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ne(),this.mutatedKeys=Ne(),this.eu=Y_(e),this.tu=new lo(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new _y,o=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,h=o,f=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((w,E)=>{const I=o.get(w),L=cc(this.query,E)?E:null,$=!!I&&this.mutatedKeys.has(I.key),q=!!L&&(L.hasLocalMutations||this.mutatedKeys.has(L.key)&&L.hasCommittedMutations);let H=!1;I&&L?I.data.isEqual(L.data)?$!==q&&(s.track({type:3,doc:L}),H=!0):this.su(I,L)||(s.track({type:2,doc:L}),H=!0,(g&&this.eu(L,g)>0||y&&this.eu(L,y)<0)&&(f=!0)):!I&&L?(s.track({type:0,doc:L}),H=!0):I&&!L&&(s.track({type:1,doc:I}),H=!0,(g||y)&&(f=!0)),H&&(L?(h=h.add(L),l=q?l.add(w):l.delete(w)):(h=h.delete(w),l=l.delete(w)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const w=this.query.limitType==="F"?h.last():h.first();h=h.delete(w.key),l=l.delete(w.key),s.track({type:1,doc:w})}return{tu:h,iu:s,Cs:f,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((w,E)=>(function(L,$){const q=H=>{switch(H){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ye(20277,{Rt:H})}};return q(L)-q($)})(w.type,E.type)||this.eu(w.doc,E.doc))),this.ou(s),o=o??!1;const f=t&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,y=g!==this.Za;return this.Za=g,h.length!==0||y?{snapshot:new wo(this.query,e.tu,l,h,e.mutatedKeys,g===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new _y,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ne(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new Dv(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new Nv(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=Ne();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return wo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Pf="SyncEngine";class NS{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class DS{constructor(e){this.key=e,this.hu=!1}}class VS{constructor(e,t,s,o,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new ds((f=>X_(f)),uc),this.Iu=new Map,this.Eu=new Set,this.du=new nt(pe.comparator),this.Au=new Map,this.Ru=new yf,this.Vu={},this.mu=new Map,this.fu=vo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function OS(i,e,t=!0){const s=Uv(i);let o;const l=s.Tu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.lu()):o=await Vv(s,e,t,!0),o}async function LS(i,e){const t=Uv(i);await Vv(t,e,!0,!1)}async function Vv(i,e,t,s){const o=await JI(i.localStore,Yn(e)),l=o.targetId,h=i.sharedClientState.addLocalQueryTarget(l,t);let f;return s&&(f=await MS(i,e,l,h==="current",o.resumeToken)),i.isPrimaryClient&&t&&Av(i.remoteStore,o),f}async function MS(i,e,t,s,o){i.pu=(E,I,L)=>(async function(q,H,Z,se){let fe=H.view.ru(Z);fe.Cs&&(fe=await dy(q.localStore,H.query,!1).then((({documents:k})=>H.view.ru(k,fe))));const Te=se&&se.targetChanges.get(H.targetId),De=se&&se.targetMismatches.get(H.targetId)!=null,Ce=H.view.applyChanges(fe,q.isPrimaryClient,Te,De);return Ty(q,H.targetId,Ce.au),Ce.snapshot})(i,E,I,L);const l=await dy(i.localStore,e,!0),h=new xS(e,l.Qs),f=h.ru(l.documents),g=Qa.createSynthesizedTargetChangeForCurrentChange(t,s&&i.onlineState!=="Offline",o),y=h.applyChanges(f,i.isPrimaryClient,g);Ty(i,t,y.au);const w=new NS(e,t,h);return i.Tu.set(e,w),i.Iu.has(t)?i.Iu.get(t).push(e):i.Iu.set(t,[e]),y.snapshot}async function bS(i,e,t){const s=Re(i),o=s.Tu.get(e),l=s.Iu.get(o.targetId);if(l.length>1)return s.Iu.set(o.targetId,l.filter((h=>!uc(h,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await Wd(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),t&&Ef(s.remoteStore,o.targetId),Qd(s,o.targetId)})).catch(So)):(Qd(s,o.targetId),await Wd(s.localStore,o.targetId,!0))}async function US(i,e){const t=Re(i),s=t.Tu.get(e),o=t.Iu.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Ef(t.remoteStore,s.targetId))}async function FS(i,e,t){const s=WS(i);try{const o=await(function(h,f){const g=Re(h),y=Ye.now(),w=f.reduce(((L,$)=>L.add($.key)),Ne());let E,I;return g.persistence.runTransaction("Locally write mutations","readwrite",(L=>{let $=Cr(),q=Ne();return g.Ns.getEntries(L,w).next((H=>{$=H,$.forEach(((Z,se)=>{se.isValidDocument()||(q=q.add(Z))}))})).next((()=>g.localDocuments.getOverlayedDocuments(L,$))).next((H=>{E=H;const Z=[];for(const se of f){const fe=YT(se,E.get(se.key).overlayedDocument);fe!=null&&Z.push(new Ci(se.key,fe,z_(fe.value.mapValue),Jn.exists(!0)))}return g.mutationQueue.addMutationBatch(L,y,Z,f)})).next((H=>{I=H;const Z=H.applyToLocalDocumentSet(E,q);return g.documentOverlayCache.saveOverlays(L,H.batchId,Z)}))})).then((()=>({batchId:I.batchId,changes:Z_(E)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(h,f,g){let y=h.Vu[h.currentUser.toKey()];y||(y=new nt(xe)),y=y.insert(f,g),h.Vu[h.currentUser.toKey()]=y})(s,o.batchId,t),await Ya(s,o.changes),await gc(s.remoteStore)}catch(o){const l=Rf(o,"Failed to persist write");t.reject(l)}}async function Ov(i,e){const t=Re(i);try{const s=await QI(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const h=t.Au.get(l);h&&(Be(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?Be(h.hu,14607):o.removedDocuments.size>0&&(Be(h.hu,42227),h.hu=!1))})),await Ya(t,s,e)}catch(s){await So(s)}}function Ey(i,e,t){const s=Re(i);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.Tu.forEach(((l,h)=>{const f=h.view.va(e);f.snapshot&&o.push(f.snapshot)})),(function(h,f){const g=Re(h);g.onlineState=f;let y=!1;g.queries.forEach(((w,E)=>{for(const I of E.Sa)I.va(f)&&(y=!0)})),y&&Cf(g)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function jS(i,e,t){const s=Re(i);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Au.get(e),l=o&&o.key;if(l){let h=new nt(pe.comparator);h=h.insert(l,Ft.newNoDocument(l,Se.min()));const f=Ne().add(l),g=new fc(Se.min(),new Map,new nt(xe),h,f);await Ov(s,g),s.du=s.du.remove(l),s.Au.delete(e),kf(s)}else await Wd(s.localStore,e,!1).then((()=>Qd(s,e,t))).catch(So)}async function BS(i,e){const t=Re(i),s=e.batch.batchId;try{const o=await KI(t.localStore,e);Mv(t,s,null),Lv(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Ya(t,o)}catch(o){await So(o)}}async function zS(i,e,t){const s=Re(i);try{const o=await(function(h,f){const g=Re(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let w;return g.mutationQueue.lookupMutationBatch(y,f).next((E=>(Be(E!==null,37113),w=E.keys(),g.mutationQueue.removeMutationBatch(y,E)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,w,f))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,w))).next((()=>g.localDocuments.getDocuments(y,w)))}))})(s.localStore,e);Mv(s,e,t),Lv(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Ya(s,o)}catch(o){await So(o)}}function Lv(i,e){(i.mu.get(e)||[]).forEach((t=>{t.resolve()})),i.mu.delete(e)}function Mv(i,e,t){const s=Re(i);let o=s.Vu[s.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function Qd(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.Iu.get(e))i.Tu.delete(s),t&&i.Pu.yu(s,t);i.Iu.delete(e),i.isPrimaryClient&&i.Ru.jr(e).forEach((s=>{i.Ru.containsKey(s)||bv(i,s)}))}function bv(i,e){i.Eu.delete(e.path.canonicalString());const t=i.du.get(e);t!==null&&(Ef(i.remoteStore,t),i.du=i.du.remove(e),i.Au.delete(t),kf(i))}function Ty(i,e,t){for(const s of t)s instanceof Nv?(i.Ru.addReference(s.key,e),$S(i,s)):s instanceof Dv?(re(Pf,"Document no longer in limbo: "+s.key),i.Ru.removeReference(s.key,e),i.Ru.containsKey(s.key)||bv(i,s.key)):ye(19791,{wu:s})}function $S(i,e){const t=e.key,s=t.path.canonicalString();i.du.get(t)||i.Eu.has(s)||(re(Pf,"New document in limbo: "+t),i.Eu.add(s),kf(i))}function kf(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const t=new pe(We.fromString(e)),s=i.fu.next();i.Au.set(s,new DS(t)),i.du=i.du.insert(t,s),Av(i.remoteStore,new di(Yn(df(t.path)),s,"TargetPurposeLimboResolution",oc.ce))}}async function Ya(i,e,t){const s=Re(i),o=[],l=[],h=[];s.Tu.isEmpty()||(s.Tu.forEach(((f,g)=>{h.push(s.pu(g,e,t).then((y=>{var w;if((y||t)&&s.isPrimaryClient){const E=y?!y.fromCache:(w=t==null?void 0:t.targetChanges.get(g.targetId))==null?void 0:w.current;s.sharedClientState.updateQueryState(g.targetId,E?"current":"not-current")}if(y){o.push(y);const E=vf.As(g.targetId,y);l.push(E)}})))})),await Promise.all(h),s.Pu.H_(o),await(async function(g,y){const w=Re(g);try{await w.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>K.forEach(y,(I=>K.forEach(I.Es,(L=>w.persistence.referenceDelegate.addReference(E,I.targetId,L))).next((()=>K.forEach(I.ds,(L=>w.persistence.referenceDelegate.removeReference(E,I.targetId,L)))))))))}catch(E){if(!Ao(E))throw E;re(wf,"Failed to update sequence numbers: "+E)}for(const E of y){const I=E.targetId;if(!E.fromCache){const L=w.Ms.get(I),$=L.snapshotVersion,q=L.withLastLimboFreeSnapshotVersion($);w.Ms=w.Ms.insert(I,q)}}})(s.localStore,l))}async function qS(i,e){const t=Re(i);if(!t.currentUser.isEqual(e)){re(Pf,"User change. New user:",e.toKey());const s=await Ev(t.localStore,e);t.currentUser=e,(function(l,h){l.mu.forEach((f=>{f.forEach((g=>{g.reject(new ie(G.CANCELLED,h))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Ya(t,s.Ls)}}function HS(i,e){const t=Re(i),s=t.Au.get(e);if(s&&s.hu)return Ne().add(s.key);{let o=Ne();const l=t.Iu.get(e);if(!l)return o;for(const h of l){const f=t.Tu.get(h);o=o.unionWith(f.view.nu)}return o}}function Uv(i){const e=Re(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ov.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=HS.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=jS.bind(null,e),e.Pu.H_=CS.bind(null,e.eventManager),e.Pu.yu=PS.bind(null,e.eventManager),e}function WS(i){const e=Re(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=BS.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=zS.bind(null,e),e}class Xu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=pc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return GI(this.persistence,new qI,e.initialUser,this.serializer)}Cu(e){return new wv(_f.mi,this.serializer)}Du(e){return new eS}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Xu.provider={build:()=>new Xu};class GS extends Xu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Be(this.persistence.referenceDelegate instanceof Ku,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new kI(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Yt.withCacheSize(this.cacheSizeBytes):Yt.DEFAULT;return new wv((s=>Ku.mi(s,t)),this.serializer)}}class Xd{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Ey(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=qS.bind(null,this.syncEngine),await TS(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new SS})()}createDatastore(e){const t=pc(e.databaseInfo.databaseId),s=(function(l){return new sS(l)})(e.databaseInfo);return(function(l,h,f,g){return new uS(l,h,f,g)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,o,l,h,f){return new hS(s,o,l,h,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>Ey(this.syncEngine,t,0)),(function(){return my.v()?new my:new tS})())}createSyncEngine(e,t){return(function(o,l,h,f,g,y,w){const E=new VS(o,l,h,f,g,y);return w&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=Re(o);re(cs,"RemoteStore shutting down."),l.Ea.add(5),await Xa(l),l.Aa.shutdown(),l.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Xd.provider={build:()=>new Xd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Rr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Si="FirestoreClient";class QS{constructor(e,t,s,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=Ut.UNAUTHENTICATED,this.clientId=of.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async h=>{re(Si,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(s,(h=>(re(Si,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new is;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Rf(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Sd(i,e){i.asyncQueue.verifyOperationInProgress(),re(Si,"Initializing OfflineComponentProvider");const t=i.configuration;await e.initialize(t);let s=t.initialUser;i.setCredentialChangeListener((async o=>{s.isEqual(o)||(await Ev(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function Iy(i,e){i.asyncQueue.verifyOperationInProgress();const t=await XS(i);re(Si,"Initializing OnlineComponentProvider"),await e.initialize(t,i.configuration),i.setCredentialChangeListener((s=>yy(e.remoteStore,s))),i.setAppCheckTokenChangeListener(((s,o)=>yy(e.remoteStore,o))),i._onlineComponents=e}async function XS(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){re(Si,"Using user provided OfflineComponentProvider");try{await Sd(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===G.FAILED_PRECONDITION||o.code===G.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;mo("Error using user provided cache. Falling back to memory cache: "+t),await Sd(i,new Xu)}}else re(Si,"Using default OfflineComponentProvider"),await Sd(i,new GS(void 0));return i._offlineComponents}async function Fv(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(re(Si,"Using user provided OnlineComponentProvider"),await Iy(i,i._uninitializedComponentsProvider._online)):(re(Si,"Using default OnlineComponentProvider"),await Iy(i,new Xd))),i._onlineComponents}function YS(i){return Fv(i).then((e=>e.syncEngine))}async function Sy(i){const e=await Fv(i),t=e.eventManager;return t.onListen=OS.bind(null,e.syncEngine),t.onUnlisten=bS.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=LS.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=US.bind(null,e.syncEngine),t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jv(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ay=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bv="firestore.googleapis.com",Ry=!0;class Cy{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ie(G.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Bv,this.ssl=Ry}else this.host=e.host,this.ssl=e.ssl??Ry;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=vv;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<CI)throw new ie(G.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}hT("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=jv(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ie(G.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ie(G.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ie(G.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class yc{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Cy({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ie(G.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ie(G.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Cy(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new tT;switch(s.type){case"firstParty":return new sT(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ie(G.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=Ay.get(t);s&&(re("ComponentProvider","Removing Datastore"),Ay.delete(t),s.terminate())})(this),Promise.resolve()}}function JS(i,e,t,s={}){var y;i=ss(i,yc);const o=Eo(e),l=i._getSettings(),h={...l,emulatorOptions:i._getEmulatorOptions()},f=`${e}:${t}`;o&&(m_(`https://${f}`),g_("Firestore",!0)),l.host!==Bv&&l.host!==f&&mo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...l,host:f,ssl:o,emulatorOptions:s};if(!as(g,h)&&(i._setSettings(g),s.mockUserToken)){let w,E;if(typeof s.mockUserToken=="string")w=s.mockUserToken,E=Ut.MOCK_USER;else{w=Rw(s.mockUserToken,(y=i._app)==null?void 0:y.options.projectId);const I=s.mockUserToken.sub||s.mockUserToken.user_id;if(!I)throw new ie(G.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new Ut(I)}i._authCredentials=new nT(new x_(w,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Co(this.firestore,e,this._query)}}class gt{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new yi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new gt(this.firestore,e,this._key)}toJSON(){return{type:gt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(Wa(t,gt._jsonSchema))return new gt(e,s||null,new pe(We.fromString(t.referencePath)))}}gt._jsonSchemaVersion="firestore/documentReference/1.0",gt._jsonSchema={type:mt("string",gt._jsonSchemaVersion),referencePath:mt("string")};class yi extends Co{constructor(e,t,s){super(e,t,df(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new gt(this.firestore,null,new pe(e))}withConverter(e){return new yi(this.firestore,e,this._path)}}function Au(i,e,...t){if(i=xt(i),N_("collection","path",e),i instanceof yc){const s=We.fromString(e,...t);return Fg(s),new yi(i,null,s)}{if(!(i instanceof gt||i instanceof yi))throw new ie(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(We.fromString(e,...t));return Fg(s),new yi(i.firestore,null,s)}}function Du(i,e,...t){if(i=xt(i),arguments.length===1&&(e=of.newId()),N_("doc","path",e),i instanceof yc){const s=We.fromString(e,...t);return Ug(s),new gt(i,null,new pe(s))}{if(!(i instanceof gt||i instanceof yi))throw new ie(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(We.fromString(e,...t));return Ug(s),new gt(i.firestore,i instanceof yi?i.converter:null,new pe(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Py="AsyncQueue";class ky{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Iv(this,"async_queue_retry"),this._c=()=>{const s=Id();s&&re(Py,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=Id();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Id();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new is;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ao(e))throw e;re(Py,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Rr("INTERNAL UNHANDLED ERROR: ",xy(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=Af.createAndSchedule(this,e,t,s,(l=>this.hc(l)));return this.tc.push(o),o}uc(){this.nc&&ye(47125,{Pc:xy(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function xy(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ny(i){return(function(t,s){if(typeof t!="object"||t===null)return!1;const o=t;for(const l of s)if(l in o&&typeof o[l]=="function")return!0;return!1})(i,["next","error","complete"])}class Ba extends yc{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new ky,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ky(e),this._firestoreClient=void 0,await e}}}function ZS(i,e){const t=typeof i=="object"?i:w_(),s=typeof i=="string"?i:Bu,o=rf(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const l=Sw("firestore");l&&JS(o,...l)}return o}function zv(i){if(i._terminated)throw new ie(G.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||eA(i),i._firestoreClient}function eA(i){var s,o,l;const e=i._freezeSettings(),t=(function(f,g,y,w){return new TT(f,g,y,w.host,w.ssl,w.experimentalForceLongPolling,w.experimentalAutoDetectLongPolling,jv(w.experimentalLongPollingOptions),w.useFetchStreams,w.isUsingEmulator)})(i._databaseId,((s=i._app)==null?void 0:s.options.appId)||"",i._persistenceKey,e);i._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new QS(i._authCredentials,i._appCheckCredentials,i._queue,t,i._componentsProvider&&(function(f){const g=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(g),_online:g}})(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new _n(Nt.fromBase64String(e))}catch(t){throw new ie(G.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new _n(Nt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:_n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Wa(e,_n._jsonSchema))return _n.fromBase64String(e.bytes)}}_n._jsonSchemaVersion="firestore/bytes/1.0",_n._jsonSchema={type:mt("string",_n._jsonSchemaVersion),bytes:mt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ie(G.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new kt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ie(G.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ie(G.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return xe(this._lat,e._lat)||xe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:er._jsonSchemaVersion}}static fromJSON(e){if(Wa(e,er._jsonSchema))return new er(e.latitude,e.longitude)}}er._jsonSchemaVersion="firestore/geoPoint/1.0",er._jsonSchema={type:mt("string",er._jsonSchemaVersion),latitude:mt("number"),longitude:mt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:tr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Wa(e,tr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new tr(e.vectorValues);throw new ie(G.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}tr._jsonSchemaVersion="firestore/vectorValue/1.0",tr._jsonSchema={type:mt("string",tr._jsonSchemaVersion),vectorValues:mt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA=/^__.*__$/;class nA{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Ci(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ka(e,this.data,t,this.fieldTransforms)}}class $v{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Ci(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function qv(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ye(40011,{Ac:i})}}class Nf{constructor(e,t,s,o,l,h){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Nf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Yu(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(qv(this.Ac)&&tA.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class rA{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||pc(e)}Cc(e,t,s,o=!1){return new Nf({Ac:e,methodName:t,Dc:s,path:kt.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Df(i){const e=i._freezeSettings(),t=pc(i._databaseId);return new rA(i._databaseId,!!e.ignoreUndefinedProperties,t)}function iA(i,e,t,s,o,l={}){const h=i.Cc(l.merge||l.mergeFields?2:0,e,t,o);Vf("Data must be an object, but it was:",h,s);const f=Hv(s,h);let g,y;if(l.merge)g=new un(h.fieldMask),y=h.fieldTransforms;else if(l.mergeFields){const w=[];for(const E of l.mergeFields){const I=Yd(e,E,t);if(!h.contains(I))throw new ie(G.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);Gv(w,I)||w.push(I)}g=new un(w),y=h.fieldTransforms.filter((E=>g.covers(E.field)))}else g=null,y=h.fieldTransforms;return new nA(new Jt(f),g,y)}class vc extends xf{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof vc}}function sA(i,e,t,s){const o=i.Cc(1,e,t);Vf("Data must be an object, but it was:",o,s);const l=[],h=Jt.empty();Ri(s,((g,y)=>{const w=Of(e,g,t);y=xt(y);const E=o.yc(w);if(y instanceof vc)l.push(w);else{const I=Ja(y,E);I!=null&&(l.push(w),h.set(w,I))}}));const f=new un(l);return new $v(h,f,o.fieldTransforms)}function oA(i,e,t,s,o,l){const h=i.Cc(1,e,t),f=[Yd(e,s,t)],g=[o];if(l.length%2!=0)throw new ie(G.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<l.length;I+=2)f.push(Yd(e,l[I])),g.push(l[I+1]);const y=[],w=Jt.empty();for(let I=f.length-1;I>=0;--I)if(!Gv(y,f[I])){const L=f[I];let $=g[I];$=xt($);const q=h.yc(L);if($ instanceof vc)y.push(L);else{const H=Ja($,q);H!=null&&(y.push(L),w.set(L,H))}}const E=new un(y);return new $v(w,E,h.fieldTransforms)}function aA(i,e,t,s=!1){return Ja(t,i.Cc(s?4:3,e))}function Ja(i,e){if(Wv(i=xt(i)))return Vf("Unsupported field value:",e,i),Hv(i,e);if(i instanceof xf)return(function(s,o){if(!qv(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const l=[];let h=0;for(const f of s){let g=Ja(f,o.wc(h));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),h++}return{arrayValue:{values:l}}})(i,e)}return(function(s,o){if((s=xt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return HT(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=Ye.fromDate(s);return{timestampValue:Gu(o.serializer,l)}}if(s instanceof Ye){const l=new Ye(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Gu(o.serializer,l)}}if(s instanceof er)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof _n)return{bytesValue:dv(o.serializer,s._byteString)};if(s instanceof gt){const l=o.databaseId,h=s.firestore._databaseId;if(!h.isEqual(l))throw o.Sc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:gf(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof tr)return(function(h,f){return{mapValue:{fields:{[j_]:{stringValue:B_},[zu]:{arrayValue:{values:h.toArray().map((y=>{if(typeof y!="number")throw f.Sc("VectorValues must only contain numeric values.");return ff(f.serializer,y)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${sc(s)}`)})(i,e)}function Hv(i,e){const t={};return O_(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ri(i,((s,o)=>{const l=Ja(o,e.mc(s));l!=null&&(t[s]=l)})),{mapValue:{fields:t}}}function Wv(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Ye||i instanceof er||i instanceof _n||i instanceof gt||i instanceof xf||i instanceof tr)}function Vf(i,e,t){if(!Wv(t)||!D_(t)){const s=sc(t);throw s==="an object"?e.Sc(i+" a custom object"):e.Sc(i+" "+s)}}function Yd(i,e,t){if((e=xt(e))instanceof _c)return e._internalPath;if(typeof e=="string")return Of(i,e);throw Yu("Field path arguments must be of type string or ",i,!1,void 0,t)}const lA=new RegExp("[~\\*/\\[\\]]");function Of(i,e,t){if(e.search(lA)>=0)throw Yu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new _c(...e.split("."))._internalPath}catch{throw Yu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function Yu(i,e,t,s,o){const l=s&&!s.isEmpty(),h=o!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let g="";return(l||h)&&(g+=" (found",l&&(g+=` in field ${s}`),h&&(g+=` in document ${o}`),g+=")"),new ie(G.INVALID_ARGUMENT,f+i+g)}function Gv(i,e){return i.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv{constructor(e,t,s,o,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new gt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new uA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Lf("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class uA extends Kv{data(){return super.data()}}function Lf(i,e){return typeof e=="string"?Of(i,e):e instanceof _c?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cA(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new ie(G.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Mf{}class hA extends Mf{}function Dy(i,e,...t){let s=[];e instanceof Mf&&s.push(e),s=s.concat(t),(function(l){const h=l.filter((g=>g instanceof bf)).length,f=l.filter((g=>g instanceof wc)).length;if(h>1||h>0&&f>0)throw new ie(G.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)i=o._apply(i);return i}class wc extends hA{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new wc(e,t,s)}_apply(e){const t=this._parse(e);return Qv(e._query,t),new Co(e.firestore,e.converter,jd(e._query,t))}_parse(e){const t=Df(e.firestore);return(function(l,h,f,g,y,w,E){let I;if(y.isKeyField()){if(w==="array-contains"||w==="array-contains-any")throw new ie(G.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if(w==="in"||w==="not-in"){Ly(E,w);const $=[];for(const q of E)$.push(Oy(g,l,q));I={arrayValue:{values:$}}}else I=Oy(g,l,E)}else w!=="in"&&w!=="not-in"&&w!=="array-contains-any"||Ly(E,w),I=aA(f,h,E,w==="in"||w==="not-in");return pt.create(y,w,I)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Vy(i,e,t){const s=e,o=Lf("where",i);return wc._create(o,s,t)}class bf extends Mf{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new bf(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:Nn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,l){let h=o;const f=l.getFlattenedFilters();for(const g of f)Qv(h,g),h=jd(h,g)})(e._query,t),new Co(e.firestore,e.converter,jd(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Oy(i,e,t){if(typeof(t=xt(t))=="string"){if(t==="")throw new ie(G.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Q_(e)&&t.indexOf("/")!==-1)throw new ie(G.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(We.fromString(t));if(!pe.isDocumentKey(s))throw new ie(G.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Gg(i,new pe(s))}if(t instanceof gt)return Gg(i,t._key);throw new ie(G.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${sc(t)}.`)}function Ly(i,e){if(!Array.isArray(i)||i.length===0)throw new ie(G.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Qv(i,e){const t=(function(o,l){for(const h of o)for(const f of h.getFlattenedFilters())if(l.indexOf(f.op)>=0)return f.op;return null})(i.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ie(G.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ie(G.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class dA{convertValue(e,t="none"){switch(Ti(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ut(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ei(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ye(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Ri(e,((o,l)=>{s[o]=this.convertValue(l,t)})),s}convertVectorValue(e){var s,o,l;const t=(l=(o=(s=e.fields)==null?void 0:s[zu].arrayValue)==null?void 0:o.values)==null?void 0:l.map((h=>ut(h.doubleValue)));return new tr(t)}convertGeoPoint(e){return new er(ut(e.latitude),ut(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=lc(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Ma(e));default:return null}}convertTimestamp(e){const t=wi(e);return new Ye(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=We.fromString(e);Be(_v(s),9688,{name:e});const o=new ba(s.get(1),s.get(3)),l=new pe(s.popFirst(5));return o.isEqual(t)||Rr(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fA(i,e,t){let s;return s=i?i.toFirestore(e):e,s}class Ca{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class os extends Kv{constructor(e,t,s,o,l,h){super(e,t,s,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Vu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Lf("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ie(G.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=os._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}os._jsonSchemaVersion="firestore/documentSnapshot/1.0",os._jsonSchema={type:mt("string",os._jsonSchemaVersion),bundleSource:mt("string","DocumentSnapshot"),bundleName:mt("string"),bundle:mt("string")};class Vu extends os{data(e={}){return super.data(e)}}class uo{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Ca(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new Vu(this._firestore,this._userDataWriter,s.key,s,new Ca(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ie(G.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((f=>{const g=new Vu(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Ca(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);return f.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const g=new Vu(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Ca(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,w=-1;return f.type!==0&&(y=h.indexOf(f.doc.key),h=h.delete(f.doc.key)),f.type!==1&&(h=h.add(f.doc),w=h.indexOf(f.doc.key)),{type:pA(f.type),doc:g,oldIndex:y,newIndex:w}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ie(G.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=uo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=of.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function pA(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ye(61501,{type:i})}}uo._jsonSchemaVersion="firestore/querySnapshot/1.0",uo._jsonSchema={type:mt("string",uo._jsonSchemaVersion),bundleSource:mt("string","QuerySnapshot"),bundleName:mt("string"),bundle:mt("string")};class Xv extends dA{constructor(e){super(),this.firestore=e}convertBytes(e){return new _n(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new gt(this.firestore,null,t)}}function Ad(i,e,t,...s){i=ss(i,gt);const o=ss(i.firestore,Ba),l=Df(o);let h;return h=typeof(e=xt(e))=="string"||e instanceof _c?oA(l,"updateDoc",i._key,e,t,s):sA(l,"updateDoc",i._key,e),Yv(o,[h.toMutation(i._key,Jn.exists(!0))])}function My(i,e){const t=ss(i.firestore,Ba),s=Du(i),o=fA(i.converter,e);return Yv(t,[iA(Df(i.firestore),"addDoc",s._key,o,i.converter!==null,{}).toMutation(s._key,Jn.exists(!1))]).then((()=>s))}function by(i,...e){var g,y,w;i=xt(i);let t={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||Ny(e[s])||(t=e[s++]);const o={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(Ny(e[s])){const E=e[s];e[s]=(g=E.next)==null?void 0:g.bind(E),e[s+1]=(y=E.error)==null?void 0:y.bind(E),e[s+2]=(w=E.complete)==null?void 0:w.bind(E)}let l,h,f;if(i instanceof gt)h=ss(i.firestore,Ba),f=df(i._key.path),l={next:E=>{e[s]&&e[s](mA(h,i,E))},error:e[s+1],complete:e[s+2]};else{const E=ss(i,Co);h=ss(E.firestore,Ba),f=E._query;const I=new Xv(h);l={next:L=>{e[s]&&e[s](new uo(h,I,E,L))},error:e[s+1],complete:e[s+2]},cA(i._query)}return(function(I,L,$,q){const H=new KS(q),Z=new kS(L,H,$);return I.asyncQueue.enqueueAndForget((async()=>AS(await Sy(I),Z))),()=>{H.Nu(),I.asyncQueue.enqueueAndForget((async()=>RS(await Sy(I),Z)))}})(zv(h),f,o,l)}function Yv(i,e){return(function(s,o){const l=new is;return s.asyncQueue.enqueueAndForget((async()=>FS(await YS(s),o,l))),l.promise})(zv(i),e)}function mA(i,e,t){const s=t.docs.get(e._key),o=new Xv(i);return new os(i,o,e._key,s,new Ca(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){Io=o})(To),po(new ls("firestore",((s,{instanceIdentifier:o,options:l})=>{const h=s.getProvider("app").getImmediate(),f=new Ba(new rT(s.getProvider("auth-internal")),new oT(h,s.getProvider("app-check-internal")),(function(y,w){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new ie(G.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ba(y.options.projectId,w)})(h,o),h);return l={useFetchStreams:t,...l},f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),mi(Og,Lg,e),mi(Og,Lg,"esm2020")})();function Jv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const gA=Jv,Zv=new qa("auth","Firebase",Jv());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ju=new tf("@firebase/auth");function yA(i,...e){Ju.logLevel<=ke.WARN&&Ju.warn(`Auth (${To}): ${i}`,...e)}function Ou(i,...e){Ju.logLevel<=ke.ERROR&&Ju.error(`Auth (${To}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pr(i,...e){throw Uf(i,...e)}function nr(i,...e){return Uf(i,...e)}function e0(i,e,t){const s={...gA(),[e]:t};return new qa("auth","Firebase",s).create(e,{appName:i.name})}function _i(i){return e0(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Uf(i,...e){if(typeof i!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=i.name),i._errorFactory.create(t,...s)}return Zv.create(i,...e)}function Ee(i,e,...t){if(!i)throw Uf(e,...t)}function Ir(i){const e="INTERNAL ASSERTION FAILED: "+i;throw Ou(e),new Error(e)}function kr(i,e){i||Ir(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jd(){var i;return typeof self<"u"&&((i=self.location)==null?void 0:i.href)||""}function _A(){return Uy()==="http:"||Uy()==="https:"}function Uy(){var i;return typeof self<"u"&&((i=self.location)==null?void 0:i.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_A()||Dw()||"connection"in navigator)?navigator.onLine:!0}function wA(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(e,t){this.shortDelay=e,this.longDelay=t,kr(t>e,"Short delay should be less than long delay!"),this.isMobile=kw()||Vw()}get(){return vA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ff(i,e){kr(i.emulator,"Emulator should always be set here");const{url:t}=i.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ir("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ir("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ir("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],IA=new Za(3e4,6e4);function Ec(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function Po(i,e,t,s,o={}){return n0(i,o,async()=>{let l={},h={};s&&(e==="GET"?h=s:l={body:JSON.stringify(s)});const f=Ha({key:i.config.apiKey,...h}).slice(1),g=await i._getAdditionalHeaders();g["Content-Type"]="application/json",i.languageCode&&(g["X-Firebase-Locale"]=i.languageCode);const y={method:e,headers:g,...l};return Nw()||(y.referrerPolicy="no-referrer"),i.emulatorConfig&&Eo(i.emulatorConfig.host)&&(y.credentials="include"),t0.fetch()(await i0(i,i.config.apiHost,t,f),y)})}async function n0(i,e,t){i._canInitEmulator=!1;const s={...EA,...e};try{const o=new SA(i),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await l.json();if("needConfirmation"in h)throw Ru(i,"account-exists-with-different-credential",h);if(l.ok&&!("errorMessage"in h))return h;{const f=l.ok?h.errorMessage:h.error.message,[g,y]=f.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ru(i,"credential-already-in-use",h);if(g==="EMAIL_EXISTS")throw Ru(i,"email-already-in-use",h);if(g==="USER_DISABLED")throw Ru(i,"user-disabled",h);const w=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw e0(i,w,y);Pr(i,w)}}catch(o){if(o instanceof xr)throw o;Pr(i,"network-request-failed",{message:String(o)})}}async function r0(i,e,t,s,o={}){const l=await Po(i,e,t,s,o);return"mfaPendingCredential"in l&&Pr(i,"multi-factor-auth-required",{_serverResponse:l}),l}async function i0(i,e,t,s){const o=`${e}${t}?${s}`,l=i,h=l.config.emulator?Ff(i.config,o):`${i.config.apiScheme}://${o}`;return TA.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(h).toString():h}class SA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(nr(this.auth,"network-request-failed")),IA.get())})}}function Ru(i,e,t){const s={appName:i.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=nr(i,e,s);return o.customData._tokenResponse=t,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AA(i,e){return Po(i,"POST","/v1/accounts:delete",e)}async function Zu(i,e){return Po(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Va(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function RA(i,e=!1){const t=xt(i),s=await t.getIdToken(e),o=jf(s);Ee(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,h=l==null?void 0:l.sign_in_provider;return{claims:o,token:s,authTime:Va(Rd(o.auth_time)),issuedAtTime:Va(Rd(o.iat)),expirationTime:Va(Rd(o.exp)),signInProvider:h||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Rd(i){return Number(i)*1e3}function jf(i){const[e,t,s]=i.split(".");if(e===void 0||t===void 0||s===void 0)return Ou("JWT malformed, contained fewer than 3 sections"),null;try{const o=h_(t);return o?JSON.parse(o):(Ou("Failed to decode base64 JWT payload"),null)}catch(o){return Ou("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function Fy(i){const e=jf(i);return Ee(e,"internal-error"),Ee(typeof e.exp<"u","internal-error"),Ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function za(i,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof xr&&CA(s)&&i.auth.currentUser===i&&await i.auth.signOut(),s}}function CA({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Va(this.lastLoginAt),this.creationTime=Va(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ec(i){var E;const e=i.auth,t=await i.getIdToken(),s=await za(i,Zu(e,{idToken:t}));Ee(s==null?void 0:s.users.length,e,"internal-error");const o=s.users[0];i._notifyReloadListener(o);const l=(E=o.providerUserInfo)!=null&&E.length?s0(o.providerUserInfo):[],h=xA(i.providerData,l),f=i.isAnonymous,g=!(i.email&&o.passwordHash)&&!(h!=null&&h.length),y=f?g:!1,w={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new Zd(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(i,w)}async function kA(i){const e=xt(i);await ec(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function xA(i,e){return[...i.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function s0(i){return i.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NA(i,e){const t=await n0(i,{},async()=>{const s=Ha({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=i.config,h=await i0(i,o,"/v1/token",`key=${l}`),f=await i._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:f,body:s};return i.emulatorConfig&&Eo(i.emulatorConfig.host)&&(g.credentials="include"),t0.fetch()(h,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function DA(i,e){return Po(i,"POST","/v2/accounts:revokeToken",Ec(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ee(e.idToken,"internal-error"),Ee(typeof e.idToken<"u","internal-error"),Ee(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Fy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ee(e.length!==0,"internal-error");const t=Fy(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:l}=await NA(e,t);this.updateTokensAndExpiration(s,o,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:l}=t,h=new co;return s&&(Ee(typeof s=="string","internal-error",{appName:e}),h.refreshToken=s),o&&(Ee(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),l&&(Ee(typeof l=="number","internal-error",{appName:e}),h.expirationTime=l),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new co,this.toJSON())}_performRefresh(){return Ir("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ai(i,e){Ee(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class xn{constructor({uid:e,auth:t,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new PA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Zd(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await za(this,this.stsTokenManager.getToken(this.auth,e));return Ee(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return RA(this,e)}reload(){return kA(this)}_assign(e){this!==e&&(Ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new xn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await ec(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(kn(this.auth.app))return Promise.reject(_i(this.auth));const e=await this.getIdToken();return await za(this,AA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,o=t.email??void 0,l=t.phoneNumber??void 0,h=t.photoURL??void 0,f=t.tenantId??void 0,g=t._redirectEventId??void 0,y=t.createdAt??void 0,w=t.lastLoginAt??void 0,{uid:E,emailVerified:I,isAnonymous:L,providerData:$,stsTokenManager:q}=t;Ee(E&&q,e,"internal-error");const H=co.fromJSON(this.name,q);Ee(typeof E=="string",e,"internal-error"),ai(s,e.name),ai(o,e.name),Ee(typeof I=="boolean",e,"internal-error"),Ee(typeof L=="boolean",e,"internal-error"),ai(l,e.name),ai(h,e.name),ai(f,e.name),ai(g,e.name),ai(y,e.name),ai(w,e.name);const Z=new xn({uid:E,auth:e,email:o,emailVerified:I,displayName:s,isAnonymous:L,photoURL:h,phoneNumber:l,tenantId:f,stsTokenManager:H,createdAt:y,lastLoginAt:w});return $&&Array.isArray($)&&(Z.providerData=$.map(se=>({...se}))),g&&(Z._redirectEventId=g),Z}static async _fromIdTokenResponse(e,t,s=!1){const o=new co;o.updateFromServerResponse(t);const l=new xn({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await ec(l),l}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];Ee(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?s0(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),f=new co;f.updateFromIdToken(s);const g=new xn({uid:o.localId,auth:e,stsTokenManager:f,isAnonymous:h}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Zd(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(g,y),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jy=new Map;function Sr(i){kr(i instanceof Function,"Expected a class definition");let e=jy.get(i);return e?(kr(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,jy.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}o0.type="NONE";const By=o0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lu(i,e,t){return`firebase:${i}:${e}:${t}`}class ho{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:l}=this.auth;this.fullUserKey=Lu(this.userKey,o.apiKey,l),this.fullPersistenceKey=Lu("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Zu(this.auth,{idToken:e}).catch(()=>{});return t?xn._fromGetAccountInfoResponse(this.auth,t,e):null}return xn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new ho(Sr(By),e,s);const o=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=o[0]||Sr(By);const h=Lu(s,e.config.apiKey,e.name);let f=null;for(const y of t)try{const w=await y._get(h);if(w){let E;if(typeof w=="string"){const I=await Zu(e,{idToken:w}).catch(()=>{});if(!I)break;E=await xn._fromGetAccountInfoResponse(e,I,w)}else E=xn._fromJSON(e,w);y!==l&&(f=E),l=y;break}}catch{}const g=o.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!g.length?new ho(l,e,s):(l=g[0],f&&await l._set(h,f.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(h)}catch{}})),new ho(l,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zy(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(c0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(a0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(d0(e))return"Blackberry";if(f0(e))return"Webos";if(l0(e))return"Safari";if((e.includes("chrome/")||u0(e))&&!e.includes("edge/"))return"Chrome";if(h0(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=i.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function a0(i=jt()){return/firefox\//i.test(i)}function l0(i=jt()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function u0(i=jt()){return/crios\//i.test(i)}function c0(i=jt()){return/iemobile/i.test(i)}function h0(i=jt()){return/android/i.test(i)}function d0(i=jt()){return/blackberry/i.test(i)}function f0(i=jt()){return/webos/i.test(i)}function Bf(i=jt()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function VA(i=jt()){var e;return Bf(i)&&!!((e=window.navigator)!=null&&e.standalone)}function OA(){return Ow()&&document.documentMode===10}function p0(i=jt()){return Bf(i)||h0(i)||f0(i)||d0(i)||/windows phone/i.test(i)||c0(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m0(i,e=[]){let t;switch(i){case"Browser":t=zy(jt());break;case"Worker":t=`${zy(jt())}-${i}`;break;default:t=i}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${To}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((h,f)=>{try{const g=e(l);h(g)}catch(g){f(g)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MA(i,e={}){return Po(i,"GET","/v2/passwordPolicy",Ec(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bA=6;class UA{constructor(e){var s;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??bA,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $y(this),this.idTokenSubscription=new $y(this),this.beforeStateQueue=new LA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Zv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Sr(t)),this._initializationPromise=this.queue(async()=>{var s,o,l;if(!this._deleted&&(this.persistenceManager=await ho.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Zu(this,{idToken:e}),s=await xn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(kn(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(f,f))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(l=this.redirectUser)==null?void 0:l._redirectEventId,f=s==null?void 0:s._redirectEventId,g=await this.tryRedirectSignIn(e);(!h||h===f)&&(g!=null&&g.user)&&(s=g.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(h){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ec(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=wA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(kn(this.app))return Promise.reject(_i(this));const t=e?xt(e):null;return t&&Ee(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return kn(this.app)?Promise.reject(_i(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return kn(this.app)?Promise.reject(_i(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Sr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await MA(this),t=new UA(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new qa("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await DA(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Sr(e)||this._popupRedirectResolver;Ee(t,this,"argument-error"),this.redirectPersistenceManager=await ho.create(this,[Sr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let h=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ee(f,this,"internal-error"),f.then(()=>{h||l(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,s,o);return()=>{h=!0,g()}}else{const g=e.addObserver(t);return()=>{h=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=m0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var t;if(kn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&yA(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Tc(i){return xt(i)}class $y{constructor(e){this.auth=e,this.observer=null,this.addObserver=zw(t=>this.observer=t)}get next(){return Ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function jA(i){zf=i}function BA(i){return zf.loadJS(i)}function zA(){return zf.gapiScript}function $A(i){return`__${i}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qA(i,e){const t=rf(i,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(as(l,e??{}))return o;Pr(o,"already-initialized")}return t.initialize({options:e})}function HA(i,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(Sr);e!=null&&e.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function WA(i,e,t){const s=Tc(i);Ee(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,l=g0(e),{host:h,port:f}=GA(e),g=f===null?"":`:${f}`,y={url:`${l}//${h}${g}/`},w=Object.freeze({host:h,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Ee(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Ee(as(y,s.config.emulator)&&as(w,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=y,s.emulatorConfig=w,s.settings.appVerificationDisabledForTesting=!0,Eo(h)?(m_(`${l}//${h}${g}`),g_("Auth",!0)):KA()}function g0(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function GA(i){const e=g0(i),t=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const l=o[1];return{host:l,port:qy(s.substr(l.length+1))}}else{const[l,h]=s.split(":");return{host:l,port:qy(h)}}}function qy(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function KA(){function i(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ir("not implemented")}_getIdTokenResponse(e){return Ir("not implemented")}_linkToIdToken(e,t){return Ir("not implemented")}_getReauthenticationResolver(e){return Ir("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fo(i,e){return r0(i,"POST","/v1/accounts:signInWithIdp",Ec(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QA="http://localhost";class hs extends y0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new hs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Pr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...l}=t;if(!s||!o)return null;const h=new hs(s,o);return h.idToken=l.idToken||void 0,h.accessToken=l.accessToken||void 0,h.secret=l.secret,h.nonce=l.nonce,h.pendingToken=l.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return fo(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,fo(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,fo(e,t)}buildRequest(){const e={requestUri:QA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ha(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el extends _0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li extends el{constructor(){super("facebook.com")}static credential(e){return hs._fromParams({providerId:li.PROVIDER_ID,signInMethod:li.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return li.credentialFromTaggedObject(e)}static credentialFromError(e){return li.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return li.credential(e.oauthAccessToken)}catch{return null}}}li.FACEBOOK_SIGN_IN_METHOD="facebook.com";li.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui extends el{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return hs._fromParams({providerId:ui.PROVIDER_ID,signInMethod:ui.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ui.credentialFromTaggedObject(e)}static credentialFromError(e){return ui.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return ui.credential(t,s)}catch{return null}}}ui.GOOGLE_SIGN_IN_METHOD="google.com";ui.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci extends el{constructor(){super("github.com")}static credential(e){return hs._fromParams({providerId:ci.PROVIDER_ID,signInMethod:ci.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ci.credentialFromTaggedObject(e)}static credentialFromError(e){return ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ci.credential(e.oauthAccessToken)}catch{return null}}}ci.GITHUB_SIGN_IN_METHOD="github.com";ci.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi extends el{constructor(){super("twitter.com")}static credential(e,t){return hs._fromParams({providerId:hi.PROVIDER_ID,signInMethod:hi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return hi.credentialFromTaggedObject(e)}static credentialFromError(e){return hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return hi.credential(t,s)}catch{return null}}}hi.TWITTER_SIGN_IN_METHOD="twitter.com";hi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XA(i,e){return r0(i,"POST","/v1/accounts:signUp",Ec(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const l=await xn._fromIdTokenResponse(e,s,o),h=Hy(s);return new Ai({user:l,providerId:h,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=Hy(s);return new Ai({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function Hy(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YA(i){var o;if(kn(i.app))return Promise.reject(_i(i));const e=Tc(i);if(await e._initializationPromise,(o=e.currentUser)!=null&&o.isAnonymous)return new Ai({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await XA(e,{returnSecureToken:!0}),s=await Ai._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc extends xr{constructor(e,t,s,o){super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,tc.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new tc(e,t,s,o)}}function v0(i,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(i):t._getIdTokenResponse(i)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?tc._fromErrorAndOperation(i,l,e,s):l})}async function JA(i,e,t=!1){const s=await za(i,e._linkToIdToken(i.auth,await i.getIdToken()),t);return Ai._forOperation(i,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZA(i,e,t=!1){const{auth:s}=i;if(kn(s.app))return Promise.reject(_i(s));const o="reauthenticate";try{const l=await za(i,v0(s,o,e,i),t);Ee(l.idToken,s,"internal-error");const h=jf(l.idToken);Ee(h,s,"internal-error");const{sub:f}=h;return Ee(i.uid===f,s,"user-mismatch"),Ai._forOperation(i,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Pr(s,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e2(i,e,t=!1){if(kn(i.app))return Promise.reject(_i(i));const s="signIn",o=await v0(i,s,e),l=await Ai._fromIdTokenResponse(i,s,o);return t||await i._updateCurrentUser(l.user),l}function t2(i,e,t,s){return xt(i).onIdTokenChanged(e,t,s)}function n2(i,e,t){return xt(i).beforeAuthStateChanged(e,t)}function r2(i,e,t,s){return xt(i).onAuthStateChanged(e,t,s)}const nc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(nc,"1"),this.storage.removeItem(nc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i2=1e3,s2=10;class E0 extends w0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=p0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,f,g)=>{this.notifyListeners(h,g)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(s);!t&&this.localCache[s]===h||this.notifyListeners(s,h)},l=this.storage.getItem(s);OA()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,s2):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},i2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}E0.type="LOCAL";const o2=E0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0 extends w0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}T0.type="SESSION";const I0=T0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a2(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new Ic(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:l}=t.data,h=this.handlersMap[o];if(!(h!=null&&h.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const f=Array.from(h).map(async y=>y(t.origin,l)),g=await a2(f);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ic.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $f(i="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return i+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,h;return new Promise((f,g)=>{const y=$f("",20);o.port1.start();const w=setTimeout(()=>{g(new Error("unsupported_event"))},s);h={messageChannel:o,onMessage(E){const I=E;if(I.data.eventId===y)switch(I.data.status){case"ack":clearTimeout(w),l=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(I.data.response);break;default:clearTimeout(w),clearTimeout(l),g(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rr(){return window}function u2(i){rr().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S0(){return typeof rr().WorkerGlobalScope<"u"&&typeof rr().importScripts=="function"}async function c2(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function h2(){var i;return((i=navigator==null?void 0:navigator.serviceWorker)==null?void 0:i.controller)||null}function d2(){return S0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A0="firebaseLocalStorageDb",f2=1,rc="firebaseLocalStorage",R0="fbase_key";class tl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Sc(i,e){return i.transaction([rc],e?"readwrite":"readonly").objectStore(rc)}function p2(){const i=indexedDB.deleteDatabase(A0);return new tl(i).toPromise()}function ef(){const i=indexedDB.open(A0,f2);return new Promise((e,t)=>{i.addEventListener("error",()=>{t(i.error)}),i.addEventListener("upgradeneeded",()=>{const s=i.result;try{s.createObjectStore(rc,{keyPath:R0})}catch(o){t(o)}}),i.addEventListener("success",async()=>{const s=i.result;s.objectStoreNames.contains(rc)?e(s):(s.close(),await p2(),e(await ef()))})})}async function Wy(i,e,t){const s=Sc(i,!0).put({[R0]:e,value:t});return new tl(s).toPromise()}async function m2(i,e){const t=Sc(i,!1).get(e),s=await new tl(t).toPromise();return s===void 0?null:s.value}function Gy(i,e){const t=Sc(i,!0).delete(e);return new tl(t).toPromise()}const g2=800,y2=3;class C0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ef(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>y2)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return S0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ic._getInstance(d2()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,s;if(this.activeServiceWorker=await c2(),!this.activeServiceWorker)return;this.sender=new l2(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||h2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ef();return await Wy(e,nc,"1"),await Gy(e,nc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>Wy(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>m2(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Gy(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Sc(o,!1).getAll();return new tl(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),g2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}C0.type="LOCAL";const _2=C0;new Za(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v2(i,e){return e?Sr(e):(Ee(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf extends y0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return fo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return fo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return fo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function w2(i){return e2(i.auth,new qf(i),i.bypassAuthState)}function E2(i){const{auth:e,user:t}=i;return Ee(t,e,"internal-error"),ZA(t,new qf(i),i.bypassAuthState)}async function T2(i){const{auth:e,user:t}=i;return Ee(t,e,"internal-error"),JA(t,new qf(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(e,t,s,o,l=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:l,error:h,type:f}=e;if(h){this.reject(h);return}const g={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return w2;case"linkViaPopup":case"linkViaRedirect":return T2;case"reauthViaPopup":case"reauthViaRedirect":return E2;default:Pr(this.auth,"internal-error")}}resolve(e){kr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){kr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I2=new Za(2e3,1e4);class ao extends P0{constructor(e,t,s,o,l){super(e,t,o,l),this.provider=s,this.authWindow=null,this.pollId=null,ao.currentPopupAction&&ao.currentPopupAction.cancel(),ao.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ee(e,this.auth,"internal-error"),e}async onExecution(){kr(this.filter.length===1,"Popup operations only handle one event");const e=$f();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(nr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(nr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ao.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if((s=(t=this.authWindow)==null?void 0:t.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(nr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,I2.get())};e()}}ao.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S2="pendingRedirect",Mu=new Map;class A2 extends P0{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Mu.get(this.auth._key());if(!e){try{const s=await R2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Mu.set(this.auth._key(),e)}return this.bypassAuthState||Mu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function R2(i,e){const t=k2(e),s=P2(i);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function C2(i,e){Mu.set(i._key(),e)}function P2(i){return Sr(i._redirectPersistence)}function k2(i){return Lu(S2,i.config.apiKey,i.name)}async function x2(i,e,t=!1){if(kn(i.app))return Promise.reject(_i(i));const s=Tc(i),o=v2(s,e),h=await new A2(s,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await s._persistUserIfCurrent(h.user),await s._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N2=600*1e3;class D2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!V2(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!k0(e)){const o=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";t.onError(nr(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=N2&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ky(e))}saveEventToCache(e){this.cachedEventUids.add(Ky(e)),this.lastProcessedEventTime=Date.now()}}function Ky(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function k0({type:i,error:e}){return i==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function V2(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return k0(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O2(i,e={}){return Po(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,M2=/^https?/;async function b2(i){if(i.config.emulator)return;const{authorizedDomains:e}=await O2(i);for(const t of e)try{if(U2(t))return}catch{}Pr(i,"unauthorized-domain")}function U2(i){const e=Jd(),{protocol:t,hostname:s}=new URL(e);if(i.startsWith("chrome-extension://")){const h=new URL(i);return h.hostname===""&&s===""?t==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===s}if(!M2.test(t))return!1;if(L2.test(i))return s===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F2=new Za(3e4,6e4);function Qy(){const i=rr().___jsl;if(i!=null&&i.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let t=0;t<i.CP.length;t++)i.CP[t]=null}}function j2(i){return new Promise((e,t)=>{var o,l,h;function s(){Qy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Qy(),t(nr(i,"network-request-failed"))},timeout:F2.get()})}if((l=(o=rr().gapi)==null?void 0:o.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((h=rr().gapi)!=null&&h.load)s();else{const f=$A("iframefcb");return rr()[f]=()=>{gapi.load?s():t(nr(i,"network-request-failed"))},BA(`${zA()}?onload=${f}`).catch(g=>t(g))}}).catch(e=>{throw bu=null,e})}let bu=null;function B2(i){return bu=bu||j2(i),bu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z2=new Za(5e3,15e3),$2="__/auth/iframe",q2="emulator/auth/iframe",H2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},W2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function G2(i){const e=i.config;Ee(e.authDomain,i,"auth-domain-config-required");const t=e.emulator?Ff(e,q2):`https://${i.config.authDomain}/${$2}`,s={apiKey:e.apiKey,appName:i.name,v:To},o=W2.get(i.config.apiHost);o&&(s.eid=o);const l=i._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${Ha(s).slice(1)}`}async function K2(i){const e=await B2(i),t=rr().gapi;return Ee(t,i,"internal-error"),e.open({where:document.body,url:G2(i),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:H2,dontclear:!0},s=>new Promise(async(o,l)=>{await s.restyle({setHideOnLeave:!1});const h=nr(i,"network-request-failed"),f=rr().setTimeout(()=>{l(h)},z2.get());function g(){rr().clearTimeout(f),o(s)}s.ping(g).then(g,()=>{l(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},X2=500,Y2=600,J2="_blank",Z2="http://localhost";class Xy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function eR(i,e,t,s=X2,o=Y2){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-s)/2,0).toString();let f="";const g={...Q2,width:s.toString(),height:o.toString(),top:l,left:h},y=jt().toLowerCase();t&&(f=u0(y)?J2:t),a0(y)&&(e=e||Z2,g.scrollbars="yes");const w=Object.entries(g).reduce((I,[L,$])=>`${I}${L}=${$},`,"");if(VA(y)&&f!=="_self")return tR(e||"",f),new Xy(null);const E=window.open(e||"",f,w);Ee(E,i,"popup-blocked");try{E.focus()}catch{}return new Xy(E)}function tR(i,e){const t=document.createElement("a");t.href=i,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nR="__/auth/handler",rR="emulator/auth/handler",iR=encodeURIComponent("fac");async function Yy(i,e,t,s,o,l){Ee(i.config.authDomain,i,"auth-domain-config-required"),Ee(i.config.apiKey,i,"invalid-api-key");const h={apiKey:i.config.apiKey,appName:i.name,authType:t,redirectUrl:s,v:To,eventId:o};if(e instanceof _0){e.setDefaultLanguage(i.languageCode),h.providerId=e.providerId||"",Bw(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[w,E]of Object.entries({}))h[w]=E}if(e instanceof el){const w=e.getScopes().filter(E=>E!=="");w.length>0&&(h.scopes=w.join(","))}i.tenantId&&(h.tid=i.tenantId);const f=h;for(const w of Object.keys(f))f[w]===void 0&&delete f[w];const g=await i._getAppCheckToken(),y=g?`#${iR}=${encodeURIComponent(g)}`:"";return`${sR(i)}?${Ha(f).slice(1)}${y}`}function sR({config:i}){return i.emulator?Ff(i,rR):`https://${i.authDomain}/${nR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cd="webStorageSupport";class oR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=I0,this._completeRedirectFn=x2,this._overrideRedirectResult=C2}async _openPopup(e,t,s,o){var h;kr((h=this.eventManagers[e._key()])==null?void 0:h.manager,"_initialize() not called before _openPopup()");const l=await Yy(e,t,s,Jd(),o);return eR(e,l,$f())}async _openRedirect(e,t,s,o){await this._originValidation(e);const l=await Yy(e,t,s,Jd(),o);return u2(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(kr(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await K2(e),s=new D2(e);return t.register("authEvent",o=>(Ee(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Cd,{type:Cd},o=>{var h;const l=(h=o==null?void 0:o[0])==null?void 0:h[Cd];l!==void 0&&t(!!l),Pr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=b2(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return p0()||l0()||Bf()}}const aR=oR;var Jy="@firebase/auth",Zy="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uR(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function cR(i){po(new ls("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:h,authDomain:f}=s.options;Ee(h&&!h.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:h,authDomain:f,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:m0(i)},y=new FA(s,o,l,g);return HA(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),po(new ls("auth-internal",e=>{const t=Tc(e.getProvider("auth").getImmediate());return(s=>new lR(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),mi(Jy,Zy,uR(i)),mi(Jy,Zy,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR=300,dR=p_("authIdTokenMaxAge")||hR;let e_=null;const fR=i=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>dR)return;const o=t==null?void 0:t.token;e_!==o&&(e_=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function pR(i=w_()){const e=rf(i,"auth");if(e.isInitialized())return e.getImmediate();const t=qA(i,{popupRedirectResolver:aR,persistence:[_2,o2,I0]}),s=p_("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const h=fR(l.toString());n2(t,h,()=>h(t.currentUser)),t2(t,f=>h(f))}}const o=d_("auth");return o&&WA(t,`http://${o}`),t}function mR(){var i;return((i=document.getElementsByTagName("head"))==null?void 0:i[0])??document}jA({loadJS(i){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",i),s.onload=e,s.onerror=o=>{const l=nr("internal-error");l.customData=o,t(l)},s.type="text/javascript",s.charset="UTF-8",mR().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});cR("Browser");const gR={apiKey:"AIzaSyCB1Gth4lKqcJ3-c3o_dE9JdJ3d5HholxE",authDomain:"my-contact-app-a475b.firebaseapp.com",projectId:"my-contact-app-a475b",storageBucket:"my-contact-app-a475b.firebasestorage.app",messagingSenderId:"526245275416",appId:"1:526245275416:web:b32e5e7791acae5aa8a06d",measurementId:"G-S8GDY4XJ6T"},x0=v_(gR),ts=ZS(x0),t_=pR(x0);function yR(){const i=new URLSearchParams(window.location.search),e=i.get("mode"),t=i.get("room")||"",s=i.get("limit"),o=i.get("start");if(e==="admin")return V.jsx(_R,{});const[l,h]=Xe.useState(null),[f,g]=Xe.useState(null),[y,w]=Xe.useState([]),[E,I]=Xe.useState([]),[L,$]=Xe.useState([]),[q,H]=Xe.useState("register"),[Z,se]=Xe.useState(!1),[fe,Te]=Xe.useState(!1),[De,Ce]=Xe.useState(""),[k,A]=Xe.useState(!1),[R,D]=Xe.useState({name:"",message:"",phone:"",line:"",email:"",url:""});if(Xe.useEffect(()=>{if(s){const ce=new Date(s);if(!isNaN(ce.getTime())&&new Date>ce){se(!0);return}}const j=()=>{if(o){const ce=new Date(o);if(!isNaN(ce.getTime()))if(new Date<ce){Te(!0);const _e=ce.getHours().toString().padStart(2,"0"),ve=ce.getMinutes().toString().padStart(2,"0");Ce(`${_e}:${ve}`)}else Te(!1)}else Te(!1)};j();const N=setInterval(j,1e3),W=r2(t_,ce=>{ce?g(ce.uid):YA(t_).catch(le=>console.error("Login failed:",le))});return()=>{W(),clearInterval(N)}},[s,o]),Xe.useEffect(()=>{const j=Dy(Au(ts,"users"),Vy("room","==",t)),N=by(j,le=>{const _e=le.docs.map(Ie=>({id:Ie.id,...Ie.data()}));w(_e);const ve=_e.find(Ie=>Ie.uid===f);ve&&(h(ve),q==="register"&&!R.name&&H("participants"))}),W=Dy(Au(ts,"requests"),Vy("room","==",t)),ce=by(W,le=>{const _e=le.docs.map(Ie=>({id:Ie.id,...Ie.data()}));I(_e);const ve=_e.filter(Ie=>Ie.status==="matched"&&(Ie.fromUid===f||Ie.toUid===f));$(ve)});return()=>{N(),ce()}},[t,f]),Z)return V.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center p-4",children:V.jsxs("div",{className:"bg-white max-w-md w-full p-8 rounded-2xl shadow-xl text-center",children:[V.jsx("div",{className:"inline-block p-4 bg-gray-200 rounded-full mb-6",children:V.jsx(Pd,{className:"w-12 h-12 text-gray-500"})}),V.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:""}),V.jsxs("p",{className:"text-gray-600 mb-6",children:["",t,""]})]})});const x=async()=>{if(!R.name||!f)return;const j={name:R.name||"",message:R.message||"",phone:R.phone||"",line:R.line||"",email:R.email||"",url:R.url||""};try{const N=y.find(W=>W.uid===f);if(N){const W=Du(ts,"users",N.id);await Ad(W,j)}else await My(Au(ts,"users"),{uid:f,room:t,createdAt:new Date,...j});D({name:"",message:"",phone:"",line:"",email:"",url:""}),H("participants")}catch(N){alert(""+N.message),console.error(N)}},M=()=>{l&&(D({name:l.name||"",message:l.message||"",phone:l.phone||"",line:l.line||"",email:l.email||"",url:l.url||""}),H("register"))},C=async j=>{if(l)try{await My(Au(ts,"requests"),{room:t,fromUid:l.uid,fromName:l.name||"",fromMessage:l.message||"",fromPhone:l.phone||"",fromLine:l.line||"",fromEmail:l.email||"",fromUrl:l.url||"",toUid:j.uid,toName:j.name||"",toMessage:j.message||"",toPhone:j.phone||"",toLine:j.line||"",toEmail:j.email||"",toUrl:j.url||"",status:"pending",createdAt:new Date}),alert("")}catch(N){console.error(N),alert(""+N.message)}},Le=j=>{if(fe){alert(`${De}
`);return}Je(j)},Je=async j=>{try{const N=Du(ts,"requests",j.id);await Ad(N,{status:"matched"})}catch(N){console.error(N)}},rt=async j=>{try{const N=Du(ts,"requests",j.id);await Ad(N,{status:"skipped"})}catch(N){console.error(N)}},je=E.filter(j=>j.toUid===f&&j.status==="pending"),te=E.filter(j=>j.toUid===f&&j.status==="skipped"),de=E.filter(j=>j.fromUid===f&&j.status==="pending");return q==="register"?V.jsx("div",{className:"min-h-screen bg-gradient-to-br from-pink-50 to-red-50 p-4",children:V.jsx("div",{className:"max-w-md mx-auto pt-8",children:V.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6",children:[V.jsxs("div",{className:"text-center mb-6",children:[V.jsx("div",{className:"flex justify-center mb-4",children:V.jsx("div",{className:"w-24 h-24 rounded-full overflow-hidden shadow-lg border-4 border-pink-100",children:V.jsx("img",{src:"logo.png",alt:"Logo",className:"w-full h-full object-cover"})})}),V.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:""}),V.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 bg-pink-50 text-pink-600 rounded-full text-xs font-bold",children:[": ",t]})]}),V.jsxs("div",{className:"space-y-4",children:[V.jsxs("div",{children:[V.jsxs("label",{className:"block text-xs font-bold text-gray-700 mb-1",children:[" ",V.jsx("span",{className:"text-red-500",children:"*"})]}),V.jsx("input",{type:"text",value:R.name,onChange:j=>D({...R,name:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500",placeholder:""})]}),V.jsxs("div",{children:[V.jsx("label",{className:"block text-xs font-bold text-gray-700 mb-1",children:""}),V.jsx("textarea",{value:R.message,onChange:j=>D({...R,message:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500",placeholder:"",rows:"2"})]}),V.jsxs("div",{className:"border-t pt-4",children:[V.jsx("p",{className:"text-xs text-gray-500 mb-3 font-bold",children:""}),V.jsxs("div",{className:"mb-3",children:[V.jsxs("label",{className:"flex items-center gap-2 text-xs font-medium text-gray-700 mb-1",children:[V.jsx(nd,{className:"w-3 h-3"})," "]}),V.jsx("input",{type:"tel",value:R.phone,onChange:j=>D({...R,phone:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"090-0000-0000"})]}),V.jsxs("div",{className:"mb-3",children:[V.jsxs("label",{className:"flex items-center gap-2 text-xs font-medium text-gray-700 mb-1",children:[V.jsx(td,{className:"w-3 h-3"})," LINE ID"]}),V.jsx("input",{type:"text",value:R.line,onChange:j=>D({...R,line:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"line_id_1234"})]}),V.jsxs("div",{className:"mb-3",children:[V.jsxs("label",{className:"flex items-center gap-2 text-xs font-medium text-gray-700 mb-1",children:[V.jsx(ed,{className:"w-3 h-3"})," "]}),V.jsx("input",{type:"email",value:R.email,onChange:j=>D({...R,email:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"example@email.com"})]}),V.jsxs("div",{className:"mb-3",children:[V.jsxs("label",{className:"flex items-center gap-2 text-xs font-medium text-gray-700 mb-1",children:[V.jsx(Zh,{className:"w-3 h-3"})," URL"]}),V.jsx("input",{type:"url",value:R.url,onChange:j=>D({...R,url:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"https://..."})]})]}),V.jsxs("div",{className:"flex gap-3 pt-2",children:[l&&V.jsx("button",{type:"button",onClick:()=>H("participants"),className:"flex-1 bg-gray-200 text-gray-700 font-bold py-3 rounded-lg hover:bg-gray-300",children:""}),V.jsx("button",{type:"button",onClick:x,disabled:!f,className:"flex-1 bg-gradient-to-r from-pink-500 to-red-500 text-white font-bold py-3 rounded-lg hover:from-pink-600 shadow-lg disabled:opacity-50",children:l?"":""})]})]})]})})}):V.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-pink-50 to-red-50",children:[V.jsxs("div",{className:"bg-white shadow-sm border-b sticky top-0 z-10",children:[V.jsx("div",{className:"max-w-6xl mx-auto px-4 py-3",children:V.jsx("div",{className:"flex items-center justify-between",children:V.jsxs("div",{className:"flex items-center gap-3",children:[V.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden border border-pink-100",children:V.jsx("img",{src:"logo.png",alt:"Logo",className:"w-full h-full object-cover"})}),V.jsxs("div",{children:[V.jsx("h1",{className:"text-lg font-bold text-gray-800 leading-tight",children:""}),V.jsxs("div",{className:"flex items-center gap-2",children:[V.jsxs("p",{className:"text-xs text-gray-600",children:[l==null?void 0:l.name,""]}),V.jsxs("button",{onClick:M,className:"flex items-center gap-1 text-[10px] bg-gray-100 text-gray-600 px-2 py-0.5 rounded border border-gray-200",children:[V.jsx(nw,{className:"w-3 h-3"})," "]})]})]})]})})}),V.jsxs("div",{className:"max-w-6xl mx-auto px-4 flex gap-6 text-sm",children:[V.jsx("button",{onClick:()=>H("participants"),className:`pb-2 border-b-2 transition ${q==="participants"?"border-pink-500 text-pink-600 font-bold":"border-transparent text-gray-500"}`,children:""}),V.jsxs("button",{onClick:()=>H("requests"),className:`pb-2 border-b-2 transition relative ${q==="requests"?"border-pink-500 text-pink-600 font-bold":"border-transparent text-gray-500"}`,children:[" ",je.length>0&&V.jsx("span",{className:"bg-red-500 text-white text-[10px] px-1.5 rounded-full ml-1",children:je.length})]}),V.jsxs("button",{onClick:()=>H("matches"),className:`pb-2 border-b-2 transition ${q==="matches"?"border-pink-500 text-pink-600 font-bold":"border-transparent text-gray-500"}`,children:[" (",L.length,")"]})]})]}),V.jsxs("div",{className:"max-w-6xl mx-auto p-4 pb-20",children:[q==="participants"&&V.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:[y.filter(j=>j.uid!==f).map(j=>{const N=de.some(le=>le.toUid===j.uid),W=E.some(le=>le.toUid===j.uid&&le.fromUid===f&&le.status==="skipped"),ce=L.some(le=>le.fromUid===j.uid||le.toUid===j.uid);return V.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-4",children:[V.jsxs("div",{className:"flex gap-3 mb-3",children:[V.jsx("div",{className:"p-3 bg-gray-100 rounded-full h-fit",children:V.jsx(_u,{className:"w-6 h-6 text-gray-500"})}),V.jsxs("div",{className:"flex-1",children:[V.jsx("h3",{className:"font-bold text-gray-800",children:j.name}),j.message&&V.jsx("p",{className:"text-sm text-gray-600 mt-1 bg-gray-50 p-2 rounded",children:j.message}),V.jsxs("div",{className:"flex gap-2 mt-2",children:[j.phone&&V.jsx(nd,{className:"w-4 h-4 text-gray-400"}),j.line&&V.jsx(td,{className:"w-4 h-4 text-gray-400"}),j.email&&V.jsx(ed,{className:"w-4 h-4 text-gray-400"}),j.url&&V.jsx(Zh,{className:"w-4 h-4 text-gray-400"})]})]})]}),ce?V.jsx("div",{className:"bg-green-50 text-green-700 py-2 rounded-lg text-center font-bold text-sm",children:""}):N?V.jsx("div",{className:"bg-gray-100 text-gray-500 py-2 rounded-lg text-center font-bold text-sm",children:""}):W?V.jsx("div",{className:"bg-gray-100 text-gray-400 py-2 rounded-lg text-center font-bold text-sm",children:""}):V.jsx("button",{onClick:()=>C(j),className:"w-full bg-pink-500 text-white py-2 rounded-lg hover:bg-pink-600 font-bold text-sm shadow",children:""})]},j.uid)}),y.length<=1&&V.jsx("div",{className:"col-span-full text-center py-12 text-gray-400",children:"..."})]}),q==="requests"&&V.jsxs("div",{className:"space-y-6",children:[V.jsxs("div",{children:[V.jsx("h2",{className:"text-sm font-bold text-gray-500 mb-2",children:""}),fe&&je.length>0&&V.jsxs("div",{className:"mb-4 bg-yellow-50 border border-yellow-200 p-3 rounded-lg flex items-center gap-2 text-yellow-800 text-sm",children:[V.jsx(Pd,{className:"w-4 h-4"}),V.jsxs("span",{children:[" ",V.jsx("strong",{children:De})," "]})]}),V.jsxs("div",{className:"space-y-3",children:[je.map(j=>V.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-4",children:[V.jsxs("div",{className:"flex justify-between items-start mb-2",children:[V.jsxs("div",{className:"flex gap-3",children:[V.jsx("div",{className:"p-2 bg-pink-50 rounded-full h-fit",children:V.jsx(_u,{className:"w-5 h-5 text-pink-500"})}),V.jsxs("div",{children:[V.jsx("h3",{className:"font-bold text-gray-800",children:j.fromName}),j.fromMessage&&V.jsx("p",{className:"text-xs text-gray-500 mt-1",children:j.fromMessage})]})]}),V.jsx("span",{className:"text-[10px] bg-red-100 text-red-600 px-2 py-0.5 rounded-full",children:"New"})]}),V.jsxs("div",{className:"flex gap-2 mt-3",children:[V.jsx("button",{onClick:()=>Le(j),className:`flex-1 py-2 rounded-lg text-sm font-bold flex items-center justify-center gap-1 transition ${fe?"bg-gray-300 text-gray-500 cursor-help":"bg-green-500 text-white hover:bg-green-600"}`,children:fe?V.jsxs(V.Fragment,{children:[V.jsx(ew,{className:"w-4 h-4"})," ",De,""]}):V.jsxs(V.Fragment,{children:[V.jsx(r_,{className:"w-4 h-4"})," "]})}),V.jsxs("button",{onClick:()=>rt(j),className:"flex-1 bg-gray-200 text-gray-600 py-2 rounded-lg text-sm font-bold flex items-center justify-center gap-1",children:[V.jsx(iw,{className:"w-4 h-4"})," "]})]})]},j.id)),je.length===0&&V.jsx("div",{className:"text-center py-8 text-gray-400 text-sm",children:""})]}),te.length>0&&V.jsxs("div",{className:"mt-8 pt-6 border-t",children:[V.jsxs("button",{onClick:()=>A(!k),className:"flex items-center gap-2 text-gray-500 text-sm font-bold mx-auto hover:text-gray-700",children:[" (",te.length,")",k?V.jsx(Y1,{className:"w-4 h-4"}):V.jsx(X1,{className:"w-4 h-4"})]}),k&&V.jsx("div",{className:"mt-4 space-y-3 bg-gray-50 p-4 rounded-xl",children:te.map(j=>V.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm flex items-center justify-between opacity-80",children:[V.jsxs("div",{className:"flex items-center gap-3",children:[V.jsx("div",{className:"p-2 bg-gray-200 rounded-full",children:V.jsx(_u,{className:"w-4 h-4 text-gray-500"})}),V.jsx("h3",{className:"font-bold text-gray-700 text-sm",children:j.fromName})]}),V.jsxs("button",{onClick:()=>Le(j),className:`px-3 py-1.5 rounded-lg text-xs font-bold flex items-center gap-1 ${fe?"bg-gray-300 text-gray-500":"bg-blue-100 text-blue-600 hover:bg-blue-200"}`,children:[V.jsx(rw,{className:"w-3 h-3"}),fe?"":""]})]},j.id))})]})]}),V.jsxs("div",{children:[V.jsx("h2",{className:"text-sm font-bold text-gray-500 mb-2",children:""}),V.jsx("div",{className:"space-y-3",children:de.map(j=>V.jsx("div",{className:"bg-white rounded-xl shadow-sm border p-4 flex justify-between items-center opacity-70",children:V.jsxs("div",{className:"flex items-center gap-3",children:[V.jsx("div",{className:"p-2 bg-gray-100 rounded-full",children:V.jsx(_u,{className:"w-5 h-5 text-gray-500"})}),V.jsxs("div",{children:[V.jsx("h3",{className:"font-bold text-gray-800",children:j.toName}),V.jsx("p",{className:"text-xs text-gray-500",children:"..."})]})]})},j.id))})]})]}),q==="matches"&&V.jsxs("div",{className:"space-y-4",children:[L.map(j=>{const N=j.fromUid===f,W=N?j.toName:j.fromName,ce=N?j.toMessage:j.fromMessage,le=N?j.toPhone:j.fromPhone,_e=N?j.toLine:j.fromLine,ve=N?j.toEmail:j.fromEmail,Ie=N?j.toUrl:j.fromUrl;return V.jsxs("div",{className:"bg-white rounded-xl shadow-md border p-5",children:[V.jsxs("div",{className:"flex items-center gap-3 mb-4 pb-3 border-b",children:[V.jsx("div",{className:"p-3 bg-pink-100 rounded-full",children:V.jsx(Z1,{className:"w-6 h-6 text-pink-500"})}),V.jsxs("div",{children:[V.jsx("h3",{className:"font-bold text-xl text-gray-800",children:W}),ce&&V.jsx("p",{className:"text-sm text-gray-600",children:ce})]})]}),V.jsxs("div",{className:"space-y-3",children:[le&&V.jsxs("div",{className:"flex items-center gap-3",children:[V.jsx(nd,{className:"w-5 h-5 text-gray-400"}),V.jsxs("div",{children:[V.jsx("p",{className:"text-[10px] text-gray-400 font-bold",children:""}),V.jsx("p",{className:"font-medium text-gray-800",children:V.jsx("a",{href:`tel:${le}`,children:le})})]})]}),_e&&V.jsxs("div",{className:"flex items-center gap-3",children:[V.jsx(td,{className:"w-5 h-5 text-[#06C755]"}),V.jsxs("div",{children:[V.jsx("p",{className:"text-[10px] text-gray-400 font-bold",children:"LINE ID"}),V.jsx("p",{className:"font-medium text-gray-800 selectable",children:_e})]})]}),ve&&V.jsxs("div",{className:"flex items-center gap-3",children:[V.jsx(ed,{className:"w-5 h-5 text-gray-400"}),V.jsxs("div",{children:[V.jsx("p",{className:"text-[10px] text-gray-400 font-bold",children:""}),V.jsx("p",{className:"font-medium text-gray-800 break-all",children:V.jsx("a",{href:`mailto:${ve}`,children:ve})})]})]}),Ie&&V.jsxs("div",{className:"flex items-center gap-3",children:[V.jsx(Zh,{className:"w-5 h-5 text-blue-500"}),V.jsxs("div",{children:[V.jsx("p",{className:"text-[10px] text-gray-400 font-bold",children:"URL"}),V.jsx("a",{href:Ie,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline text-sm break-all",children:""})]})]}),!le&&!_e&&!ve&&!Ie&&V.jsx("p",{className:"text-sm text-gray-400 text-center py-2",children:""})]})]},j.id)}),L.length===0&&V.jsx("div",{className:"text-center py-12 text-gray-500",children:""})]})]})]})}function _R(){const[i,e]=Xe.useState(""),[t,s]=Xe.useState(""),[o,l]=Xe.useState(""),[h,f]=Xe.useState(""),[g,y]=Xe.useState(!1);Xe.useEffect(()=>{let I=window.location.origin+window.location.pathname;const L=[];i&&L.push(`room=${encodeURIComponent(i)}`),t&&L.push(`limit=${t}`),o&&L.push(`start=${o}`),L.length>0&&(I+="?"+L.join("&")),f(I),y(!1)},[i,t,o]);const w=()=>{navigator.clipboard.writeText(h),y(!0),setTimeout(()=>y(!1),2e3)};return V.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:V.jsxs("div",{className:"max-w-2xl mx-auto bg-white rounded-xl shadow-lg p-8",children:[V.jsxs("div",{className:"flex items-center gap-3 mb-8 pb-4 border-b",children:[V.jsx("div",{className:"p-3 bg-gray-900 rounded-lg",children:V.jsx(tw,{className:"w-6 h-6 text-white"})}),V.jsxs("div",{children:[V.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:""}),V.jsx("p",{className:"text-gray-500",children:""})]})]}),V.jsxs("div",{className:"space-y-8",children:[V.jsxs("div",{children:[V.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),V.jsx("input",{type:"text",value:i,onChange:E=>e(E.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg",placeholder:""})]}),V.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[V.jsxs("div",{children:[V.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" ()"}),V.jsx("input",{type:"date",value:t,onChange:E=>s(E.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg"})]}),V.jsxs("div",{children:[V.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-1",children:[V.jsx(Pd,{className:"w-4 h-4"})," "]}),V.jsx("input",{type:"datetime-local",value:o,onChange:E=>l(E.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg"}),V.jsx("p",{className:"text-xs text-gray-400 mt-1",children:" "})]})]}),V.jsxs("div",{className:"bg-gray-100 p-6 rounded-xl",children:[V.jsxs("div",{className:"flex gap-2 mb-6",children:[V.jsx("input",{readOnly:!0,type:"text",value:h,className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg bg-white text-gray-600 font-mono text-sm"}),V.jsxs("button",{onClick:w,className:`px-6 py-3 rounded-lg font-medium transition flex items-center gap-2 ${g?"bg-green-500 text-white":"bg-gray-900 text-white"}`,children:[g?V.jsx(r_,{className:"w-5 h-5"}):V.jsx(J1,{className:"w-5 h-5"}),g?"":""]})]}),V.jsx("div",{className:"bg-white p-6 rounded-xl border-2 border-dashed border-gray-300 flex flex-col items-center justify-center",children:V.jsx("div",{className:"p-4 bg-white rounded-lg shadow-sm border border-gray-100",children:V.jsx(mw,{value:h,size:160})})})]})]})]})})}W1.createRoot(document.getElementById("root")).render(V.jsx(Xe.StrictMode,{children:V.jsx(yR,{})}));
